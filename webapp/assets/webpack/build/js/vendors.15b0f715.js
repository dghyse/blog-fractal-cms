"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[96],{38:(t,e,s)=>{s.d(e,{$4:()=>p,$r:()=>R,BL:()=>w,Bm:()=>v,DI:()=>At,E8:()=>K,Et:()=>b,Gv:()=>f,HN:()=>Wt,JF:()=>Ot,Kg:()=>m,M6:()=>X,Nt:()=>Mt,Q7:()=>Vt,Ri:()=>Z,TR:()=>S,Tn:()=>g,ZV:()=>Kt,Zc:()=>_t,Zn:()=>k,Zs:()=>G,c4:()=>I,cH:()=>q,cy:()=>c,do:()=>It,eA:()=>E,fL:()=>x,ff:()=>Ht,fv:()=>J,gF:()=>Yt,hd:()=>ut,jY:()=>L,jh:()=>d,kW:()=>A,lQ:()=>Nt,lq:()=>qt,n_:()=>z,nf:()=>Y,p7:()=>Rt,r$:()=>U,r_:()=>Dt,t7:()=>y,tR:()=>Lt,ui:()=>P,vB:()=>jt,vM:()=>u,xQ:()=>T,yL:()=>l});var i=s(66);const n=Object.freeze,r=Object.assign,o=String,a=i.O.get;i.O.has;const h=i.O.define,l=t=>t instanceof Promise,c=t=>t instanceof Array,u=t=>t instanceof Set,d=t=>t instanceof Map,f=t=>t instanceof Object;function p(t){return"object"==typeof t&&null!==t||"function"==typeof t}const g=t=>"function"==typeof t,m=t=>"string"==typeof t,v=t=>"symbol"==typeof t,b=t=>"number"==typeof t,w=()=>Object.create(null),y=Object.is,$=(t,...e)=>{const s=o(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(o)}`)},k=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=r.charCodeAt(n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),C=function(){const t=r(w(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,l=t.charAt(0),c=e(l),u=0;for(;u<i;++u)n=h,a=l,h=c,l=t.charAt(u+1),c=e(l),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===c),o+=s(a,r),r=!1);return o}}(),T=function(){const t=w(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=C(s,e)),i}}(),x=function(){const t=w();return e=>{let s=t[e];return void 0===s&&(s=T(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),A=function(){const t=w(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=C(s,e)),i}}(),R=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},M=(t,e)=>{const s=e.name;e.addInitializer(function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})})},S=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},I=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw $(20)},E=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function B(...t){return r(w(),...t)}const O=(()=>{const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),null==e&&(i=(s=n.toString()).length,e=i>28&&s.indexOf("[native code] }")===i-15,t.set(n,e)),e)})(),P=(t,e)=>l(t)?t.then(e):e(t),L=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],l(e=t[n])&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},j=(t,e)=>new Bt(t,1,e),N=(t,e)=>new Bt(t,2,e),D=(t,e)=>new Bt(e,5,t),F=new WeakMap,V=t=>(e,s,i)=>{let n=F.get(e);if(void 0===n&&F.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},q={instance:(t,e)=>new Bt(t,0,e),singleton:j,transient:N,callback:(t,e)=>new Bt(t,3,e),cachedCallback:(t,e)=>new Bt(t,3,V(e)),aliasTo:D,defer:(t,...e)=>new Pt(t,e)},K=function(t){return function(e){e.register(j(this,this),D(this,t))}},_="au:annotation",W=(t,e)=>void 0===e?`${_}:${t}`:`${_}:${t}:${e}`,H=n({name:"au:annotation",appendTo:(t,e)=>{const s=a(_,t);void 0===s?h([e],t,_):s.push(e)},set(t,e,s){h(s,t,W(e))},get:(t,e)=>a(W(e),t),getKeys(t){let e=a(_,t);return void 0===e&&h(e=[],t,_),e},isKey:t=>t.startsWith(_),keyFor:W}),z="au:resource",U=(t,e,s)=>null==e?`${z}:${t}`:null==s?`${z}:${t}:${e}`:`${z}:${t}:${e}:${s}`,G={annotation:H},Q=Object.prototype.hasOwnProperty;function Y(t,e,s,i){let n=a(W(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&Q.call(s,t)?n:i()):n):n}function J(t,e,s){let i=a(W(t),e);return void 0===i?(i=e[t],void 0!==i&&Q.call(e,t)?i:s()):i}function X(t,e,s){const i=e[t];return void 0===i?s():i}const Z=Symbol.for("au:registrable"),tt={none(t){throw $(2,t)},singleton:t=>new Bt(t,1,t),transient:t=>new Bt(t,2,t)};class et{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===et.DEFAULT?et.DEFAULT:new et(t.inheritParentResources??!1,t.defaultResolver??tt.singleton)}}et.DEFAULT=et.from({});const st=t=>new ot(null,et.from(t)),it=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let nt=0,rt=null;class ot{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++nt,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(Rt,ft)}register(...t){if(100===++this.i)throw $(6,...t);let e,s,i,n,r,o,h=0,l=t.length;for(;h<l;++h)if(e=t[h],p(e))if(pt(e))e.register(this);else if(null!=(o=a(z,e)))o.register(this);else if(mt(e)){const t=e[Symbol.metadata]?.[Z];if(pt(t))t.register(this);else if(m(e.$au?.type)){const t=e.$au,s=(e.aliases??Lt).concat(t.aliases??Lt);let i=`${z}:${t.type}:${t.name}`;if(this.has(i,!1))continue;for(D(e,i).register(this),this.has(e,!1)||j(e,e).register(this),n=0,r=s.length;n<r;++n)i=`${z}:${t.type}:${s[n]}`,this.has(i,!1)||D(e,i).register(this)}else j(e,e).register(this)}else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],p(i)&&(pt(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){lt(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),vt(t)){if(void 0!==this.res[t])throw $(7,t);this.res[t]=e}}else n instanceof Bt&&4===n.$?n._state.push(e):i.set(t,new Bt(t,4,[n,e]));return s&&this.u.set(t,e),e}deregister(t){lt(t);const e=this.h.get(t);null!=e&&(this.h.delete(t),vt(t)&&delete this.res[t],this.u.has(t)&&(e.dispose(),this.u.delete(t)))}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(lt(t),void 0!==t.resolve)return t;const s=rt;let i,n,r=rt=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=gt(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{rt=s}return null}has(t,e=!1){return this.h.has(t)||vt(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(lt(t),t.$isResolver)return t.resolve(this,this);const e=rt;let s,i,n=rt=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=gt(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{rt=e}throw $(8,t)}getAll(t,e=!1){lt(t);const s=rt,i=rt=this;let n,r=i,o=Lt;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(dt(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return dt(n,r,i);if(r=r.t,null==r)return Lt}}finally{rt=s}return Lt}invoke(t,e){if(O(t))throw $(15,t);const s=rt;rt=this;try{return void 0===e?new t(...Ct(t).map(ct,this)):new t(...Ct(t).map(ct,this),...e)}finally{rt=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(O(t))throw $(15,t);this.R.set(t,e=new at(t,Ct(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===et.DEFAULT?new ot(this,this.config):new ot(this,et.from({...this.config,inheritParentResources:!1})):new ot(this,et.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose?.(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=m(e)?`${z}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=pt(t);if(!g(t)&&!s)throw $(9,t);if(it.has(t.name))throw $(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw $(11,t)}return s}if(t.$isInterface)throw $(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class at{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=rt;let i;rt=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(ct,t)):new this.Type(...this.dependencies.map(ct,t),...e),null==this.transformers?i:this.transformers.reduce(ht,i)}finally{rt=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function ht(t,e){return e(t)}function lt(t){if(null==t)throw $(14)}function ct(t){return this.get(t)}function ut(...t){if(null==rt)throw $(16,...t);return 1===t.length?rt.get(t[0]):t.map(ct,rt)}const dt=(t,e,s)=>{if(t instanceof Bt&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},ft={$isResolver:!0,resolve:(t,e)=>e},pt=t=>g(t?.register),gt=t=>(t=>pt(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,mt=t=>void 0!==t.prototype,vt=t=>m(t)&&t.indexOf(":")>0;class bt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,V(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Bt(i,t,e))}}const wt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],k(n)||(e[n]=t[n]);return e},yt=W("di:paramtypes"),$t=t=>a("design:paramtypes",t),kt=t=>t.metadata[yt]??=[],Ct=t=>{const e=W("di:dependencies");let s=a(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=$t(t),i=(t=>a(yt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=g(e)&&e!==Function.prototype?wt(Ct(e)):[]}else s=wt(i);else if(void 0===i)s=wt(e);else{s=wt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],k(a)||(s[a]=i[a])}}else s=wt(i);h(s,t,e)}return s},Tt=(t,e)=>{const s=g(t)?t:e,i=(m(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new bt(t,e??n)):void 0};return n},xt=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=kt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=kt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw $(22,String(s.name),s.kind)}},At=(()=>((0,i.b)(),{createContainer:st,getDesignParamtypes:$t,getDependencies:Ct,createInterface:Tt,inject:xt,transient:t=>(t.register=function(e){return N(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Et)=>(t.register=function(e){return j(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)}))(),Rt=Tt("IContainer"),Mt=Rt;function St(t,e){return At.transient(t)}function It(t,e){return null==t?St:St(t)}const Et={scoped:!1};At.singleton;class Bt{get $isResolver(){return!0}constructor(t,e,s){this.j=!1,this.F=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.j)throw $(3,this._state.name);return this.j=!0,this._state=(this.F=t.getFactory(this._state)).construct(e),this.$=0,this.j=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw $(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw $(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.F;default:return null}}}class Ot{get friendlyName(){return this.I}constructor(t,e=null,s=null){this.I=t,this.A=e,this.L=s}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw $(13,this.I);return this.A}getFactory(t){return null==this.L?null:t.getFactory(this.L)}dispose(){this.A=null}}class Pt{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter(t=>"object"==typeof t))}}const Lt=n([]),jt=n({});function Nt(){}const Dt=Tt("IPlatform");function Ft(t){return function(e){function s(t,e){xt(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Vt=(t,e=!1)=>{function s(t,e){xt(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},qt=Ft((t,e,s)=>s.has(t,!0)?s.get(t):void 0),Kt=Ft((t,e,s)=>s.has(t,!1)?s.get(t):void 0),_t=Ft((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t)),Wt=Ft((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0),Ht=Ft((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1));function zt(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=s.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[f])("accessor"===h?{get:u.get,set:u.set}:u[l],p);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}"function"==typeof SuppressedError&&SuppressedError,n({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Ut=Tt("ILogConfig",t=>t.instance(new te("no-colors",3))),Gt=Tt("ISink"),Qt=Tt("ILogEventFactory",t=>t.singleton(re)),Yt=Tt("ILogger",t=>t.singleton(oe)),Jt=Tt("ILogScope"),Xt=n({key:W("logger-sink-handles"),define(t,e){h(e.handles,t,this.key)},getHandles(t){return a(this.key,t.constructor)}}),Zt=B({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class te{constructor(t,e){this.colorOptions=t,this.level=e}}const ee=function(){const t={"no-colors":B({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:B({TRC:Zt.grey("TRC"),DBG:Zt.grey("DBG"),INF:Zt.white("INF"),WRN:Zt.yellow("WRN"),ERR:Zt.red("ERR"),FTL:Zt.red("FTL"),QQQ:Zt.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),se=(t,e)=>"no-colors"===e?t.join("."):t.map(Zt.cyan).join("."),ie=(t,e)=>"no-colors"===e?new Date(t).toISOString():Zt.grey(new Date(t).toISOString());class ne{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${ie(n,i)} [${ee(t,i)}] ${e}`:`${ie(n,i)} [${ee(t,i)} ${se(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const l=0===i.length?"":` ${se(i,n)}`;let c=`${ie(r,n)} [${ee(e,n)}${l}] ${h}`;if(void 0===o||0===o.length)return null===a?[c]:[c,a];let u=0;for(;c.includes("%s");)c=c.replace("%s",String(o[u++]));return null!==a?[c,a,...o.slice(u)]:[c,...o.slice(u)]}}class re{constructor(){this.config=ut(Ut)}createLogEvent(t,e,s,i){return new ne(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let oe=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=ut(Ut),e=ut(Qt),s=ut(Vt(Gt)),i=ut(qt(Jt))??[],n=null){let r,o,h,l,c,u;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this._=w(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],l=this.K=[],c=this.N=[],u=this.G=[];for(const t of s){const e=Xt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&l.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,l=this.K=n.K,c=this.N=n.N,u=this.G=n.G}trace(t,...e){this.config.level<=0&&this.W(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.W(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.W(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.W(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.W(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.W(this.G,5,t,e)}scopeTo(e){const s=this._;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}W(t,e,s,i){const n=g(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[M],s=[M],i=[M],n=[M],r=[M],o=[M],zt(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),zt(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),zt(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),zt(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),zt(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),zt(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})()},57:(t,e,s)=>{s.d(e,{s:()=>n});var i=s(964);class n extends i.OD{static getOrCreate(t,e={}){let s=n.t.get(t);return void 0===s&&n.t.set(t,s=new n(t,e)),s}static set(t,e){n.t.set(t,e)}get domWriteQueue(){return this.domQueue}get domReadQueue(){return this.domQueue}constructor(t,e={}){super(t,e),"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]?.bind(t)??(t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)})(s)),this.domQueue=(()=>{let t=!1,e=-1;const s=()=>{e=-1,!0===t&&(t=!1,n.flush())},n=new i.Pq(this,()=>{t=!0,-1===e&&(e=this.requestAnimationFrame(s))},()=>{t=!1,e>-1&&(this.cancelAnimationFrame(e),e=-1)});return n})()}}n.t=new WeakMap},66:(t,e,s)=>{function i(){Symbol.metadata??=Symbol.for("Symbol.metadata")}s.d(e,{O:()=>n,b:()=>i});const n={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){let i=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;null==i&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}}},141:(t,e,s)=>{s.d(e,{Bn:()=>Q,EG:()=>G,HC:()=>C,HG:()=>v,Kg:()=>ge,Nw:()=>ke,O3:()=>ft,UA:()=>ue,Um:()=>y,WM:()=>ve,Wh:()=>oe,ZU:()=>b,aX:()=>q,az:()=>U,bu:()=>le,hH:()=>xe,jC:()=>T,jL:()=>K,jd:()=>_,mi:()=>k,qM:()=>$,rq:()=>Y,td:()=>pe,xM:()=>ot,y0:()=>be});var i=s(339),n=s(38),r=s(66);const o=Object.prototype.hasOwnProperty,a=Reflect.defineProperty;function h(t,e,s){return a(t,e,{configurable:!0,writable:!0,value:s}),s}function l(t,e,s){e in t||h(t,e,s)}const c=Object.assign,u=Object.freeze,d=String,f=n.DI.createInterface,p=r.O.get,g=r.O.define,m=(t,...e)=>new Error(`AUR${d(t).padStart(4,"0")}:${e.map(d)}`);class v{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw m(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw m(204);return new v(null,t,e??new w,s??!1)}static fromParent(t,e,s=new w){if(null==t)throw m(203);return new v(t,e,s,!1)}}class b{constructor(t,e){void 0!==t&&(this[t]=e)}}class w{}const{astAssign:y,astEvaluate:$,astBind:k,astUnbind:C}=(()=>{const t="AccessScope",e="AccessMember",s="AccessKeyed",r="Assign",o="ValueConverter",a="BindingBehavior",h="ForOfStatement",l="ArrayDestructuring",c="ObjectDestructuring",u="DestructuringAssignmentLeaf",f="Custom",p=v.getContext;function g(i,y,$,k){switch(i.$kind){case"AccessThis":{let t=y.overrideContext,e=y,s=i.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case"AccessBoundary":{let t=y;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case t:{const t=p(y,i.name,i.ancestor);null!==k&&k.observe(t,i.name);const e=t[i.name];if(null==e){if("$host"===i.name)throw m(105);return e}return $?.boundFn&&(0,n.Tn)(e)?e.bind(t):e}case"AccessGlobal":return globalThis[i.name];case"CallGlobal":{const t=globalThis[i.name];if((0,n.Tn)(t))return t(...i.args.map(t=>g(t,y,$,k)));if(!$?.strict&&null==t)return;throw m(107)}case"ArrayLiteral":return i.elements.map(t=>g(t,y,$,k));case"ObjectLiteral":{const t={};for(let e=0;e<i.keys.length;++e)t[i.keys[e]]=g(i.values[e],y,$,k);return t}case"PrimitiveLiteral":return i.value;case"New":{const t=g(i.func,y,$,k);if((0,n.Tn)(t))return new t(...i.args.map(t=>g(t,y,$,k)));throw m(107)}case"Template":{let t=i.cooked[0];for(let e=0;e<i.expressions.length;++e)t+=d(g(i.expressions[e],y,$,k)),t+=i.cooked[e+1];return t}case"Unary":{const t=g(i.expression,y,$,k);switch(i.operation){case"void":return;case"typeof":return typeof t;case"!":return!t;case"-":return-t;case"+":return+t;case"--":if(null!=k)throw m(113);return b(i.expression,y,$,k,t-1)+i.pos;case"++":if(null!=k)throw m(113);return b(i.expression,y,$,k,t+1)-i.pos;default:throw m(109,i.operation)}}case"CallScope":{const t=p(y,i.name,i.ancestor);if(null==t){if($?.strict)throw m(114,i.name,t);return}const e=t[i.name];if((0,n.Tn)(e))return e.apply(t,i.args.map(t=>g(t,y,$,k)));if(null==e){if($?.strict&&!i.optional)throw m(111,i.name);return}throw m(111,i.name)}case"CallMember":{const t=g(i.object,y,$,k);if(null==t&&$?.strict&&!i.optionalMember)throw m(114,i.name,t);const e=t?.[i.name];if(null==e){if(!i.optionalCall&&$?.strict)throw m(111,i.name);return}if(!(0,n.Tn)(e))throw m(111,i.name);const s=e.apply(t,i.args.map(t=>g(t,y,$,k)));return(0,n.cy)(t)&&w.includes(i.name)&&k?.observeCollection(t),s}case"CallFunction":{const t=g(i.func,y,$,k);if((0,n.Tn)(t))return t(...i.args.map(t=>g(t,y,$,k)));if(null==t){if(!i.optional&&$?.strict)throw m(107);return}throw m(107)}case"ArrowFunction":{const t=(...t)=>{const e=i.args,s=i.rest,n=e.length-1,r=e.reduce((e,i,r)=>(e[i.name]=s&&r===n?t.slice(r):t[r],e),{}),o=v.fromParent(y,r);return g(i.body,o,$,k)};return t}case e:{const t=g(i.object,y,$,k);if(null==t){if(!i.optional&&$?.strict)throw m(114,i.name,t);return}null===k||i.accessGlobal||k.observe(t,i.name);const e=t[i.name];return $?.boundFn&&(0,n.Tn)(e)?e.bind(t):e}case s:{const t=g(i.object,y,$,k),e=g(i.key,y,$,k);if(null==t){if(!i.optional&&$?.strict)throw m(115,e,t);return}return null===k||i.accessGlobal||k.observe(t,e),t[e]}case"TaggedTemplate":{const t=i.expressions.map(t=>g(t,y,$,k)),e=g(i.func,y,$,k);if(!(0,n.Tn)(e))throw m(110);return e(i.cooked,...t)}case"Binary":{const t=i.left,e=i.right;switch(i.operation){case"&&":return g(t,y,$,k)&&g(e,y,$,k);case"||":return g(t,y,$,k)||g(e,y,$,k);case"??":return g(t,y,$,k)??g(e,y,$,k);case"==":return g(t,y,$,k)==g(e,y,$,k);case"===":return g(t,y,$,k)===g(e,y,$,k);case"!=":return g(t,y,$,k)!=g(e,y,$,k);case"!==":return g(t,y,$,k)!==g(e,y,$,k);case"instanceof":{const s=g(e,y,$,k);return!!(0,n.Tn)(s)&&g(t,y,$,k)instanceof s}case"in":{const s=g(e,y,$,k);return!!(0,n.$4)(s)&&g(t,y,$,k)in s}case"+":return g(t,y,$,k)+g(e,y,$,k);case"-":return g(t,y,$,k)-g(e,y,$,k);case"*":return g(t,y,$,k)*g(e,y,$,k);case"/":return g(t,y,$,k)/g(e,y,$,k);case"%":return g(t,y,$,k)%g(e,y,$,k);case"**":return g(t,y,$,k)**g(e,y,$,k);case"<":return g(t,y,$,k)<g(e,y,$,k);case">":return g(t,y,$,k)>g(e,y,$,k);case"<=":return g(t,y,$,k)<=g(e,y,$,k);case">=":return g(t,y,$,k)>=g(e,y,$,k);default:throw m(108,i.operation)}}case"Conditional":return g(i.condition,y,$,k)?g(i.yes,y,$,k):g(i.no,y,$,k);case r:{let t=g(i.value,y,$,k);if("="!==i.op){if(null!=k)throw m(113);const e=g(i.target,y,$,k);switch(i.op){case"/=":t=e/t;break;case"*=":t*=e;break;case"+=":t=e+t;break;case"-=":t=e-t;break;default:throw m(108,i.op)}}return b(i.target,y,$,k,t)}case o:return $?.useConverter?.(i.name,"toView",g(i.expression,y,$,k),i.args.map(t=>g(t,y,$,k)));case a:return g(i.expression,y,$,k);case"BindingIdentifier":return i.name;case h:return g(i.iterable,y,$,k);case"Interpolation":if(i.isMulti){let t=i.parts[0],e=0;for(;e<i.expressions.length;++e)t+=d(g(i.expressions[e],y,$,k)),t+=i.parts[e+1];return t}return`${i.parts[0]}${g(i.firstExpression,y,$,k)}${i.parts[1]}`;case u:return g(i.target,y,$,k);case l:return i.list.map(t=>g(t,y,$,k));case"ArrayBindingPattern":case"ObjectBindingPattern":case c:default:return;case f:return i.evaluate(y,$,k)}}function b(h,d,w,y,$){switch(h.$kind){case t:if("$host"===h.name)throw m(106);return p(d,h.name,h.ancestor)[h.name]=$;case e:{const t=g(h.object,d,w,y);if(null==t){if(w?.strict)throw m(116,h.name);b(h.object,d,w,y,{[h.name]:$})}else(0,n.$4)(t)&&("length"===h.name&&(0,n.cy)(t)&&!isNaN($)?t.splice($):t[h.name]=$);return $}case s:{const t=g(h.object,d,w,y),e=g(h.key,d,w,y);if(null==t){if(w?.strict)throw m(116,e);return b(h.object,d,w,y,{[e]:$}),$}if((0,n.cy)(t)){if("length"===e&&!isNaN($))return t.splice($),$;if((0,n.Zn)(e))return t.splice(e,1,$),$}return t[e]=$}case r:return b(h.value,d,w,y,$),b(h.target,d,w,y,$);case o:return $=w?.useConverter?.(h.name,"fromView",$,h.args.map(t=>g(t,d,w,y))),b(h.expression,d,w,y,$);case a:return b(h.expression,d,w,y,$);case l:case c:{const t=h.list,e=t.length;let s,i;for(s=0;s<e;s++)switch(i=t[s],i.$kind){case u:b(i,d,w,y,$);break;case l:case c:{if("object"!=typeof $||null===$)throw m(112);let t=g(i.source,v.create($),w,null);void 0===t&&i.initializer&&(t=g(i.initializer,d,w,null)),b(i,d,w,y,t);break}}break}case u:if(h instanceof i.lJ){if(null==$)return;if("object"!=typeof $)throw m(112);let t=g(h.source,v.create($),w,y);void 0===t&&h.initializer&&(t=g(h.initializer,d,w,y)),b(h.target,d,w,y,t)}else{if(null==$)return;if("object"!=typeof $)throw m(112);const t=h.indexOrProperties;let e;if((0,n.Zn)(t)){if(!Array.isArray($))throw m(112);e=$.slice(t)}else e=Object.entries($).reduce((e,[s,i])=>(t.includes(s)||(e[s]=i),e),{});b(h.target,d,w,y,e)}break;case f:return h.assign(d,w,$);default:return}}const w="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:g,astAssign:b,astBind:function t(e,s,i){switch(e.$kind){case a:i.bindBehavior?.(e.name,s,e.args.map(t=>g(t,s,i,null))),t(e.expression,s,i);break;case o:i.bindConverter?.(e.name),t(e.expression,s,i);break;case h:t(e.iterable,s,i);break;case f:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case a:i.unbindBehavior?.(e.name,s),t(e.expression,s,i);break;case o:i.unbindConverter?.(e.name),t(e.expression,s,i);break;case h:t(e.iterable,s,i);break;case f:e.unbind?.(s,i)}}}})(),T=t=>{const e=t.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{h(e,t,()=>{throw m(99,t)})})},x="pending",A="completed",R="canceled",M=Promise.resolve();let S=!1,I=!1;const E=[],B=[];let O=0,P=null,L=[],j=null,N=null;const D=()=>{S||(S=!0,M.then(()=>{S=!1,I=!0,V()}))},F=t=>{if(P&&0===E.length&&0===O)if(P=null,L.length>0){const t=L;L=[],1===t.length?N(t[0]):N(new AggregateError(t,"One or more tasks failed."))}else j(t)},V=()=>{const t=!I;I=!1,P??=new Promise((t,e)=>{j=t,N=e});let e=-E.length;const s=0===E.length;for(;E.length>0;){if(++e>1e4){const t=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw E.length=0,N?.(t),P=null,t}const s=E.shift();if("function"==typeof s)try{s()}catch(t){L.push(t)}else s.run()}const i=L.slice();if(F(!s),t&&i.length>0)throw 1===i.length?i[0]:new AggregateError(i,"One or more tasks failed.")},q=()=>P||(E.length>0||O>0?P??=new Promise((t,e)=>{j=t,N=e}):M.then(()=>(E.length>0||O>0)&&(P??=new Promise((t,e)=>{j=t,N=e})))),K=t=>{D(),E.push(t)},_=(t,e)=>{const s=new H(t,e?.delay);return null!=s.delay&&s.delay>0?(++O,s.t=setTimeout(()=>{--O,s.t=void 0,s.status!==R?(E.push(s),D()):F(!0)},s.delay)):(E.push(s),D()),s};class W extends Error{constructor(t){super(`Task ${t.id} was canceled.`),this.task=t}}class H{get result(){return this.i}get status(){return this.u}constructor(t,e){this.callback=t,this.delay=e,this.id=++H.h,this.u=x,this.i=new Promise((t,e)=>{this.C=t,this.A=e})}run(){if(this.u!==x)throw new Error(`Cannot run task in ${this.u} state`);let t;this.u="running";try{t=this.callback()}catch(t){return this.u=R,this.A(t),void L.push(t)}t instanceof Promise?(++O,t.then(t=>{this.u=A,this.C(t)}).catch(t=>{this.u=R,this.A(t),L.push(t)}).finally(()=>{--O,F(!0)})):(this.u=A,this.C(t))}cancel(){if(void 0!==this.t){clearTimeout(this.t),--O,this.t=void 0,this.u=R;const t=new W(this);return this.A(t),this.i.catch(n.lQ),F(!0),!0}if(this.u===x){const t=E.indexOf(this);if(t>-1){E.splice(t,1),this.u=R;const e=new W(this);return this.A(e),this.i.catch(n.lQ),F(!0),!0}}return!1}}H.h=0;class z{constructor(t,e){this.cb=t,this.P=e,this.id=++z.R,this.I=!1,this._=[]}run(){try{this.cb()}catch(t){return void L.push(t)}}O(){this.I||(this.t=setTimeout(()=>{this.M(),this.I||this.O()},this.P))}M(){E.push(this),D();const t=this._.splice(0);for(const e of t)e()}next(){return this.I?Promise.resolve():new Promise(t=>this._.push(t))}cancel(){this.I=!0,void 0!==this.t&&(clearTimeout(this.t),this.t=void 0);const t=B.indexOf(this);t>-1&&B.splice(t,1);const e=this._.splice(0);for(const t of e)t()}}z.R=0;const U=n.DI.createInterface("ICoercionConfiguration"),G=u({None:0,Observer:1,Node:2,Layout:4});function Q(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const Y=(()=>{function t(){return h(this,"subs",new r)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n,r){if(!i.has(n)){i.add(n);const r=n.prototype;a(r,"subs",{get:t}),l(r,"subscribe",e),l(r,"unsubscribe",s)}return n}class r{constructor(){this.count=0,this.T=[],this.L=[],this.N=!1}add(t){return!this.T.includes(t)&&(this.T[this.T.length]=t,"handleDirty"in t&&(this.L[this.L.length]=t,this.N=!0),++this.count,!0)}remove(t){let e=this.T.indexOf(t);return-1!==e&&(this.T.splice(e,1),e=this.L.indexOf(t),-1!==e&&(this.L.splice(e,1),this.N=this.L.length>0),--this.count,!0)}notify(t,e){for(const s of this.T.slice(0))s.handleChange(t,e)}notifyCollection(t,e){const s=this.T.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}notifyDirty(){if(this.N)for(const t of this.L.slice(0))t.handleDirty()}}return function(t,e){return null==t?n:n(t)}})();class J{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleDirty(){this.v!==this.o.length&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&(this.subs.notifyDirty(),this.subs.notify(this.v,s))}}Z(J);class X{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw m(220)}handleDirty(){this.v!==this.o.size&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function Z(t){const e=t.prototype;return l(e,"subscribe",tt),l(e,"unsubscribe",et),Y(t,null)}function tt(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function et(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}Z(X);const st=(()=>{const t=Symbol.for("__au_arr_obs__"),e=Array[t]??h(Array,t,new WeakMap);function s(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function i(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function r(t,e,s,i,n){let r,o,a,h,l,c,u;for(c=s+1;c<i;c++){for(r=t[c],o=e[c],u=c-1;u>=s&&(a=t[u],h=e[u],l=n(a,r),l>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function o(t,e,s,i,n){let a,h,l,c,u,d,f,p,g,m,v,b,w,y,$,k,C,T,x,A=0,R=0;for(;;){if(i-s<=10)return void r(t,e,s,i,n);A=s+(i-s>>1),a=t[s],c=e[s],h=t[i-1],u=e[i-1],l=t[A],d=e[A],f=n(a,h),f>0&&(m=a,v=c,a=h,c=u,h=m,u=v),p=n(a,l),p>=0?(m=a,v=c,a=l,c=d,l=h,d=u,h=m,u=v):(g=n(h,l),g>0&&(m=h,v=u,h=l,u=d,l=m,d=v)),t[s]=a,e[s]=c,t[i-1]=l,e[i-1]=d,b=h,w=u,y=s+1,$=i-1,t[A]=t[y],e[A]=e[y],t[y]=b,e[y]=w;t:for(R=y+1;R<$;R++)if(k=t[R],C=e[R],T=n(k,b),T<0)t[R]=t[y],e[R]=e[y],t[y]=k,e[y]=C,y++;else if(T>0){do{if($--,$==R)break t;x=t[$],T=n(x,b)}while(T>0);t[R]=t[$],e[R]=e[$],t[$]=k,e[$]=C,T<0&&(k=t[R],C=e[R],t[R]=t[y],e[R]=e[y],t[y]=k,e[y]=C,y++)}i-$<y-s?(o(t,e,$,i,n),i=y):(o(t,e,s,y,n),s=$)}}const l=Array.prototype,c=["push","unshift","pop","shift","splice","reverse","sort"];let u,d=!1;const f="__au_arr_on__";function m(){if(void 0===u&&function(){const t=l.push,r=l.unshift,h=l.pop,d=l.shift,f=l.splice,p=l.reverse,g=l.sort;u={push:function(...s){const i=e.get(this);if(void 0===i)return t.apply(this,s);const n=this.length,r=s.length;if(0===r)return n;this.length=i.indexMap.length=n+r;let o=n;for(;o<this.length;)this[o]=s[o-n],i.indexMap[o]=-2,o++;return i.notify(),this.length},unshift:function(...t){const s=e.get(this);if(void 0===s)return r.apply(this,t);const i=t.length,n=new Array(i);let o=0;for(;o<i;)n[o++]=-2;r.apply(s.indexMap,n);const a=r.apply(this,t);return s.notify(),a},pop:function(){const t=e.get(this);if(void 0===t)return h.call(this);const s=t.indexMap,i=h.call(this),n=s.length-1;return s[n]>-1&&(s.deletedIndices.push(s[n]),s.deletedItems.push(i)),h.call(s),t.notify(),i},shift:function(){const t=e.get(this);if(void 0===t)return d.call(this);const s=t.indexMap,i=d.call(this);return s[0]>-1&&(s.deletedIndices.push(s[0]),s.deletedItems.push(i)),d.call(s),t.notify(),i},splice:function(...t){const s=t[0],i=t[1],n=e.get(this);if(void 0===n)return f.apply(this,t);const r=this.length,o=0|s,a=o<0?Math.max(r+o,0):Math.min(o,r),h=n.indexMap,l=t.length,c=0===l?0:1===l?r-a:i;let u=a;if(c>0){const t=u+c;for(;u<t;)h[u]>-1&&(h.deletedIndices.push(h[u]),h.deletedItems.push(this[u])),u++}if(u=0,l>2){const t=l-2,e=new Array(t);for(;u<t;)e[u++]=-2;f.call(h,s,i,...e)}else f.apply(h,t);const d=f.apply(this,t);return(c>0||u>0)&&n.notify(),d},reverse:function(){const t=e.get(this);if(void 0===t)return p.call(this),this;const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const e=s-n-1,i=this[n],r=t.indexMap[n],o=this[e],a=t.indexMap[e];this[n]=o,t.indexMap[n]=a,this[e]=i,t.indexMap[e]=r,n++}return t.notify(),this},sort:function(t){const r=e.get(this);if(void 0===r)return g.call(this,t),this;let a=this.length;if(a<2)return this;o(this,r.indexMap,0,a,i);let h=0;for(;h<a&&void 0!==this[h];)h++;void 0!==t&&(0,n.Tn)(t)||(t=s),o(this,r.indexMap,0,h,t);let l=!1;for(h=0,a=r.indexMap.length;a>h;++h)if(r.indexMap[h]!==h){l=!0;break}return l&&r.notify(),this}};for(const t of c)a(u[t],"observing",{value:!0})}(),!p(f,Array)){g(!0,Array,f);for(const t of c)!0!==l[t].observing&&h(l,t,u[t])}}class v{constructor(t){this.type=1,d||(d=!0,m()),this.indexObservers={},this.collection=t,this.indexMap=Q(t.length),this.lenObs=void 0,e.set(t,this)}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.length;this.indexMap=Q(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new J(this)}getIndexObserver(t){return this.indexObservers[t]??=new b(this,t)}}Y(v,null);class b{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}return Y(b,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new v(t)),m()),s}})(),it=(()=>{const t=Symbol.for("__au_set_obs__"),e=Set[t]??h(Set,t,new WeakMap),{add:s,clear:i,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(t){const i=e.get(this);if(void 0===i)return s.call(this,t),this;const n=this.size;return s.call(this,t),this.size===n||(i.indexMap[n]=-2,i.notify()),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}i++}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=Q(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=Q(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new X(this)}}return Y(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)h(t,e,o[e])}(t)),s}})(),nt=(()=>{const t=Symbol.for("__au_map_obs__"),e=Map[t]??h(Map,t,new WeakMap),{set:s,clear:i,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(t,i){const n=e.get(this);if(void 0===n)return s.call(this,t,i),this;const r=this.get(t),o=this.size;if(s.call(this,t,i),this.size===o){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==r&&(n.indexMap.deletedIndices.push(n.indexMap[e]),n.indexMap.deletedItems.push(s),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[o]=-2,n.notify(),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}++i}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=Q(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=Q(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new X(this)}}return Y(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)h(t,e,o[e])}(t)),s}})(),rt=(()=>{class t{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(s,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(t,e){e.unsubscribe(this.b)}function s(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function i(){return h(this,"obs",new t(this))}function r(t,e){this.obs.add(this.oL.getObserver(t,e))}function o(t){let e;if((0,n.cy)(t))e=st(t);else if((0,n.vM)(t))e=it(t);else{if(!(0,n.jh)(t))throw m(210,t);e=nt(t)}this.obs.add(e)}function c(t){this.obs.add(t)}function u(){throw m(99,"handleChange")}function d(){throw m(99,"handleCollectionChange")}return function(t,e){const s=t.prototype;return l(s,"observe",r),l(s,"observeCollection",o),l(s,"subscribeTo",c),a(s,"obs",{get:i}),l(s,"handleChange",u),l(s,"handleCollectionChange",d),t}})();function ot(t,e){return null==t?rt:rt(t,e)}let at=null;const ht=[];let lt=!1;function ct(){return at}function ut(t){if(null==t)throw m(206);if(null==at)return at=t,ht[0]=at,void(lt=!0);if(at===t)throw m(207);ht.push(t),at=t,lt=!0}function dt(t){if(null==t)throw m(208);if(at!==t)throw m(209);ht.pop(),at=ht.length>0?ht[ht.length-1]:null,lt=null!=at}const ft=u({get current(){return at},get connecting(){return lt},enter:ut,exit:dt,pause:function(){lt=!1},resume:function(){lt=!0}}),pt=Reflect.get,gt=Object.prototype.toString,mt=new WeakMap;function vt(t){switch(gt.call(t)){case"[object Object]":return!0!==t.constructor.__au_nw__;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const bt="__raw__";function wt(t){return vt(t)?yt(t):t}function yt(t){return mt.get(t)??function(t){const e=(0,n.cy)(t)?xt:(0,n.jh)(t)||(0,n.vM)(t)?Gt:Tt,s=new Proxy(t,e);return mt.set(t,s),mt.set(s,s),s}(t)}function $t(t){return t[bt]??t}function kt(t){return vt(t)&&t[bt]||t}function Ct(t,e){if("constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${d(e)}__`])return!0;const s=Reflect.getOwnPropertyDescriptor(t,e);return!1===s?.configurable&&!1===s.writable}const Tt={get(t,e,s){if(e===bt)return t;const i=ct();return!lt||Ct(t,e)||null==i?pt(t,e,s):(i.observe(t,e),wt(pt(t,e,s)))},deleteProperty:(t,e)=>delete t[e]},xt={get(t,e,s){if(e===bt)return t;if(!lt||Ct(t,e)||null==at)return pt(t,e,s);switch(e){case"length":return at.observe(t,"length"),t.length;case"map":return At;case"includes":return St;case"indexOf":return It;case"lastIndexOf":return Et;case"every":return Rt;case"filter":return Mt;case"find":return Ot;case"findIndex":return Bt;case"flat":return Pt;case"flatMap":return Lt;case"join":return jt;case"push":return Dt;case"pop":return Nt;case"reduce":return zt;case"reduceRight":return Ut;case"reverse":return Kt;case"shift":return Ft;case"unshift":return Vt;case"slice":return Ht;case"splice":return qt;case"some":return _t;case"sort":return Wt;case"keys":return se;case"values":case Symbol.iterator:return ie;case"entries":return ne}return at.observe(t,e),wt(pt(t,e,s))},ownKeys:t=>(ct()?.observe(t,"length"),Reflect.ownKeys(t))};function At(t,e){const s=$t(this),i=s.map((s,i)=>kt(t.call(e,wt(s),i,this)));return re(at,s),wt(i)}function Rt(t,e){const s=$t(this),i=s.every((s,i)=>t.call(e,wt(s),i,this));return re(at,s),i}function Mt(t,e){const s=$t(this),i=s.filter((s,i)=>kt(t.call(e,wt(s),i,this)));return re(at,s),wt(i)}function St(t){const e=$t(this),s=e.includes(kt(t));return re(at,e),s}function It(t){const e=$t(this),s=e.indexOf(kt(t));return re(at,e),s}function Et(t){const e=$t(this),s=e.lastIndexOf(kt(t));return re(at,e),s}function Bt(t,e){const s=$t(this),i=s.findIndex((s,i)=>kt(t.call(e,wt(s),i,this)));return re(at,s),i}function Ot(t,e){const s=$t(this),i=s.find((e,s)=>t(wt(e),s,this),e);return re(at,s),wt(i)}function Pt(){const t=$t(this);return re(at,t),wt(t.flat())}function Lt(t,e){const s=$t(this);return re(at,s),yt(s.flatMap((s,i)=>wt(t.call(e,wt(s),i,this))))}function jt(t){const e=$t(this);return re(at,e),e.join(t)}function Nt(){return wt($t(this).pop())}function Dt(...t){return $t(this).push(...t)}function Ft(){return wt($t(this).shift())}function Vt(...t){return $t(this).unshift(...t)}function qt(...t){return wt($t(this).splice(...t))}function Kt(...t){return wt($t(this).reverse())}function _t(t,e){const s=$t(this),i=s.some((s,i)=>kt(t.call(e,wt(s),i,this)));return re(at,s),i}function Wt(t){const e=$t(this),s=e.sort(t);return re(at,e),wt(s)}function Ht(t,e){const s=$t(this);return re(at,s),yt(s.slice(t,e))}function zt(t,e){const s=$t(this),i=s.reduce((e,s,i)=>t(e,wt(s),i,this),e);return re(at,s),wt(i)}function Ut(t,e){const s=$t(this),i=s.reduceRight((e,s,i)=>t(e,wt(s),i,this),e);return re(at,s),wt(i)}const Gt={get(t,e,s){if(e===bt)return t;const i=ct();if(!lt||Ct(t,e)||null==i)return pt(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return te;case"delete":return ee;case"forEach":return Qt;case"add":if((0,n.vM)(t))return Zt;break;case"get":if((0,n.jh)(t))return Jt;break;case"set":if((0,n.jh)(t))return Xt;break;case"has":return Yt;case"keys":return se;case"values":return ie;case"entries":return ne;case Symbol.iterator:return(0,n.jh)(t)?ne:ie}return wt(pt(t,e,s))}};function Qt(t,e){const s=$t(this);return re(at,s),s.forEach((s,i)=>{t.call(e,wt(s),wt(i),this)})}function Yt(t){const e=$t(this);return re(at,e),e.has(kt(t))}function Jt(t){const e=$t(this);return re(at,e),wt(e.get(kt(t)))}function Xt(t,e){return wt($t(this).set(kt(t),kt(e)))}function Zt(t){return wt($t(this).add(kt(t)))}function te(){return wt($t(this).clear())}function ee(t){return wt($t(this).delete(kt(t)))}function se(){const t=$t(this);re(at,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:wt(s),done:i}},[Symbol.iterator](){return this}}}function ie(){const t=$t(this);re(at,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:wt(s),done:i}},[Symbol.iterator](){return this}}}function ne(){const t=$t(this);re(at,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[wt(s[0]),wt(s[1])],done:i}},[Symbol.iterator](){return this}}}const re=(t,e)=>t?.observeCollection(e),oe=u({getProxy:yt,getRaw:$t,wrap:wt,unwrap:kt,rawKey:bt});class ae{constructor(t,e,s,i,n="async"){this.type=1,this.ov=void 0,this.v=void 0,this.V=!1,this.B=!1,this.D=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.H=wt(t),this.$get=e,this.$set=s,this.oL=i,this.$=n}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1,this.V=!1),this.v)}setValue(t){if(!(0,n.Tn)(this.$set))throw m(221);void 0!==this.j&&(t=this.j.call(null,t,this.F)),(0,n.t7)(t,this.v)||(this.$set.call(this.o,t),this.run())}useCoercer(t,e){return this.j=t,this.F=e,!0}useCallback(t){return this.cb=t,!0}handleDirty(){this.D||(this.D=!0,this.subs.notifyDirty())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.compute(),this.D=!1,this.V=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll(),this.ov=void 0,this.V=!0)}run(){"sync"!==this.$?this.B||(this.B=!0,K(()=>{this.B=!1,this.U()})):this.U()}U(){const t=this.v,e=this.ov,s=this.compute();this.D=!1,this.V&&(0,n.t7)(s,t)||(this.cb?.(s,e),this.subs.notify(s,e),this.ov=this.v=s,this.V=!0)}compute(){this.obs.version++;try{return ut(this),this.v=kt(this.$get.call(this.H,this.H,this))}finally{this.obs.clear(),dt(this)}}}ot(ae,null),Y(ae,null),"function"==typeof SuppressedError&&SuppressedError;const he=(()=>{const t=new WeakMap,e=t=>(0,n.Bm)(t)?t:String(t);return{get:(s,i)=>t.get(s)?.get(e(i)),W:(s,i)=>t.get(s)?.get(e(i))?.flush,set:(s,i,n)=>{t.has(s)||t.set(s,new Map),t.get(s).set(e(i),n)}}})(),le=f("IDirtyChecker",void 0),ce={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class ue{static register(t){t.register(n.cH.singleton(this,this),n.cH.aliasTo(this,le))}constructor(){this.tracked=[],this.q=null,this.K=0,this.p=(0,n.hd)(n.r_),this.check=()=>{if(ce.disabled)return;if(++this.K<ce.timeoutsPerCheck)return;this.K=0;const t=this.tracked.slice(0),e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},Y(de,null)}createProperty(t,e){if(ce.throw)throw m(218,e);return new de(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.q=(t=>{const e=new z(t,Math.max(0,0));return B.push(e),e.O(),e})(this.check))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.q.cancel(),this.q=null)}}class de{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.G=t}getValue(){return this.obj[this.key]}setValue(t){throw m(219,this.key)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.G.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.G.removeProperty(this)}}class fe{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class pe{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class ge{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){void 0!==this.j&&(t=this.j.call(void 0,t,this.F));const e=this.v;if(this.iO){if((0,n.t7)(t,this.v))return;this.v=t,this.subs.notifyDirty(),this.subs.notify(t,e),(0,n.t7)(t,this.v)&&this.cb?.(t,e)}else this.v=this.o[this.k]=t,this.cb?.(t,e)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.j=t,this.F=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],a(this.o,this.k,{enumerable:!0,configurable:!0,get:c(()=>this.getValue(),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(a(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}Y(ge,null);const me=new pe,ve=f("IObserverLocator",t=>t.singleton($e)),be=f("INodeObserverLocator",t=>t.cachedCallback(t=>new we));class we{handles(){return!1}getObserver(){return me}getAccessor(){return me}}const ye=f("IComputedObserverLocator",t=>t.singleton(class{getObserver(t,e,s,i){const n=new ae(t,s.get,s.set,i,he.W(t,e));return a(t,e,{enumerable:s.enumerable,configurable:!0,get:c(()=>n.getValue(),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}}));class $e{constructor(){this.J=[],this.G=(0,n.hd)(le),this.X=(0,n.hd)(be),this.Y=(0,n.hd)(ye)}addAdapter(t){this.J.push(t)}getObserver(t,e){if(null==t)throw m(199,e);if(!(0,n.Gv)(t))return new fe(t,(0,n.Tn)(e)?"":e);if((0,n.Tn)(e))return new ae(t,e,void 0,this);const s=xe(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.X.handles(t,e,this)?this.X.getAccessor(t,e,this):me}getArrayObserver(t){return st(t)}getMapObserver(t){return nt(t)}getSetObserver(t){return it(t)}createObserver(t,e){if(this.X.handles(t,e,this))return this.X.getObserver(t,e,this);switch(e){case"length":if((0,n.cy)(t))return st(t).getLengthObserver();break;case"size":if((0,n.jh)(t))return nt(t).getLengthObserver();if((0,n.vM)(t))return it(t).getLengthObserver();break;default:if((0,n.cy)(t)&&(0,n.Zn)(e))return st(t).getIndexObserver(Number(e))}let s=Te(t,e);if(void 0===s){let i=Ce(t);for(;null!==i&&(s=Te(i,e),void 0===s);)i=Ce(i)}if(void 0!==s&&!o.call(s,"value")){let i=this.Z(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.Y.getObserver(t,e,s,this):this.G.createProperty(t,e):i}return new ge(t,e)}Z(t,e,s){if(this.J.length>0)for(const i of this.J){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const ke=t=>{let e;return(0,n.cy)(t)?e=st(t):(0,n.jh)(t)?e=nt(t):(0,n.vM)(t)&&(e=it(t)),e},Ce=Object.getPrototypeOf,Te=Object.getOwnPropertyDescriptor,xe=t=>{let e=t.$observers;return void 0===e&&a(t,"$observers",{value:e=(0,n.BL)()}),e};ot(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this.et=void 0,this.run=()=>{if(this.stopped)throw m(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{this.et?.call(void 0),ut(this),this.et=this.fn(this)}finally{this.obs.clear(),this.running=!1,dt(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,m(226);this.run()}else this.runCount=0}},this.stop=()=>{this.et?.call(void 0),this.et=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}},null);class Ae{constructor(t,e,s,i){this.oL=e,this.v=void 0,this.boundFn=!1,this.s=t,this.ast=s,this.cb=i}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const t=this.v,e=$(this.ast,this.s,this,this);this.obs.clear(),(0,n.t7)(e,t)||(this.v=e,this.cb.call(void 0,e,t))}stop(){this.obs.clearAll(),this.v=void 0}}ot(Ae,null),T(Ae)},339:(t,e,s)=>{s.d(e,{$o:()=>tt,DC:()=>K,H9:()=>H,HL:()=>it,JW:()=>vt,L3:()=>V,N6:()=>ot,Oe:()=>j,PR:()=>ut,TZ:()=>D,WH:()=>at,Y_:()=>X,bK:()=>Q,do:()=>st,eC:()=>bt,f8:()=>et,fU:()=>Z,iZ:()=>N,jc:()=>rt,ko:()=>dt,lJ:()=>ct,lc:()=>ht,lq:()=>U,pc:()=>G,qd:()=>gt,rc:()=>W,sm:()=>J,v2:()=>q,xB:()=>nt,xN:()=>lt,yV:()=>L});var i=s(38);const n="AccessThis",r="AccessBoundary",o="AccessGlobal",a="AccessScope",h="ArrayLiteral",l="ObjectLiteral",c="PrimitiveLiteral",u="Template",d="Unary",f="CallScope",p="CallMember",g="CallFunction",m="AccessMember",v="AccessKeyed",b="TaggedTemplate",w="Binary",y="Conditional",$="Assign",k="ArrowFunction",C="ValueConverter",T="BindingBehavior",x="ArrayBindingPattern",A="ObjectBindingPattern",R="BindingIdentifier",M="ForOfStatement",S="Interpolation",I="ArrayDestructuring",E="ObjectDestructuring",B="DestructuringAssignmentLeaf",O="Custom";class P{constructor(t){this.value=t,this.$kind=O}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class L{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=T,this.key=`_bb_${e}`}}class j{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=C}}class N{constructor(t,e,s="="){this.target=t,this.value=e,this.op=s,this.$kind=$}}class D{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=y}}class F{constructor(t){this.name=t,this.$kind=o}}class V{constructor(t=0){this.ancestor=t,this.$kind=n}}class q{constructor(){this.$kind=r}}class K{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=a}}const _=t=>t.$kind===o||(t.$kind===m||t.$kind===v)&&t.accessGlobal;class W{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=m,this.accessGlobal=_(t)}}class H{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=v,this.accessGlobal=_(t)}}class z{constructor(t,e){this.func=t,this.args=e,this.$kind="New"}}class U{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind=f}}class G{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind=p}}class Q{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind=g}}class Y{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class J{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=w}}class X{constructor(t,e,s=0){this.operation=t,this.expression=e,this.pos=s,this.$kind=d}}class Z{constructor(t){this.value=t,this.$kind=c}}Z.$undefined=new Z(void 0),Z.$null=new Z(null),Z.$true=new Z(!0),Z.$false=new Z(!1),Z.$empty=new Z("");class tt{constructor(t){this.elements=t,this.$kind=h}}tt.$empty=new tt(i.tR);class et{constructor(t,e){this.keys=t,this.values=e,this.$kind=l}}et.$empty=new et(i.tR,i.tR);class st{constructor(t,e=i.tR){this.cooked=t,this.expressions=e,this.$kind=u}}st.$empty=new st([""]);class it{constructor(t,e,s,n=i.tR){this.cooked=t,this.func=s,this.expressions=n,this.$kind=b,t.raw=e}}class nt{constructor(t){this.elements=t,this.$kind=x}}class rt{constructor(t,e){this.keys=t,this.values=e,this.$kind=A}}class ot{constructor(t){this.name=t,this.$kind=R}}class at{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind=M}}class ht{constructor(t,e=i.tR){this.parts=t,this.expressions=e,this.$kind=S,this.isMulti=e.length>1,this.firstExpression=e[0]}}class lt{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class ct{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=B}}class ut{constructor(t,e){this.target=t,this.indexOrProperties=e,this.$kind=B}}class dt{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind=k}}const ft=String,pt=()=>Object.create(null),gt=(t,e)=>{switch(t.$kind){case v:return e.visitAccessKeyed(t);case m:return e.visitAccessMember(t);case a:return e.visitAccessScope(t);case n:return e.visitAccessThis(t);case r:return e.visitAccessBoundary(t);case x:return e.visitArrayBindingPattern(t);case I:return e.visitDestructuringAssignmentExpression(t);case h:return e.visitArrayLiteral(t);case k:return e.visitArrowFunction(t);case $:return e.visitAssign(t);case w:return e.visitBinary(t);case T:return e.visitBindingBehavior(t);case R:return e.visitBindingIdentifier(t);case g:return e.visitCallFunction(t);case p:return e.visitCallMember(t);case f:return e.visitCallScope(t);case y:return e.visitConditional(t);case B:return e.visitDestructuringAssignmentSingleExpression(t);case M:return e.visitForOfStatement(t);case S:return e.visitInterpolation(t);case A:return e.visitObjectBindingPattern(t);case E:return e.visitDestructuringAssignmentExpression(t);case l:return e.visitObjectLiteral(t);case c:return e.visitPrimitiveLiteral(t);case b:return e.visitTaggedTemplate(t);case u:return e.visitTemplate(t);case d:return e.visitUnary(t);case C:return e.visitValueConverter(t);case O:return e.visitCustom(t);default:throw(t=>new Error(t))(`Trying to visit unknown ast node ${JSON.stringify(t)}`)}},mt=(t,...e)=>new Error(`AUR${ft(t).padStart(4,"0")}:${e.map(ft)}`),vt=i.DI.createInterface("IExpressionParser");class bt{constructor(){this.t=pt(),this.i=pt(),this.h=pt()}parse(t,e){let s;switch(e){case Ot:return new P(t);case Mt:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case St:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===Et||e===Bt)return Z.$empty;throw be()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return Lt=t,jt=0,Nt=t.length,Dt=0,Ft=0,Vt=6291456,qt="",Pt=Ut(0),Kt=!0,_t=!1,Wt=!0,Ht=-1,Yt(61,void 0===e?Bt:e)}}function wt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}bt.register=(0,i.E8)(vt);const yt=Z.$false,$t=Z.$true,kt=Z.$null,Ct=Z.$undefined,Tt=new V(0),xt=new V(1),At=new q,Rt="None",Mt="Interpolation",St="IsIterator",It="IsChainable",Et="IsFunction",Bt="IsProperty",Ot="IsCustom";let Pt,Lt="",jt=0,Nt=0,Dt=0,Ft=0,Vt=6291456,qt="",Kt=!0,_t=!1,Wt=!0,Ht=-1;const zt=String.fromCharCode,Ut=t=>Lt.charCodeAt(t),Gt=()=>Lt.slice(Ft,jt),Qt="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Yt(t,e){if(e===Ot)return new P(Lt);if(0===jt){if(e===Mt)return function(){const t=[],e=[],s=Nt;let i="";for(;jt<s;){switch(Pt){case 36:if(123===Ut(jt+1)){t.push(i),i="",jt+=2,Pt=Ut(jt),ne();const s=Yt(61,Mt);e.push(s);continue}i+="$";break;case 92:i+=zt(wt(re()));break;default:i+=zt(Pt)}re()}return e.length?(t.push(i),new ht(t,e)):null}();if(ne(),4194304&Vt)throw de()}Kt=577>t,_t=!1,Wt=579>t;let s,i=!1,r=0;if(131072&Vt){const t=De[63&Vt];ne(),s=new X(t,Yt(579,e)),Kt=!1}else{t:switch(Vt){case 12296:r=Dt,Kt=!1,Wt=!1;do{switch(ne(),++r,Vt){case 65547:if(ne(),!(12288&Vt))throw pe();break;case 12:case 13:throw pe();case 2162702:if(_t=!0,ne(),!(12288&Vt)){s=0===r?Tt:1===r?xt:new V(r),i=!0;break t}break;default:if(2097152&Vt){s=0===r?Tt:1===r?xt:new V(r);break t}throw ge()}}while(12296===Vt);case 4096:{const t=qt;if(e===St)s=new ot(t);else if(Wt&&Qt.includes(t))s=new F(t);else{if(Wt&&"import"===t)throw Ce();s=new K(t,r)}if(Kt=!_t,ne(),ce(53)){if(524298===Vt)throw je();const e=_t,i=Dt;++Dt;const n=Yt(62,Rt);_t=e,Dt=i,Kt=!1,s=new dt([new ot(t)],n)}break}case 12:throw Ne();case 13:throw fe();case 12293:switch(Kt=!1,ne(),Dt){case 0:s=Tt;break;case 1:s=xt;break;default:s=new V(Dt)}break;case 12294:Kt=!1,ne(),s=At;break;case 2688009:s=function(t){ne();const e=jt,s=Ft,i=Vt,n=Pt,r=qt,o=_t,a=[];let h=1,l=!1;e:for(;;){if(13===Vt){if(ne(),4096!==Vt)throw pe();if(a.push(new ot(qt)),ne(),6291475===Vt)throw Le();if(7340048!==Vt)throw fe();if(ne(),53!==Vt)throw fe();ne();const t=_t,e=Dt;++Dt;const s=Yt(62,Rt);return _t=t,Dt=e,Kt=!1,new dt(a,s,!0)}switch(Vt){case 4096:a.push(new ot(qt)),ne();break;case 7340048:ne();break e;case 524298:case 2688020:ne(),h=4;break;case 6291475:h=2,l=!0;break e;case 2688009:h=2;break e;default:ne(),h=2}switch(Vt){case 6291475:if(ne(),l=!0,1===h)break;break e;case 7340048:ne();break e;case 4194352:1===h&&(h=3);break e;case 53:if(l)throw Be();ne(),h=2;break e;default:1===h&&(h=2);break e}}if(53===Vt){if(1===h){if(ne(),524298===Vt)throw je();const t=_t,e=Dt;++Dt;const s=Yt(62,Rt);return _t=t,Dt=e,Kt=!1,new dt(a,s)}throw Be()}if(1===h&&0===a.length)throw Me();if(l)switch(h){case 2:throw Be();case 3:throw Oe();case 4:throw Pe()}jt=e,Ft=s,Vt=i,Pt=n,qt=r,_t=o;const c=_t,u=Yt(62,t);if(_t=c,ue(7340048),53===Vt)switch(h){case 2:throw Be();case 3:throw Oe();case 4:throw Pe()}return u}(e);break;case 2688020:s=Lt.search(/\s+of\s+/)>jt?function(){const t=[],e=new lt(I,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(ne(),Vt){case 7340053:i=!1,r();break;case 6291475:r();break;case 4096:s=Gt();break;default:throw Se()}return ue(7340053),e;function r(){""!==s?(t.push(new ct(new W(Tt,s),new H(Tt,new Z(n++)),void 0)),s=""):n++}}():function(t){const e=_t;ne();const s=new Array;for(;7340053!==Vt;)if(ce(6291475)){if(s.push(Ct),7340053===Vt)break}else{if(s.push(Yt(62,t===St?Rt:t)),!ce(6291475))break;if(7340053===Vt)break}return _t=e,ue(7340053),t===St?new nt(s):(Kt=!1,new tt(s))}(e);break;case 524298:s=function(t){const e=_t,s=new Array,i=new Array;for(ne();7340047!==Vt;){if(s.push(qt),49152&Vt)ne(),ue(6291478),i.push(Yt(62,t===St?Rt:t));else{if(!(12288&Vt))throw xe();{const e=Pt,s=Vt,n=jt;ne(),ce(6291478)?i.push(Yt(62,t===St?Rt:t)):(Pt=e,Vt=s,jt=n,i.push(Yt(580,t===St?Rt:t)))}}7340047!==Vt&&ue(6291475)}return _t=e,ue(7340047),t===St?new rt(s,i):(Kt=!1,new et(s,i))}(e);break;case 2163762:s=new st([qt]),Kt=!1,ne();break;case 2163763:s=se(e,s,!1);break;case 16384:case 32768:s=new Z(qt),Kt=!1,ne();break;case 8194:case 8195:case 8193:case 8192:s=De[63&Vt],Kt=!1,ne();break;case 8196:{ne();const t=Yt(578,e);let i;2688009===Vt?i=Jt():(i=[],ne()),s=new z(t,i),Kt=!1;break}default:throw jt>=Nt?me():ve()}if(e===St)return function(t){if(!ee.includes(t.$kind))throw Te(t.$kind);if(4204596!==Vt)throw Te(t.$kind);ne();const e=t,s=Yt(61,It);return new at(e,s,Ht)}(s);switch(Vt){case 2228282:case 2228283:s=new X(De[63&Vt],s,1),ne(),Kt=!1}if(579<t)return s;if(12===Vt||13===Vt)throw pe();if(s.$kind===n)switch(Vt){case 2162702:if(_t=!0,Kt=!1,ne(),!(13312&Vt))throw Ie();if(12288&Vt)s=new K(qt,s.ancestor),ne();else if(2688009===Vt)s=new Q(s,Jt(),!0);else{if(2688020!==Vt)throw Ee();s=Xt(s,!0)}break;case 65547:if(Kt=!_t,ne(),!(12288&Vt))throw pe();s=new K(qt,s.ancestor),ne();break;case 12:case 13:throw pe();case 2688009:s=new Q(s,Jt(),i);break;case 2688020:s=Xt(s,i);break;case 2163762:s=ie(s);break;case 2163763:s=se(e,s,!0)}for(;(65536&Vt)>0;)switch(Vt){case 2162702:s=Zt(s);break;case 65547:if(ne(),!(12288&Vt))throw pe();s=te(s,!1);break;case 12:case 13:throw pe();case 2688009:if(578===t)return s;s=s.$kind===a?new U(s.name,Jt(),s.ancestor,!1):s.$kind===m?new G(s.object,s.name,Jt(),s.optional,!1):s.$kind===o?new Y(s.name,Jt()):new Q(s,Jt(),!1);break;case 2688020:s=Xt(s,!1);break;case 2163762:if(_t)throw Ee();s=ie(s);break;case 2163763:if(_t)throw Ee();s=se(e,s,!0)}}if(12===Vt||13===Vt)throw pe();if(577<t)return s;for(;(262144&Vt)>0;){const i=Vt;if((960&i)<=t)break;ne(),s=new J(De[63&i],s,Yt(960&i,e)),Kt=!1}if(63<t)return s;if(ce(6291480)){const t=Yt(62,e);ue(6291478),s=new D(s,t,Yt(62,e)),Kt=!1}if(62<t)return s;switch(Vt){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!Kt)throw we();const t=De[63&Vt];ne(),s=new N(s,Yt(62,e),t);break}}if(61<t)return s;for(;ce(6291482);){if(6291456===Vt)throw ye();const t=qt;ne();const i=new Array;for(;ce(6291478);)i.push(Yt(62,e));s=new j(s,t,i)}for(;ce(6291481);){if(6291456===Vt)throw $e();const t=qt;ne();const i=new Array;for(;ce(6291478);)i.push(Yt(62,e));s=new L(s,t,i)}if(6291456!==Vt){if(e===Mt&&7340047===Vt)return s;if(e===It&&6291479===Vt){if(jt===Nt)throw ve();return Ht=jt-1,s}if("of"===Gt())throw ke();throw ve()}return s}function Jt(){const t=_t;ne();const e=[];for(;7340048!==Vt&&(e.push(Yt(62,Rt)),ce(6291475)););return ue(7340048),Kt=!1,_t=t,e}function Xt(t,e){const s=_t;return ne(),t=new H(t,Yt(62,Rt),e),ue(7340053),Kt=!s,_t=s,t}function Zt(t){if(_t=!0,Kt=!1,ne(),!(13312&Vt))throw Ie();if(12288&Vt)return te(t,!0);if(2688009===Vt)return t.$kind===a?new U(t.name,Jt(),t.ancestor,!0):t.$kind===m?new G(t.object,t.name,Jt(),t.optional,!0):new Q(t,Jt(),!0);if(2688020===Vt)return Xt(t,!0);throw Ee()}function te(t,e){const s=qt;switch(Vt){case 2162702:{_t=!0,Kt=!1;const i=jt,n=Ft,r=Vt,o=Pt,a=qt,h=Kt,l=_t;if(ne(),!(13312&Vt))throw Ie();return 2688009===Vt?new G(t,s,Jt(),e,!0):(jt=i,Ft=n,Vt=r,Pt=o,qt=a,Kt=h,_t=l,new W(t,s,e))}case 2688009:return Kt=!1,new G(t,s,Jt(),e,!1);default:return Kt=!_t,ne(),new W(t,s,e)}}const ee=[x,A,R,I,E];function se(t,e,s){const i=_t,n=[qt];ue(2163763);const r=[Yt(62,t)];for(;2163762!==(Vt=le());)n.push(qt),ue(2163763),r.push(Yt(62,t));return n.push(qt),Kt=!1,_t=i,s?(ne(),new it(n,n,e,r)):(ne(),new st(n,r))}function ie(t){Kt=!1;const e=[qt];return ne(),new it(e,e,t)}function ne(){for(;jt<Nt;)if(Ft=jt,null!=(Vt=Ve[Pt]()))return;Vt=6291456}function re(){return Pt=Ut(++jt)}function oe(){for(;qe[re()];);const t=Fe[qt=Gt()];return void 0===t?4096:t}function ae(t){let e=Pt;if(!1===t){do{e=re()}while(e<=57&&e>=48);if(46!==e)return qt=parseInt(Gt(),10),32768;if(e=re(),jt>=Nt)return qt=parseInt(Gt().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=re()}while(e<=57&&e>=48);else Pt=Ut(--jt);return qt=parseFloat(Gt()),32768}function he(){let t=!0,e="";for(;96!==re();)if(36===Pt){if(jt+1<Nt&&123===Ut(jt+1)){jt++,t=!1;break}e+="$"}else if(92===Pt)e+=zt(wt(re()));else{if(jt>=Nt)throw Re();e+=zt(Pt)}return re(),qt=e,t?2163762:2163763}const le=()=>{if(jt>=Nt)throw Re();return jt--,he()},ce=t=>Vt===t&&(ne(),!0),ue=t=>{if(Vt!==t)throw Me();ne()},de=()=>mt(151,Lt),fe=()=>mt(152,Lt),pe=()=>mt(153,Lt),ge=()=>mt(154,Lt),me=()=>mt(155,Lt),ve=()=>mt(156,Gt(),jt,Lt),be=()=>mt(157),we=()=>mt(158,Lt),ye=()=>mt(159,Lt),$e=()=>mt(160,Lt),ke=()=>mt(161,Lt),Ce=()=>mt(162,Lt),Te=t=>mt(163,Lt,t),xe=()=>mt(164,Lt),Ae=()=>mt(165,Lt),Re=()=>mt(166,Lt),Me=t=>mt(167,Lt),Se=()=>mt(170,Lt),Ie=()=>mt(171,Lt),Ee=()=>mt(172,Lt),Be=()=>mt(173,Lt),Oe=()=>mt(174,Lt),Pe=()=>mt(175,Lt),Le=()=>mt(176,Lt),je=()=>mt(178,Lt),Ne=()=>mt(179,Lt),De=[yt,$t,kt,Ct,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],Fe=Object.assign(pt(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:Ve,IdParts:qe}=(()=>{const t=()=>{throw mt(168,Lt)};t.notMapped=!0;const e=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],s=[48,58],i=(t,e,s,i)=>{const n=s.length;for(let e=0;e<n;e+=2){const n=s[e];let r=s[e+1];r=r>0?r:n+1,t&&t.fill(i,n,r)}},n=(t=>(i(t,0,e,1),i(t,0,s,1),t))(new Uint8Array(65535)),r=t=>()=>(re(),t),o=new Array(65535);return o.fill(t,0,65535),i(o,0,[0,33,127,161],()=>(re(),null)),i(o,0,e,oe),i(o,0,s,()=>ae(!1)),o[34]=o[39]=()=>function(){const t=Pt;re();let e=0;const s=new Array;let i=jt;for(;Pt!==t;)if(92===Pt)s.push(Lt.slice(i,jt)),re(),e=wt(Pt),re(),s.push(zt(e)),i=jt;else{if(jt>=Nt)throw Ae();re()}const n=Lt.slice(i,jt);re(),s.push(n);const r=s.join("");return qt=r,16384}(),o[96]=()=>he(),o[33]=()=>61!==re()?131121:61!==re()?6553951:(re(),6553953),o[61]=()=>62===re()?(re(),53):61!==Pt?4194352:61!==re()?6553950:(re(),6553952),o[38]=()=>38!==re()?6291481:(re(),6553885),o[124]=()=>124!==re()?6291482:(re(),6553820),o[63]=()=>{if(46===re()){const t=Ut(jt+1);return t<=48||t>=57?(re(),2162702):6291480}return 63!==Pt?6291480:(re(),6553755)},o[46]=()=>re()<=57&&Pt>=48?ae(!0):46===Pt?46!==re()?12:(re(),13):65547,o[60]=()=>61!==re()?6554018:(re(),6554020),o[62]=()=>61!==re()?6554019:(re(),6554021),o[37]=r(6554157),o[40]=r(2688009),o[41]=r(7340048),o[42]=()=>61===re()?(re(),4194360):42===Pt?(re(),6554223):6554156,o[43]=()=>43===re()?(re(),2228282):61!==Pt?2490856:(re(),4194358),o[44]=r(6291475),o[45]=()=>45===re()?(re(),2228283):61!==Pt?2490857:(re(),4194359),o[47]=()=>61!==re()?6554158:(re(),4194361),o[58]=r(6291478),o[59]=r(6291479),o[91]=r(2688020),o[93]=r(7340053),o[123]=r(524298),o[125]=r(7340047),{CharScanners:o,IdParts:n}})()},484:(t,e,s)=>{s.d(e,{KI:()=>a});var i=s(38),n=s(997),r=s(57);s(964),s(339),s(721);const o=r.s.getOrCreate(globalThis);class a extends n.KI{constructor(t=function(){return i.DI.createContainer().register(i.cH.instance(n.r_,o),n.yr)}()){super(t)}static app(t){return(new a).app(t)}static enhance(t){return(new a).enhance(t)}static register(...t){return(new a).register(...t)}app(t){if(n.K9.isType(t)){const e=n.K9.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}},721:(t,e,s)=>{s.d(e,{B3:()=>g,Fv:()=>D,GB:()=>Tt,HF:()=>Et,IZ:()=>V,Ii:()=>m,MI:()=>Ct,Mg:()=>Qt,OA:()=>G,OK:()=>$t,Ou:()=>xt,Rw:()=>Rt,W_:()=>Bt,Wu:()=>It,XF:()=>Ot,XP:()=>P,Y_:()=>re,Zm:()=>p,_G:()=>K,ao:()=>St,bp:()=>q,lp:()=>U,lw:()=>_,m9:()=>At,p5:()=>Mt,vk:()=>kt,xW:()=>F});var i=s(38),n=s(66),r=s(339);const o=i.DI.createInterface,a=Object.freeze,{aliasTo:h,singleton:l}=i.cH,c="Interpolation",u="IsFunction",d="IsProperty",f="custom-element",p=a({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),g=o("ITemplateCompiler"),m=o("IAttrMapper"),v=(t,...e)=>{const s=String(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(String)}`)};var b,w,y,$,k;class C{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.i;break;case 1:this.has=this.u;break;default:this.has=this.A}else switch(t.length){case 0:this.has=this.I;break;case 1:this.has=this.B;break;default:this.has=this.P}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}P(t){return this.chars.includes(t)}B(t){return this.chars===t}I(t){return!1}A(t){return!this.chars.includes(t)}u(t){return this.chars!==t}i(t){return!0}}class T{constructor(){this.parts=i.tR,this.C="",this.T={},this.R={}}get pattern(){const t=this.C;return""===t?null:t}set pattern(t){null==t?(this.C="",this.parts=i.tR):(this.C=t,this.parts=this.R[t])}append(t,e){const s=this.T;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.T;let s;void 0!==e[t]&&(s=this.R,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class x{get C(){return this._?this.L[0]:null}constructor(t,...e){this.charSpec=t,this.V=[],this.H=null,this._=!1,this.L=e}findChild(t){const e=this.V,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.L;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new x(t,e),this.V.push(i),t.repeat&&i.V.push(i)),i}findMatches(t,e){const s=[],i=this.V,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.L.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.L[h]);else for(;h<r;++h)e.append(o.L[h],t);return s}}class A{constructor(t){this.text=t;const e=this.M=t.length,s=this.$=[];let i=0;for(;e>i;++i)s.push(new C(t[i],!1,!1,!1))}eachChar(t){const e=this.M,s=this.$;let i=0;for(;e>i;++i)t(s[i])}}class R{constructor(t){this.text="PART",this.F=new C(t,!0,!1,!0)}eachChar(t){t(this.F)}}class M{constructor(t){this.text=t,this.F=new C(t,!1,!0,!1)}eachChar(t){t(this.F)}}class S{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const I=o("ISyntaxInterpreter",t=>t.singleton(E));class E{constructor(){this.O=new x(null),this.W=[this.O]}add(t){t=t.slice(0).sort((t,e)=>t.pattern>e.pattern?1:-1);const e=t.length;let s,i,n,r,o,a,h,l,c=0;for(;e>c;){for(s=this.O,i=t[c],n=i.pattern,r=new S,o=this.N(i,r),a=o.length,h=t=>s=s.append(t,n),l=0;a>l;++l)o[l].eachChar(h);s.H=r,s._=!0,++c}}interpret(t){const e=new T,s=t.length;let i,n=this.W,r=0;for(;r<s&&(n=this.j(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(B),n.length>0&&(n.sort(O),i=n[0],i.charSpec.isSymbol||e.next(i.C),e.pattern=i.C),e}j(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}N(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new A(i.slice(a,o))),++e.statics,a=o):(s.push(new M(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new R(r)),++e.dynamics):++o;return a!==o&&(s.push(new A(i.slice(a,o))),++e.statics),s}}function B(t){return t._}function O(t,e){const s=t.H,i=e.H;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class P{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const L=o("IAttributePattern"),j=o("IAttributeParser",t=>t.singleton(N));class N{constructor(){this.U={},this.L={},this.q=!1,this.G=[],this.J=(0,i.hd)(I),this.c=(0,i.hd)(i.p7)}registerPattern(t,e){if(this.q)throw v(88);const s=this.L;for(const{pattern:i}of t){if(null!=s[i])throw v(89,i);s[i]={patternType:e}}this.G.push(...t)}K(){this.J.add(this.G);const t=this.c;for(const[,e]of Object.entries(this.L))e.pattern=t.get(e.patternType)}parse(t,e){this.q||(this.K(),this.q=!0);let s=this.U[t];null==s&&(s=this.U[t]=this.J.interpret(t));const i=s.pattern;return null==i?new P(t,e,t,null,null):this.L[i].pattern[i](t,e,s.parts)}}const D=a({name:(0,i.r$)("attribute-pattern"),create:(t,e)=>({register(s){s.get(j).registerPattern(t,e),l(L,e).register(s)}})});class F{"PART.PART"(t,e,s){return new P(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new P(t,e,`${s[0]}.${s[1]}`,s[2])}}b=Symbol.metadata,F[b]={[i.Ri]:D.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],F)};class V{ref(t,e,s){return new P(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new P(t,e,i,"ref")}}w=Symbol.metadata,V[w]={[i.Ri]:D.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],V)};class q{"PART.trigger:PART"(t,e,s){return new P(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new P(t,e,s[0],"capture",s)}}y=Symbol.metadata,q[y]={[i.Ri]:D.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],q)};class K{":PART"(t,e,s){return new P(t,e,s[0],"bind")}}$=Symbol.metadata,K[$]={[i.Ri]:D.create([{pattern:":PART",symbols:":"}],K)};class _{"@PART"(t,e,s){return new P(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new P(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}k=Symbol.metadata,_[k]={[i.Ri]:D.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],_)};const W=n.O.get;n.O.has;const H=n.O.define,z="rg",U=a({hydrateElement:"ra",hydrateAttribute:"rb",hydrateTemplateController:"rc",hydrateLetElement:"rd",setProperty:"re",interpolation:"rf",propertyBinding:z,letBinding:"ri",refBinding:"rj",iteratorBinding:"rk",multiAttr:"rl",textBinding:"ha",listenerBinding:"hb",attributeBinding:"hc",stylePropertyBinding:"hd",setAttribute:"he",setClassAttribute:"hf",setStyleAttribute:"hg",spreadTransferedBinding:"hs",spreadElementProp:"hp",spreadValueBinding:"svb"}),G=o("Instruction");class Q{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class Y{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=z}}class J{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class X{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Z{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class tt{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class et{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class st{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class it{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class nt{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class rt{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class ot{constructor(t){this.from=t,this.type="ha"}}class at{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class ht{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class lt{constructor(t){this.value=t,this.type="hf"}}class ct{constructor(t){this.value=t,this.type="hg"}}class ut{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class dt{constructor(){this.type="hs"}}class ft{constructor(t){this.instruction=t,this.type="hp"}}class pt{constructor(t,e){this.target=t,this.from=e,this.type="svb"}}class gt{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return(0,i.Kg)(t)?(s=t,n={name:s}):(s=t.name,n=t),new gt(e,(0,i.c4)(wt(e,"name"),s),(0,i.TR)(wt(e,"aliases"),n.aliases,e.aliases),bt(s))}register(t,e){const s=this.Type,i="string"==typeof e?bt(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:l(s,s),h(s,i),...n.map(t=>h(s,bt(t))))}}const mt="binding-command",vt=(0,i.r$)(mt),bt=t=>`${vt}:${t}`,wt=(t,e)=>W(i.Zs.annotation.keyFor(e),t),yt=(()=>{const t="__au_static_resource__",e=(e,s,i)=>{let n=W(t,e);return null==n&&e.$au?.type===s&&(n=i(e.$au,e),H(n,e,t)),n};return a({name:vt,keyFrom:bt,define(t,e){const s=gt.create(t,e),n=s.Type;return H(s,n,vt,i.n_),n},getAnnotation:wt,find(t,s){const i=t.find(mt,s);return null==i?null:W(vt,i)??e(i,mt,gt.create)??null},get:(t,e)=>t.get((0,i.Zc)(bt(e)))})})();class $t{get ignoreAttr(){return!1}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return r=""===r?(0,i.xQ)(n):r,n=null==t.bindable?s.map(t.node,n)??(0,i.xQ)(n):t.bindable.name,new Y(e.parse(r,d),n,1)}}$t.$au={type:mt,name:"one-time"};class kt{get ignoreAttr(){return!1}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return r=""===r?(0,i.xQ)(n):r,n=null==t.bindable?s.map(t.node,n)??(0,i.xQ)(n):t.bindable.name,new Y(e.parse(r,d),n,2)}}kt.$au={type:mt,name:"to-view"};class Ct{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return o=""===o?(0,i.xQ)(r):o,r=null==t.bindable?s.map(t.node,r)??(0,i.xQ)(r):t.bindable.name,new Y(e.parse(o,d),r,4)}}Ct.$au={type:mt,name:"from-view"};class Tt{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return o=""===o?(0,i.xQ)(r):o,r=null==t.bindable?s.map(t.node,r)??(0,i.xQ)(r):t.bindable.name,new Y(e.parse(o,d),r,6)}}Tt.$au={type:mt,name:"two-way"};class xt{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr,r=t.bindable;let o,a,h=n.rawValue,l=n.target;return h=""===h?(0,i.xQ)(l):h,null==r?(a=s.isTwoWay(t.node,l)?6:2,l=s.map(t.node,l)??(0,i.xQ)(l)):(o=t.def.defaultBindingMode??0,a=0===r.mode||null==r.mode?null==o||0===o?2:o:r.mode,l=r.name),new Y(e.parse(h,d),l,(0,i.Kg)(a)?p[a]??0:a)}}xt.$au={type:mt,name:"bind"};class At{constructor(){this.X=(0,i.hd)(j)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?(0,i.xQ)(t.attr.target):t.bindable.name,n=e.parse(t.attr.rawValue,"IsIterator");let r=i.tR;if(n.semiIdx>-1){const e=t.attr.rawValue.slice(n.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),n=this.X.parse(t,i);r=[new tt(i,n.target,n.command)]}}return new J(n,s,r)}}At.$au={type:mt,name:"for"};class Rt{get ignoreAttr(){return!0}build(t,e){return new at(e.parse(t.attr.rawValue,u),t.attr.target,!1,t.attr.parts?.[2]??null)}}Rt.$au={type:mt,name:"trigger"};class Mt{get ignoreAttr(){return!0}build(t,e){return new at(e.parse(t.attr.rawValue,u),t.attr.target,!0,t.attr.parts?.[2]??null)}}Mt.$au={type:mt,name:"capture"};class St{get ignoreAttr(){return!0}build(t,e){const s=t.attr,n=s.target;let r=s.rawValue;return r=""===r?(0,i.xQ)(n):r,new ut(n,e.parse(r,d),n)}}St.$au={type:mt,name:"attr"};class It{get ignoreAttr(){return!0}build(t,e){return new ut("style",e.parse(t.attr.rawValue,d),t.attr.target)}}It.$au={type:mt,name:"style"};class Et{get ignoreAttr(){return!0}build(t,e){let s=t.attr.target;if(s.includes(",")){const t=s.split(",").filter(t=>t.length>0);if(0===t.length)throw v(723);s=t.join(" ")}return new ut("class",e.parse(t.attr.rawValue,d),s)}}Et.$au={type:mt,name:"class"};class Bt{get ignoreAttr(){return!0}build(t,e){return new X(e.parse(t.attr.rawValue,d),t.attr.target)}}Bt.$au={type:mt,name:"ref"};class Ot{get ignoreAttr(){return!1}build(t){return new pt(t.attr.target,t.attr.rawValue)}}Ot.$au={type:mt,name:"spread"},"function"==typeof SuppressedError&&SuppressedError;const Pt=o("ITemplateElementFactory",t=>t.singleton(jt)),Lt={};class jt{constructor(){this.p=(0,i.hd)(i.r_),this.Y=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if((0,i.Kg)(t)){let e=Lt[t];if(void 0===e){const s=this.Y;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.Y=this.t(),e=s),Lt[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const Nt="au-start",Dt="au-end",Ft=(t,e,s)=>t.insertBefore(e,s),Vt=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},qt=(t,e)=>t.content.appendChild(e),Kt=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},_t=t=>1===t.nodeType,Wt=t=>3===t.nodeType,Ht="au-slot",zt="default",Ut=(Gt=0,()=>"anonymous-"+ ++Gt);var Gt;class Qt{constructor(){this.debug=!1,this.resolveResources=!0}compile(t,e){if(null==t.template||!1===t.needsCompile)return t;const s=new Xt(t,e,null,null,void 0),n=(0,i.Kg)(t.template)||!t.enhance?s.Z.createTemplate(t.template):t.template,r=n.nodeName===Yt&&null!=n.content,o=r?n.content:n,a=ue.findAll(e),h=a.length;let l=0;if(h>0)for(;h>l;)a[l].compiling?.(n),++l;if(n.hasAttribute(he))throw v(701,t);return this.tt(o,s),this.et(o,s),{...t,name:t.name||Ut(),dependencies:(t.dependencies??i.tR).concat(s.deps??i.tR),instructions:s.rows,surrogates:r?this.nt(n,s):i.tR,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(t,e,s,n,r){const o=new Xt(t,s,null,null,void 0),a=[],h=r??o.it(n.nodeName.toLowerCase()),l=null!==h,u=o.ep,d=e.length;let f,p,g,m,b,w,y,$,k,C,T=0,x=null,A=null;for(;d>T;++T)if(f=e[T],k=f.target,C=f.rawValue,"...$attrs"!==k)if(A=o.rt(f),null!==A&&A.ignoreAttr)se.node=n,se.attr=f,se.bindable=null,se.def=null,a.push(A.build(se,o.ep,o.m));else if(l&&(m=o.st(h),b=m.attrs[k],void 0!==b))null==A?(y=u.parse(C,c),a.push(new ft(null==y?new Z(C,b.name):new Q(y,b.name)))):(se.node=n,se.attr=f,se.bindable=b,se.def=h,a.push(new ft(A.build(se,o.ep,o.m))));else if(x=o.lt(k),null===x)if(null==A)if(y=u.parse(C,c),null!=y)a.push(new Q(y,o.m.map(n,k)??(0,i.xQ)(k)));else switch(k){case"class":a.push(new lt(C));break;case"style":a.push(new ct(C));break;default:a.push(new ht(C,k))}else se.node=n,se.attr=f,se.bindable=null,se.def=null,a.push(A.build(se,o.ep,o.m));else{if(x.isTemplateController)throw v(9998,k);m=o.st(x),$=!1===x.noMultiBindings&&null===A&&Zt(C),$?g=this.ot(n,C,x,o):(w=m.primary,null===A?(y=u.parse(C,c),g=[null===y?new Z(C,w.name):new Q(y,w.name)]):(se.node=n,se.attr=f,se.bindable=w,se.def=x,g=[A.build(se,o.ep,o.m)])),(p??=[]).push(new st(this.resolveResources?x:x.name,null!=x.aliases&&x.aliases.includes(k)?k:void 0,g))}else a.push(new dt);return te(),null!=p?p.concat(a):a}nt(t,e){const s=[],n=t.attributes,r=e.ep;let o,a,h,l,u,d,f,p,g,m,b,w,y=n.length,$=0,k=null,C=null;for(;y>$;++$){if(o=n[$],a=o.name,h=o.value,l=e.X.parse(a,h),b=l.target,w=l.rawValue,ie[b])throw v(702,a);if(C=e.rt(l),null!==C&&C.ignoreAttr)se.node=t,se.attr=l,se.bindable=null,se.def=null,s.push(C.build(se,e.ep,e.m));else if(k=e.lt(b),null===k)if(null===C)if(g=r.parse(w,c),null!=g)t.removeAttribute(a),--$,--y,s.push(new Q(g,e.m.map(t,b)??(0,i.xQ)(b)));else switch(a){case"class":s.push(new lt(w));break;case"style":s.push(new ct(w));break;default:s.push(new ht(w,a))}else se.node=t,se.attr=l,se.bindable=null,se.def=null,s.push(C.build(se,e.ep,e.m));else{if(k.isTemplateController)throw v(703,b);f=e.st(k),m=!1===k.noMultiBindings&&null===C&&Zt(w),m?d=this.ot(t,w,k,e):(p=f.primary,null===C?(g=r.parse(w,c),d=null===g?""===w?[]:[new Z(w,p.name)]:[new Q(g,p.name)]):(se.node=t,se.attr=l,se.bindable=p,se.def=k,d=[C.build(se,e.ep,e.m)])),t.removeAttribute(a),--$,--y,(u??=[]).push(new st(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(b)?b:void 0,d))}}return te(),null!=u?u.concat(s):s}et(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.ut(t,e):this.ct(t,e);case 3:return this.ht(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.et(s,e);break}}return t.nextSibling}ut(t,e){const s=t.attributes,n=s.length,o=[],a=e.ep;let h,l,u,f,p,g,m,b,w=!1,y=0;for(;n>y;++y)if(h=s[y],u=h.name,f=h.value,"to-binding-context"!==u)if(l=e.X.parse(u,f),g=l.target,m=l.rawValue,p=e.rt(l),null===p)b=a.parse(m,c),o.push(new rt(null===b?new r.fU(m):b,(0,i.xQ)(g)));else{if("bind"!==l.command)throw v(704,l);o.push(new rt(a.parse(m,d),(0,i.xQ)(g)))}else w=!0;return e.rows.push([new nt(o,w)]),this.dt(t,e).nextSibling}ct(t,e){const s=t.nextSibling,n=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),r=e.it(n),o=null!==r,a=o&&null!=r.shadowOptions,h=r?.capture,l=null!=h&&"boolean"!=typeof h,u=h?[]:i.tR,d=e.ep,p=this.debug?i.lQ:()=>{t.removeAttribute(b),--D,--N};let g,m,b,w,y,$,k,C,T,x,A,R,M,S,I,E,B,O,P,L,j=t.attributes,N=j.length,D=0,F=null,V=!1,q=null,K=!0,_=!1,W=!1,H=!1,z=0;if("slot"===n){if(null==e.root.def.shadowOptions)throw v(717,e.root.def.name);e.root.hasSlot=!0}for(o&&(P={},K=r.processContent?.call(r.Type,t,e.p,P),j=t.attributes,N=j.length);N>D;++D){switch(m=j[D],b=m.name,w=m.value,b){case"as-element":case"containerless":p(),_=_||"containerless"===b;continue}if(y=e.X.parse(b,w),q=e.rt(y),B=y.target,O=y.rawValue,h&&(!l||l&&h(B))){if(null!=q&&q.ignoreAttr){p(),u.push(y);continue}if(W=B!==Ht&&"slot"!==B&&(-1===(z=B.indexOf("..."))||0===z&&"...$attrs"===B),W&&(I=e.st(r),null==I.attrs[B]&&!e.lt(B)?.isTemplateController)){p(),u.push(y);continue}}if("...$attrs"!==B)if(q?.ignoreAttr)se.node=t,se.attr=y,se.bindable=null,se.def=null,($??=[]).push(q.build(se,e.ep,e.m)),p();else{if(0===B.indexOf("...")){if(o&&"$element"!==(B=B.slice(3))){(k??=[]).push(new pt("$bindables","$bindables"===B?O:B)),p();continue}throw v(720,B)}if(o){if(I=e.st(r),C=I.attrs[B],void 0!==C){null===q?(M=d.parse(O,c),(k??=[]).push(null==M?new Z(O,C.name):new Q(M,C.name))):(se.node=t,se.attr=y,se.bindable=C,se.def=r,(k??=[]).push(q.build(se,e.ep,e.m))),p();continue}if("$bindables"===B){null!=q&&(se.node=t,se.attr=y,se.bindable=null,se.def=r,(k??=[]).push(q.build(se,e.ep,e.m))),p();continue}}if("$bindables"===B)throw v(721,t.nodeName,B,O);F=e.lt(B),null===F?null!==q?(se.node=t,se.attr=y,se.bindable=null,se.def=null,($??=[]).push(q.build(se,e.ep,e.m)),p()):(M=d.parse(O,c),null!=M&&(p(),($??=[]).push(new Q(M,e.m.map(t,B)??(0,i.xQ)(B))))):(I=e.st(F),V=!1===F.noMultiBindings&&null===q&&Zt(O),V?x=this.ot(t,O,F,e):(E=I.primary,null===q?(M=d.parse(O,c),x=null===M?""===O?[]:[new Z(O,E.name)]:[new Q(M,E.name)]):(se.node=t,se.attr=y,se.bindable=E,se.def=F,x=[q.build(se,e.ep,e.m)])),p(),F.isTemplateController?(A??=[]).push(new it(ee,this.resolveResources?F:F.name,void 0,x)):(T??=[]).push(new st(this.resolveResources?F:F.name,null!=F.aliases&&F.aliases.includes(B)?B:void 0,x)))}else($??=[]).push(new dt),p()}if(te(),this.ft(t,$)&&null!=$&&$.length>1&&this.gt(t,$),o&&(S=new et(this.resolveResources?r:r.name,k??i.tR,null,_,u,P)),null==$&&null==S&&null==T||(g=i.tR.concat(S??i.tR,T??i.tR,$??i.tR),H=!0),null!=A){let s;N=A.length-1,D=N,R=A[D],Jt(t)?(s=e.t(),Kt(s,[e.wt(),e.bt(Nt),e.bt(Dt)])):(this.At(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),qt(s,t)));const i=s,h=e.yt(null==g?[]:[g]);let l,c,u,d,p,m,b,w,y=!1,$=0,k=0,C=t.firstChild,T=!1;if(!1!==K)for(;null!==C;){if(c=_t(C)?C.getAttribute(Ht):null,y=null!==c||o&&!a,l=C.nextSibling,y){if(!o)throw v(706,c,n);C.removeAttribute?.(Ht),T=Wt(C)&&""===C.textContent.trim(),T||((d??={})[c||zt]??=[]).push(C),t.removeChild(C)}C=l}if(null!=d){for(c in u={},d){for(s=e.t(),p=d[c],$=0,k=p.length;k>$;++$)m=p[$],"TEMPLATE"===m.nodeName?m.attributes.length>0?qt(s,m):qt(s,m.content):qt(s,m);w=e.yt(),this.et(s.content,w),u[c]={name:Ut(),type:f,template:s,instructions:w.rows,needsCompile:!1}}S.projections=u}if(H&&(o&&(_||r.containerless)?this.At(t,e):this.dt(t,e)),L=!o||!r.containerless&&!_&&!1!==K,L)if(t.nodeName===Yt)this.et(t.content,h);else for(C=t.firstChild;null!==C;)C=this.et(C,h);for(R.def={name:Ut(),type:f,template:i,instructions:h.rows,needsCompile:!1};D-- >0;)R=A[D],s=e.t(),b=e.wt(),Kt(s,[b,e.bt(Nt),e.bt(Dt)]),R.def={name:Ut(),type:f,template:s,needsCompile:!1,instructions:[[A[D+1]]]};e.rows.push([R])}else{null!=g&&e.rows.push(g);let s,i,h,l,c,u,d,p=t.firstChild,m=!1,b=null,w=!1,y=0,$=0;if(!1!==K)for(;null!==p;){if(i=_t(p)?p.getAttribute(Ht):null,m=null!==i||o&&!a,s=p.nextSibling,m){if(!o)throw v(706,i,n);p.removeAttribute?.(Ht),w=Wt(p)&&""===p.textContent.trim(),w||((h??={})[i||zt]??=[]).push(p),t.removeChild(p)}p=s}if(null!=h){for(i in b={},h){for(u=e.t(),l=h[i],y=0,$=l.length;$>y;++y)c=l[y],c.nodeName===Yt?c.attributes.length>0?qt(u,c):qt(u,c.content):qt(u,c);d=e.yt(),this.et(u.content,d),b[i]={name:Ut(),type:f,template:u,instructions:d.rows,needsCompile:!1}}S.projections=b}if(H&&(o&&(_||r.containerless)?this.At(t,e):this.dt(t,e)),L=!o||!r.containerless&&!_&&!1!==K,L&&t.childNodes.length>0)for(p=t.firstChild;null!==p;)p=this.et(p,e)}return s}ht(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,c),n=t.nextSibling;let r,o,a,h,l;if(null!==i){for(({parts:r,expressions:o}=i),(l=r[0])&&Ft(s,e.It(l),t),a=0,h=o.length;h>a;++a)Vt(s,t,[e.wt(),e.It(" ")]),(l=r[a+1])&&Ft(s,e.It(l),t),e.rows.push([new ot(o[a])]);s.removeChild(t)}return n}ot(t,e,s,i){const n=i.st(s),r=e.length,o=[];let a,h,l,u,d,f,p=0,g=0;for(let m=0;m<r;++m)if(g=e.charCodeAt(m),92===g)++m;else if(58===g){for(a=e.slice(p,m);e.charCodeAt(++m)<=32;);for(p=m;m<r;++m)if(g=e.charCodeAt(m),92===g)++m;else if(59===g){h=e.slice(p,m);break}if(void 0===h&&(h=e.slice(p)),u=i.X.parse(a,h),d=i.rt(u),f=n.attrs[u.target],null==f)throw v(707,u.target,s.name);for(null===d?(l=i.ep.parse(h,c),o.push(null===l?new Z(h,f.name):new Q(l,f.name))):(se.node=t,se.attr=u,se.bindable=f,se.def=s,o.push(d.build(se,i.ep,i.m)));m<r&&e.charCodeAt(++m)<=32;);p=m,a=void 0,h=void 0}return te(),o}tt(t,e){const s=e.root.def.name,n=t,r=(0,i.$r)(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===n.childElementCount)throw v(708,s);const a=new Set,h=[];for(const t of r){if(t.parentNode!==n)throw v(709,s);const e=le(s,t,a),r=t.content,o=(0,i.$r)(r.querySelectorAll("bindable")),l=new Set,c=new Set,u=o.reduce((t,s)=>{if(s.parentNode!==r)throw v(710,e);const n=s.getAttribute("name");if(null===n)throw v(711,s,e);const o=s.getAttribute("attribute");if(null!==o&&c.has(o)||l.has(n))throw v(712,l,o);null!==o&&c.add(o),l.add(n);const a=(0,i.$r)(s.attributes).filter(t=>!ae.includes(t.name));return a.length,s.remove(),t[n]={name:n,attribute:o??void 0,mode:s.getAttribute("mode")??"default"},t},{});class d{}d.$au={type:f,name:e,template:t,bindables:u},Reflect.defineProperty(d,"name",{value:(0,i.fL)(e)}),h.push(d),n.removeChild(t)}const l=(e.root.def.dependencies??[]).concat(null==e.root.def.Type?i.tR:[e.root.def.Type]);for(const t of h)t.dependencies=l.concat(h.filter(e=>e!==t)),e.St(t)}ft(t,e){const s=t.nodeName;return"INPUT"===s&&1===ne[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some(t=>t.type===z&&"multiple"===t.to))}gt(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}dt(t,e){return Ft(t.parentNode,e.bt("au*"),t),t}At(t,e){if(Jt(t))return t;const s=t.parentNode,i=e.wt();return Vt(s,t,[i,e.bt(Nt),e.bt(Dt)]),s.removeChild(t),i}}Qt.register=(0,i.E8)(g);const Yt="TEMPLATE",Jt=t=>"au*"===t.nodeValue;class Xt{constructor(t,e,s,n,o){this.hasSlot=!1,this.deps=null;const a=null!==s;if(this.c=e,this.root=null===n?this:n,this.def=t,this.parent=s,this.Bt=a?s.Bt:e.get(re),this.Pt=a?s.Pt:e.get(oe),this.Z=a?s.Z:e.get(Pt),this.X=a?s.X:e.get(j),this.ep=a?s.ep:e.get(r.JW),this.m=a?s.m:e.get(m),this.Ct=a?s.Ct:e.get(i.gF),"number"!=typeof(this.p=a?s.p:e.get(i.r_)).document?.nodeType)throw v(722);this.localEls=a?s.localEls:new Set,this.rows=o??[]}St(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),this}It(t){return this.p.document.createTextNode(t)}bt(t){return this.p.document.createComment(t)}wt(){return this.bt("au*")}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}it(t){return this.Bt.el(this.c,t)}lt(t){return this.Bt.attr(this.c,t)}st(t){return this.Bt.bindables(t)}yt(t){return new Xt(this.def,this.c,this,this.root,t)}rt(t){const e=t.command;return null===e?null:this.Pt.get(this.c,e)}}const Zt=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},te=()=>{se.node=se.attr=se.bindable=se.def=null},ee={name:"unnamed",type:f},se={node:null,attr:null,bindable:null,def:null},ie={id:!0,name:!0,"au-slot":!0,"as-element":!0},ne={checkbox:1,radio:1},re=o("IResourceResolver"),oe=o("IBindingCommandResolver",t=>t.singleton(class{constructor(){this.U=new WeakMap}get(t,e){let s=this.U.get(t);return s||this.U.set(t,s={}),e in s?s[e]:s[e]=yt.get(t,e)}})),ae=a(["name","attribute","mode"]),he="as-custom-element",le=(t,e,s)=>{const i=e.getAttribute(he);if(null===i||""===i)throw v(715,t);if(s.has(i))throw v(716,i,t);return s.add(i),e.removeAttribute(he),i},ce=o("ITemplateCompilerHooks"),ue=a({name:(0,i.r$)("compiler-hooks"),define:t=>({register(e){l(ce,t).register(e)}}),findAll:t=>t.get((0,i.ff)(ce))})},913:(t,e,s)=>{s.d(e,{JZ:()=>At,tD:()=>gt});var i=s(38),n=s(339),r=s(141),o=s(66),a=s(997);const h=i.DI.createInterface("IValidationExpressionHydrator"),l=o.O.get,c=o.O.define,u=o.O.delete,{annotation:d}=i.Zs,f=d.keyFor,p=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),g=Symbol.for("au:validation:explicit-message-key"),m=i.DI.createInterface("IValidationMessageProvider"),v=Object.freeze({aliasKey:f("validation-rule-alias-message"),define(t,e,s){this.setDefaultMessage(t,e,s)},setDefaultMessage(t,{aliases:e},s){const n=s?l(this.aliasKey,t):void 0;if(void 0!==n){const t={...Object.fromEntries(n.map(({name:t,defaultMessage:e})=>[t,e])),...Object.fromEntries(e.map(({name:t,defaultMessage:e})=>[t,e]))};e=(0,i.$r)(Object.entries(t)).map(([t,e])=>({name:t,defaultMessage:e}))}c(e,t,this.aliasKey)},getDefaultMessages(t){const e=l(this.aliasKey,t);return null!=e||t instanceof Function?e:l(this.aliasKey,t.constructor)}});class b{get messageKey(){return this.t}set messageKey(t){this.t=t}constructor(t=void 0){this.tag=void 0,this.t=t}canExecute(t){return!0}execute(t,e){throw p(99,"execute")}accept(t){throw p(99,"accept")}}b.$TYPE="";class w extends b{constructor(){super("required")}execute(t){return null!=t&&!("string"==typeof t&&!/\S/.test(t))}accept(t){return t.visitRequiredRule(this)}}w.$TYPE="RequiredRule";class y extends b{constructor(t,e="matches"){super(e),this.pattern=t}execute(t){return null==t||0===t.length||this.pattern.test(t)}accept(t){return t.visitRegexRule(this)}}y.$TYPE="RegexRule";class $ extends b{constructor(t,e){super(e?"maxLength":"minLength"),this.length=t,this.isMax=e}execute(t){return null==t||0===t.length||(this.isMax?t.length<=this.length:t.length>=this.length)}accept(t){return t.visitLengthRule(this)}}$.$TYPE="LengthRule";class k extends b{constructor(t,e){super(e?"maxItems":"minItems"),this.count=t,this.isMax=e}execute(t){return null==t||(this.isMax?t.length<=this.count:t.length>=this.count)}accept(t){return t.visitSizeRule(this)}}k.$TYPE="SizeRule";class C extends b{constructor(t,{min:e,max:s}){super(void 0!==e&&void 0!==s?t?"range":"between":void 0!==e?"min":"max"),this.isInclusive=t,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.min=e??this.min,this.max=s??this.max}execute(t,e){return null==t||(this.isInclusive?t>=this.min&&t<=this.max:t>this.min&&t<this.max)}accept(t){return t.visitRangeRule(this)}}C.$TYPE="RangeRule";class T extends b{constructor(t){super("equals"),this.expectedValue=t}execute(t){return null==t||""===t||t===this.expectedValue}accept(t){return t.visitEqualsRule(this)}}T.$TYPE="EqualsRule";class x extends b{get messageKey(){return this.i??this.t??void 0}set messageKey(t){this.i=t}constructor(t,e,s){super(void 0),this.validState=t,this.stateFunction=e,this.messages=s,this.i=null;const i=[];for(const[t,e]of Object.entries(s))i.push({name:t,defaultMessage:e});v.setDefaultMessage(this,{aliases:i},!1)}execute(t,e){return(0,i.ui)(this.stateFunction(t,e),t=>(this.t=t,t===this.validState))}accept(t){}}x.$TYPE="StateRule",v.define(T,{aliases:[{name:"equals",defaultMessage:"${$displayName} must be ${$rule.expectedValue}."}]},!1),v.define(C,{aliases:[{name:"min",defaultMessage:"${$displayName} must be at least ${$rule.min}."},{name:"max",defaultMessage:"${$displayName} must be at most ${$rule.max}."},{name:"range",defaultMessage:"${$displayName} must be between or equal to ${$rule.min} and ${$rule.max}."},{name:"between",defaultMessage:"${$displayName} must be between but not equal to ${$rule.min} and ${$rule.max}."}]},!1),v.define(k,{aliases:[{name:"minItems",defaultMessage:"${$displayName} must contain at least ${$rule.count} item${$rule.count === 1 ? '' : 's'}."},{name:"maxItems",defaultMessage:"${$displayName} cannot contain more than ${$rule.count} item${$rule.count === 1 ? '' : 's'}."}]},!1),v.define($,{aliases:[{name:"minLength",defaultMessage:"${$displayName} must be at least ${$rule.length} character${$rule.length === 1 ? '' : 's'}."},{name:"maxLength",defaultMessage:"${$displayName} cannot be longer than ${$rule.length} character${$rule.length === 1 ? '' : 's'}."}]},!1),v.define(y,{aliases:[{name:"matches",defaultMessage:"${$displayName} is not correctly formatted."},{name:"email",defaultMessage:"${$displayName} is not a valid email."}]},!1),v.define(w,{aliases:[{name:"required",defaultMessage:"${$displayName} is required."}]},!1),v.define(b,{aliases:[{name:void 0,defaultMessage:"${$displayName} is invalid."}]},!1);const A=i.DI.createInterface("ICustomMessages");class R{constructor(t,e=void 0,s=void 0){this.expression=t,this.name=e,this.displayName=s}accept(t){return t.visitRuleProperty(this)}}R.$TYPE="RuleProperty";const M=Object.freeze({allRulesAnnotations:f("validation-rules-annotations"),name:"validation-rules",defaultRuleSetName:"__default",set(t,e,s){const i=`${M.name}:${s??M.defaultRuleSetName}`;c(e,t,f(i));const n=l(this.allRulesAnnotations,t);void 0===n?c([i],t,this.allRulesAnnotations):n.push(i)},get(t,e){const s=f(M.name,e??M.defaultRuleSetName);return l(s,t)??l(s,t.constructor)},unset(t,e){const s=l(this.allRulesAnnotations,t);if(Array.isArray(s))for(const i of s.slice(0))if(i.startsWith(M.name)&&(void 0===e||i.endsWith(e))){u(f(i),t);const e=s.indexOf(i);e>-1&&s.splice(e,1)}},isValidationRulesSet(t){const e=l(this.allRulesAnnotations,t);return void 0!==e&&e.some(t=>t.startsWith(M.name))}});class S{constructor(t,e,s,i,n,r){this.messageProvider=t,this.$displayName=e,this.$propertyName=s,this.$value=i,this.$rule=n,this.$object=r}$getDisplayName(t,e){return this.messageProvider.getDisplayName(t,e)}}class I{constructor(t,e,s,i,n=[[]]){this.validationRules=e,this.messageProvider=s,this.property=i,this.$rules=n,this.l=t}accept(t){return t.visitPropertyRule(this)}addRule(t){return this.getLeafRules().push(this.latestRule=t),this}getLeafRules(){const t=this.$rules.length-1;return this.$rules[t]}async validate(t,e,s){void 0===s&&(s=r.HG.create({[L]:t}));const i=this.property.expression;let n;n=void 0===i?t:(0,r.qM)(i,s,this,null);let o=!0;const a=async s=>{const i=async e=>{let s=e.execute(n,t);s instanceof Promise&&(s=await s),o=o&&s;const{displayName:i,name:a}=this.property;let h;if(!s){const s=r.HG.create(new S(this.messageProvider,this.messageProvider.getDisplayName(a,i),a,n,e,t));h=(0,r.qM)(this.messageProvider.getMessage(e),s,this,null)}return new N(s,h,a,t,e,this)},a=[];for(const n of s)!n.canExecute(t)||void 0!==e&&n.tag!==e||a.push(i(n));return Promise.all(a)};return this.$rules.reduce(async(t,e)=>t.then(async t=>o?(async(t,e)=>{const s=await a(e);return t.push(...s),t})(t,e):Promise.resolve(t)),Promise.resolve([]))}then(){return this.$rules.push([]),this}withMessageKey(t){return this.assertLatestRule(this.latestRule),this.latestRule.messageKey=t,this}withMessage(t){const e=this.latestRule;return this.assertLatestRule(e),this.messageProvider.setMessage(e,t,g),this}when(t){return this.assertLatestRule(this.latestRule),this.latestRule.canExecute=t,this}tag(t){return this.assertLatestRule(this.latestRule),this.latestRule.tag=t,this}assertLatestRule(t){if(void 0===t)throw p(4101)}displayName(t){return this.property.displayName=t,this}satisfiesState(t,e,s){return this.addRule(new x(t,e,s))}satisfies(t){const e=new class extends b{constructor(){super(...arguments),this.execute=t}};return this.addRule(e)}satisfiesRule(t){return this.addRule(t)}required(){return this.addRule(new w)}matches(t){return this.addRule(new y(t))}email(){return this.addRule(new y(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"email"))}minLength(t){return this.addRule(new $(t,!1))}maxLength(t){return this.addRule(new $(t,!0))}minItems(t){return this.addRule(new k(t,!1))}maxItems(t){return this.addRule(new k(t,!0))}min(t){return this.addRule(new C(!0,{min:t}))}max(t){return this.addRule(new C(!0,{max:t}))}range(t,e){return this.addRule(new C(!0,{min:t,max:e}))}between(t,e){return this.addRule(new C(!1,{min:t,max:e}))}equals(t){return this.addRule(new T(t))}ensure(t){return this.latestRule=void 0,this.validationRules.ensure(t)}ensureObject(){return this.latestRule=void 0,this.validationRules.ensureObject()}get rules(){return this.validationRules.rules}on(t,e){return this.validationRules.on(t,e)}}I.$TYPE="PropertyRule",(0,r.jC)(I);const E=i.DI.createInterface("IValidationRules");class B{constructor(){this.rules=[],this.targets=new Set,this.locator=(0,i.hd)(i.Nt),this.parser=(0,i.hd)(n.JW),this.messageProvider=(0,i.hd)(m),this.deserializer=(0,i.hd)(h)}ensure(t){const[e,s]=j(t,this.parser);let i=this.rules.find(t=>t.property.name==e);return void 0===i&&(i=new I(this.locator,this,this.messageProvider,new R(s,e)),this.rules.push(i)),i}ensureObject(){const t=new I(this.locator,this,this.messageProvider,new R);return this.rules.push(t),t}on(t,e){const s=M.get(t,e);return Object.is(s,this.rules)||(this.rules=s??[],M.set(t,this.rules,e),this.targets.add(t)),this}off(t,e){const s=void 0!==t?[t]:Array.from(this.targets);for(const t of s)M.unset(t,e),M.isValidationRulesSet(t)||this.targets.delete(t)}applyModelBasedRules(t,e){const s=new Set;for(const i of e){const e=i.tag,n=this.deserializer.hydrateRuleset(i.ruleset,this);M.set(t,n,e),s.add(e)}}}const O=/^(?:function)?\s*\(?[$_\w\d]+\)?\s*(?:=>)?\s*\{(?:\s*["']{1}use strict["']{1};)?(?:[$_\s\w\d\/\*.['"\]+;\(\)]+)?\s*return\s+[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)\s*;?\s*\}$/,P=/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)$/,L="$root";function j(t,e){switch(typeof t){case"string":break;case"function":{const e=t.toString(),s=P.exec(e)??O.exec(e);if(null===s)throw p(4102,e);t=s[1].substring(1);break}default:throw p(4102,t)}return[t,e.parse(`${L}.${t}`,"IsProperty")]}class N{constructor(t,e,s,i,n,r,o=!1){this.valid=t,this.message=e,this.propertyName=s,this.object=i,this.rule=n,this.propertyRule=r,this.isManual=o,this.id=N.nextId++}toString(){return this.valid?"Valid.":this.message}}N.nextId=0;const D=new Set(["displayName","propertyName","value","object","config","getDisplayName"]);class F{constructor(t=(0,i.hd)(i.gF),e=(0,i.hd)(A)){this.registeredMessages=new WeakMap,this.parser=(0,i.hd)(n.JW),this.logger=t.scopeTo(F.name);for(const{rule:t,aliases:s}of e)v.setDefaultMessage(t,{aliases:s},!0)}getMessage(t){const e=t.messageKey,s=this.registeredMessages.get(t);if(null!=s){const t=s.get(g)??s.get(e);if(void 0!==t)return t}const i=v.getDefaultMessages(t);let n;return n=1===i.length&&void 0===e?i[0].defaultMessage:i.find(t=>t.name===e)?.defaultMessage,n||(n=v.getDefaultMessages(b)[0].defaultMessage),this.setMessage(t,n)}setMessage(t,e,s){const i=this.parseMessage(e),n=this.registeredMessages;let r=n.get(t);return void 0===r&&n.set(t,r=new Map),r.set(s??t.messageKey,i),i}parseMessage(t){const e=this.parser.parse(t,"Interpolation");if("Interpolation"===e?.$kind){for(const s of e.expressions){const e=s.name;if(D.has(e)&&this.logger.warn(`Did you mean to use "$${e}" instead of "${e}" in this validation message template: "${t}"?`),"AccessThis"===s.$kind||s.ancestor>0)throw new Error("$parent is not permitted in validation message expressions.")}return e}return new n.fU(t)}getDisplayName(t,e){if(null!=e)return e instanceof Function?e():e;if(void 0===t)return;const s=t.toString().split(/(?=[A-Z])/).join(" ");return s.charAt(0).toUpperCase()+s.slice(1)}}var V,q;n.qd,(q=V||(V={})).BindingBehaviorExpression="BindingBehaviorExpression",q.ValueConverterExpression="ValueConverterExpression",q.AssignExpression="AssignExpression",q.ConditionalExpression="ConditionalExpression",q.AccessThisExpression="AccessThisExpression",q.AccessBoundaryExpression="AccessBoundaryExpression",q.AccessScopeExpression="AccessScopeExpression",q.AccessMemberExpression="AccessMemberExpression",q.AccessKeyedExpression="AccessKeyedExpression",q.CallScopeExpression="CallScopeExpression",q.CallMemberExpression="CallMemberExpression",q.CallFunctionExpression="CallFunctionExpression",q.BinaryExpression="BinaryExpression",q.UnaryExpression="UnaryExpression",q.PrimitiveLiteralExpression="PrimitiveLiteralExpression",q.ArrayLiteralExpression="ArrayLiteralExpression",q.ObjectLiteralExpression="ObjectLiteralExpression",q.TemplateExpression="TemplateExpression",q.TaggedTemplateExpression="TaggedTemplateExpression",q.ArrayBindingPattern="ArrayBindingPattern",q.ObjectBindingPattern="ObjectBindingPattern",q.BindingIdentifier="BindingIdentifier",q.ForOfStatement="ForOfStatement",q.Interpolation="Interpolation",q.DestructuringAssignment="DestructuringAssignment",q.DestructuringSingleAssignment="DestructuringSingleAssignment",q.DestructuringRestAssignment="DestructuringRestAssignment",q.ArrowFunction="ArrowFunction",q.Custom="Custom";class K{static deserialize(t){const e=new K,s=JSON.parse(t);return e.hydrate(s)}hydrate(t){switch(t.$TYPE){case V.AccessMemberExpression:{const e=t;return new n.rc(this.hydrate(e.object),e.name)}case V.AccessKeyedExpression:{const e=t;return new n.H9(this.hydrate(e.object),this.hydrate(e.key))}case V.AccessThisExpression:{const e=t;return new n.L3(e.ancestor)}case V.AccessBoundaryExpression:return new n.v2;case V.AccessScopeExpression:{const e=t;return new n.DC(e.name,e.ancestor)}case V.ArrayLiteralExpression:{const e=t;return new n.$o(this.hydrate(e.elements))}case V.ObjectLiteralExpression:{const e=t;return new n.f8(this.hydrate(e.keys),this.hydrate(e.values))}case V.PrimitiveLiteralExpression:{const e=t;return new n.fU(this.hydrate(e.value))}case V.CallFunctionExpression:{const e=t;return new n.bK(this.hydrate(e.func),this.hydrate(e.args))}case V.CallMemberExpression:{const e=t;return new n.pc(this.hydrate(e.object),e.name,this.hydrate(e.args))}case V.CallScopeExpression:{const e=t;return new n.lq(e.name,this.hydrate(e.args),e.ancestor)}case V.TemplateExpression:{const e=t;return new n.do(this.hydrate(e.cooked),this.hydrate(e.expressions))}case V.TaggedTemplateExpression:{const e=t;return new n.HL(this.hydrate(e.cooked),this.hydrate(e.raw),this.hydrate(e.func),this.hydrate(e.expressions))}case V.UnaryExpression:{const e=t;return new n.Y_(e.operation,this.hydrate(e.expression))}case V.BinaryExpression:{const e=t;return new n.sm(e.operation,this.hydrate(e.left),this.hydrate(e.right))}case V.ConditionalExpression:{const e=t;return new n.TZ(this.hydrate(e.condition),this.hydrate(e.yes),this.hydrate(e.no))}case V.AssignExpression:{const e=t;return new n.iZ(this.hydrate(e.target),this.hydrate(e.value))}case V.ValueConverterExpression:{const e=t;return new n.Oe(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case V.BindingBehaviorExpression:{const e=t;return new n.yV(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case V.ArrayBindingPattern:{const e=t;return new n.xB(this.hydrate(e.elements))}case V.ObjectBindingPattern:{const e=t;return new n.jc(this.hydrate(e.keys),this.hydrate(e.values))}case V.BindingIdentifier:{const e=t;return new n.N6(e.name)}case V.ForOfStatement:{const e=t;return new n.WH(this.hydrate(e.declaration),this.hydrate(e.iterable),this.hydrate(e.semiIdx))}case V.Interpolation:{const e=t;return new n.lc(this.hydrate(e.cooked),this.hydrate(e.expressions))}case V.DestructuringAssignment:return new n.xN(this.hydrate(t.$kind),this.hydrate(t.list),this.hydrate(t.source),this.hydrate(t.initializer));case V.DestructuringSingleAssignment:return new n.lJ(this.hydrate(t.target),this.hydrate(t.source),this.hydrate(t.initializer));case V.DestructuringRestAssignment:return new n.PR(this.hydrate(t.target),this.hydrate(t.indexOrProperties));case V.ArrowFunction:return new n.ko(this.hydrate(t.parameters),this.hydrate(t.body),this.hydrate(t.rest));default:if(Array.isArray(t))return"object"==typeof t[0]?this.deserializeExpressions(t):t.map(_);if("object"!=typeof t)return _(t);throw p(4100,t)}}deserializeExpressions(t){const e=[];for(const s of t)e.push(this.hydrate(s));return e}}function _(t){if("string"==typeof t){if("null"===t)return null;if("undefined"===t)return;return t.substring(1,t.length-1)}return t}class W{static register(t){this.container=t}static deserialize(t,e){const s=this.container.get(m),i=this.container.get(n.JW),r=new W(this.container,s,i),o=JSON.parse(t);return r.hydrate(o,e)}constructor(t=(0,i.hd)(i.Nt),e=(0,i.hd)(m),s=(0,i.hd)(n.JW)){this.locator=t,this.messageProvider=e,this.parser=s,this.astDeserializer=new K}hydrate(t,e){switch(t.$TYPE){case w.$TYPE:{const e=t,s=new w;return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case y.$TYPE:{const e=t,s=e.pattern,i=this.astDeserializer,n=new y(new RegExp(i.hydrate(s.source),s.flags),e.messageKey);return n.tag=i.hydrate(e.tag),n}case $.$TYPE:{const e=t,s=new $(e.length,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case k.$TYPE:{const e=t,s=new k(e.count,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case C.$TYPE:{const e=t,s=new C(e.isInclusive,{min:e.min??Number.NEGATIVE_INFINITY,max:e.max??Number.POSITIVE_INFINITY});return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case T.$TYPE:{const e=t,s=this.astDeserializer,i=new T("object"!=typeof e.expectedValue?s.hydrate(e.expectedValue):e.expectedValue);return i.messageKey=e.messageKey,i.tag=s.hydrate(e.tag),i}case R.$TYPE:{const e=t,s=this.astDeserializer;let i=e.name;i="undefined"===i?void 0:s.hydrate(i);let n=e.expression;null!=n?n=s.hydrate(n):void 0!==i?[,n]=j(i,this.parser):n=void 0;let r=e.displayName;return r="undefined"===r?void 0:s.hydrate(r),new R(n,i,r)}case I.$TYPE:{const s=t;return new I(this.locator,e,this.messageProvider,this.hydrate(s.property,e),s.$rules.map(t=>t.map(t=>this.hydrate(t,e))))}}}hydrateRuleset(t,e){if(!Array.isArray(t))throw p(4104);return t.map(t=>this.hydrate(t,e))}}class H{constructor(){this.astDeserializer=new K,this.l=(0,i.hd)(i.Nt),this.messageProvider=(0,i.hd)(m),this.parser=(0,i.hd)(n.JW)}hydrate(t,e){throw p(99,"hydrate")}hydrateRuleset(t,e){const s=[],i=(t,n=[])=>{for(const[r,o]of t)if(this.isModelPropertyRule(o)){const t=o.rules.map(t=>Object.entries(t).map(([t,e])=>this.hydrateRule(t,e))),i=n.join("."),a=this.hydrateRuleProperty({name:""!==i?`${i}.${r}`:r,displayName:o.displayName});s.push(new I(this.l,e,this.messageProvider,a,t))}else i(Object.entries(o),[...n,r])};return i(Object.entries(t)),s}hydrateRule(t,e){switch(t){case"required":return this.hydrateRequiredRule(e);case"regex":return this.hydrateRegexRule(e);case"maxLength":return this.hydrateLengthRule({...e,isMax:!0});case"minLength":return this.hydrateLengthRule({...e,isMax:!1});case"maxItems":return this.hydrateSizeRule({...e,isMax:!0});case"minItems":return this.hydrateSizeRule({...e,isMax:!1});case"range":return this.hydrateRangeRule({...e,isInclusive:!0});case"between":return this.hydrateRangeRule({...e,isInclusive:!1});case"equals":return this.hydrateEqualsRule(e);default:throw p(4105,t)}}setCommonRuleProperties(t,e){const s=t.messageKey;null!=s&&(e.messageKey=s),e.tag=t.tag;const i=t.when;if(i)if("string"==typeof i){const t=this.parser.parse(i,"None");e.canExecute=e=>(0,r.qM)(t,r.HG.create({$object:e}),this,null)}else"function"==typeof i&&(e.canExecute=i)}isModelPropertyRule(t){return"object"==typeof t&&"rules"in t}hydrateRequiredRule(t){const e=new w;return this.setCommonRuleProperties(t,e),e}hydrateRegexRule(t){const e=t.pattern,s=new y(new RegExp(e.source,e.flags),t.messageKey);return s.tag=t.tag,s}hydrateLengthRule(t){const e=new $(t.length,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateSizeRule(t){const e=new k(t.count,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateRangeRule(t){const e=new C(t.isInclusive,{min:t.min,max:t.max});return this.setCommonRuleProperties(t,e),e}hydrateEqualsRule(t){const e=new T(t.expectedValue);return this.setCommonRuleProperties(t,e),e}hydrateRuleProperty(t){const e=t.name;if(!e||"string"!=typeof e)throw p(4106,typeof e);const[s,i]=j(e,this.parser);return new R(i,s,t.displayName)}}(0,a.T0)(H);class z{constructor(t=void 0,e=void 0,s=void 0,i=void 0,n=void 0){this.object=t,this.propertyName=e,this.rules=s,this.objectTag=i,this.propertyTag=n}}const U=i.DI.createInterface("IValidator");class G{async validate(t){const e=t.object;let s=t.propertyName;const i=t.propertyTag,n=t.rules??M.get(e,t.objectTag)??[],o=r.HG.create({[L]:e});if(void 0!==s){let t=n.find(t=>t.property.name===s);return null==t&&"string"==typeof s&&s.startsWith("[")&&s.endsWith("]")&&(s=s.replaceAll("][",".").slice(1,-1),t=n.find(t=>t.property.name===s)),await(t?.validate(e,i,o))??[]}return(await Promise.all(n.map(async t=>t.validate(e,i,o)))).flat()}}function Q(){return{ValidatorType:G,MessageProviderType:F,CustomMessages:[],HydratorType:H}}function Y(t){return{optionsProvider:t,register(e){const s=Q();return t(s),e.register(i.cH.instance(A,s.CustomMessages),i.cH.singleton(U,s.ValidatorType),i.cH.singleton(m,s.MessageProviderType),i.cH.singleton(h,s.HydratorType),i.cH.transient(E,B),W),e},customize:e=>Y(e??t)}}const J=Y(i.lQ);var X=s(721);function Z(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=s.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[f])("accessor"===h?{get:u.get,set:u.set}:u[l],p);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function tt(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}"function"==typeof SuppressedError&&SuppressedError;const et=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class st{constructor(t,e,s){this.valid=t,this.results=e,this.instruction=s}}class it{constructor(t,e){this.result=t,this.targets=e}}class nt{constructor(t,e,s){this.kind=t,this.addedResults=e,this.removedResults=s}}class rt{constructor(t,e,s,i,n=void 0){this.sourceObserver=t,this.target=e,this.scope=s,this.rules=i,this.propertyInfo=n}}class ot{constructor(t,e){this.object=t,this.propertyName=e}}function at(t,e){let s=e.propertyInfo;if(void 0!==s)return s;const i=e.scope;let n,o=t.ast.expression,a=!0,h="";for(;void 0!==o&&"AccessScope"!==o?.$kind;){let s;switch(o.$kind){case"BindingBehavior":case"ValueConverter":o=o.expression;continue;case"AccessMember":s=o.name;break;case"AccessKeyed":{const n=o.key;a&&(a="PrimitiveLiteral"===n.$kind),s=`[${(0,r.qM)(n,i,t,e.sourceObserver).toString()}]`;break}default:throw et(4205,o.constructor.name)}const n=h.startsWith("[")?"":".";h=0===h.length?s:`${s}${n}${h}`,o=o.object}if(void 0===o)throw et(4206,t.ast.expression);return 0===h.length?(h=o.name,n=i.bindingContext):n=(0,r.qM)(o,i,t,e.sourceObserver),null!=n?(s=new ot(n,h),a&&(e.propertyInfo=s),s):void 0}const ht=i.DI.createInterface("IValidationController");class lt{constructor(){this.bindings=new Map,this.subscribers=new Set,this.results=[],this.validating=!1,this.elements=new WeakMap,this.objects=new Map,this.validator=(0,i.hd)(U),this.parser=(0,i.hd)(n.JW),this.platform=(0,i.hd)(a.r_),this.locator=(0,i.hd)(i.Nt)}addObject(t,e){this.objects.set(t,e)}removeObject(t){this.objects.delete(t),this.processResultDelta("reset",this.results.filter(e=>e.object===t),[])}addError(t,e,s){let i;void 0!==s&&([i]=j(s,this.parser));const n=new N(!1,t,i,e,void 0,void 0,!0);return this.processResultDelta("validate",[],[n]),n}removeError(t){this.results.includes(t)&&this.processResultDelta("reset",[t],[])}addSubscriber(t){this.subscribers.add(t)}removeSubscriber(t){this.subscribers.delete(t)}registerBinding(t,e){this.bindings.set(t,e)}unregisterBinding(t){this.resetBinding(t),this.bindings.delete(t)}async validate(t){const{object:e,objectTag:s}=t??{};let i;i=void 0!==e?[new z(e,t?.propertyName,t?.rules??this.objects.get(e),s,t?.propertyTag)]:[...Array.from(this.objects.entries()).map(([t,e])=>new z(t,void 0,e,s)),...Array.from(this.bindings.entries()).reduce((e,[i,n])=>{if(!i.isBound)return e;const r=at(i,n);return void 0===r||this.objects.has(r.object)||e.push(new z(r.object,r.propertyName,n.rules,s,t?.propertyTag)),e},[])],this.validating=!0;const n=(0,r.jd)(async()=>{try{const e=await Promise.all(i.map(async t=>this.validator.validate(t))),s=e.reduce((t,e)=>(t.push(...e),t),[]),n=this.getInstructionPredicate(t),r=this.results.filter(n);return this.processResultDelta("validate",r,s),new st(void 0===s.find(t=>!t.valid),s,t)}finally{this.validating=!1}});return n.result}reset(t){const e=this.getInstructionPredicate(t),s=this.results.filter(e);this.processResultDelta("reset",s,[])}async validateBinding(t){if(!t.isBound)return;const e=this.bindings.get(t);if(void 0===e)return;const s=at(t,e),i=e.rules;if(void 0===s)return;const{object:n,propertyName:r}=s;await this.validate(new z(n,r,i))}resetBinding(t){const e=this.bindings.get(t);if(void 0===e)return;const s=at(t,e);if(void 0===s)return;e.propertyInfo=void 0;const{object:i,propertyName:n}=s;this.reset(new z(i,n))}async revalidateErrors(){const t=this.results.reduce((t,{isManual:e,object:s,propertyRule:i,rule:n,valid:r})=>{if(!r&&!e&&void 0!==i&&void 0!==s&&void 0!==n){let e=t.get(s);void 0===e&&t.set(s,e=new Map);let r=e.get(i);void 0===r&&e.set(i,r=[]),r.push(n)}return t},new Map),e=[];for(const[s,i]of t)e.push(this.validate(new z(s,void 0,Array.from(i).map(([{validationRules:t,messageProvider:e,property:s},i])=>new I(this.locator,t,e,s,[i])))));await Promise.all(e)}getInstructionPredicate(t){if(void 0===t)return()=>!0;const e=t.propertyName,s=t.rules;return i=>!i.isManual&&i.object===t.object&&(void 0===e||i.propertyName===e)&&(void 0===s||s.includes(i.propertyRule)||s.some(t=>void 0===i.propertyRule||t.$rules.flat().every(t=>i.propertyRule.$rules.flat().includes(t))))}getAssociatedElements({object:t,propertyName:e}){const s=[];for(const[i,n]of this.bindings.entries()){const r=at(i,n);void 0!==r&&r.object===t&&r.propertyName===e&&s.push(n.target)}return s}processResultDelta(t,e,s){const i=new nt(t,[],[]);s=s.slice(0);const n=this.elements;for(const t of e){const e=n.get(t);n.delete(t),i.removedResults.push(new it(t,e));const r=s.findIndex(e=>e.rule===t.rule&&e.object===t.object&&e.propertyName===t.propertyName);if(-1===r)this.results.splice(this.results.indexOf(t),1);else{const e=s.splice(r,1)[0],o=this.getAssociatedElements(e);n.set(e,o),i.addedResults.push(new it(e,o)),this.results.splice(this.results.indexOf(t),1,e)}}for(const t of s){const e=this.getAssociatedElements(t);i.addedResults.push(new it(t,e)),n.set(t,e),this.results.push(t)}for(const t of this.subscribers)t.handleValidationEvent(i)}}class ct{constructor(){this.Type=void 0}registerTransformer(t){return!1}construct(t,e){return t.invoke(lt,e)}}function ut(t,e){switch(2&t.compareDocumentPosition(e)){case 0:return 0;case 2:return 1;default:return-1}}const dt={name:"validation-container",shadowOptions:{mode:"open"},hasSlots:!0};let ft=(()=>{var t;let e,s,n=[],r=[],o=[],h=[];return t=class{constructor(){this.controller=tt(this,n,void 0),this.errors=(tt(this,r),tt(this,o,[])),this.host=(tt(this,h),(0,i.hd)(a.w3)),this.scopedController=(0,i.hd)((0,i.lq)(ht))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errors.findIndex(t=>t.result===e);-1!==t&&this.errors.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errors.push(new it(e,t))}this.errors.sort((t,e)=>t.targets[0]===e.targets[0]?0:ut(t.targets[0],e.targets[0]))}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}},(()=>{const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[a._t],s=[a._t],Z(null,null,e,{kind:"field",name:"controller",static:!1,private:!1,access:{has:t=>"controller"in t,get:t=>t.controller,set:(t,e)=>{t.controller=e}},metadata:i},n,r),Z(null,null,s,{kind:"field",name:"errors",static:!1,private:!1,access:{has:t=>"errors"in t,get:t=>t.errors,set:(t,e)=>{t.errors=e}},metadata:i},o,h),i&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})})(),t})();class pt{constructor(){this.errors=[],this.errorsInternal=[],this.host=(0,i.hd)(a.w3),this.scopedController=(0,i.hd)((0,i.lq)(ht))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errorsInternal.findIndex(t=>t.result===e);-1!==t&&this.errorsInternal.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errorsInternal.push(new it(e,t))}this.errorsInternal.sort((t,e)=>t.targets[0]===e.targets[0]?0:ut(t.targets[0],e.targets[0])),this.errors=this.errorsInternal}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}}var gt,mt;a.I6.define({name:"validation-errors",bindables:{controller:{},errors:{primary:!0,mode:X.Zm.twoWay}}},pt),(mt=gt||(gt={})).manual="manual",mt.blur="blur",mt.focusout="focusout",mt.change="change",mt.changeOrBlur="changeOrBlur",mt.changeOrFocusout="changeOrFocusout";const vt=i.DI.createInterface("IDefaultTrigger"),bt=new WeakMap,wt=new WeakMap;class yt{constructor(){this.p=(0,i.hd)(a.r_),this.oL=(0,i.hd)(r.WM)}bind(t,e){if(!(e instanceof a.Nw))throw et(4200);let s=bt.get(e);null==s&&bt.set(e,s=new $t(this.p,this.oL,e.get(vt),e,e.get(i.p7)));let n=wt.get(e);null==n&&wt.set(e,n=new kt(s,e,e.get(a.dU))),s.start(t),e.useTargetSubscriber(n)}unbind(t,e){bt.get(e)?.stop()}}a.aI.define("validate",yt);class $t{constructor(t,e,s,i,n){this.isChangeTrigger=!1,this.isDirty=!1,this.validatedOnce=!1,this.triggerEvent=null,this.t=!1,this.propertyBinding=i,this.target=i.target,this.defaultTrigger=s,this.p=t,this.oL=e,this.l=n,this.i=new Tt("handleSourceChange",this,e,n),this.h=new Tt("handleTriggerChange",this,e,n),this.u=new Tt("handleControllerChange",this,e,n),this.V=new Tt("handleRulesChange",this,e,n),n.has(ht,!0)&&(this.scopedController=n.get(ht))}C(){this.isDirty=!0;const t=this.triggerEvent;this.isChangeTrigger&&(null===t||null!==t&&this.validatedOnce)&&this.validateBinding()}handleEvent(t){(!this.isChangeTrigger||this.isChangeTrigger&&this.isDirty)&&this.validateBinding()}start(t){this.scope=t,this.target=this.B();const e=this._();this.R(e)||null==this.bindingInfo||(this.controller?.registerBinding(this.propertyBinding,this.bindingInfo),this.controller?.addSubscriber(this))}stop(){this.t=!1,this.scope=void 0;const t=this.triggerEvent;null!==t&&this.target?.removeEventListener(t,this),this.controller?.resetBinding(this.propertyBinding),this.controller?.unregisterBinding(this.propertyBinding),this.controller?.removeSubscriber(this)}handleTriggerChange(t,e){this.R(new Ct(void 0,this.T(t),void 0))}handleControllerChange(t,e){this.R(new Ct(this.I(t),void 0,void 0))}handleRulesChange(t,e){this.R(new Ct(void 0,void 0,this.P(t)))}handleSourceChange(t,e){this.source!==t&&(this.source=t,this.bindingInfo.propertyInfo=void 0)}handleValidationEvent(t){if(this.validatedOnce||!this.isChangeTrigger)return;if(null===this.triggerEvent)return;const e=this.bindingInfo.propertyInfo?.propertyName;void 0!==e&&(this.validatedOnce=void 0!==t.addedResults.find(t=>t.result.propertyName===e))}_(){const t=this.scope;let e,s,i,n=this.propertyBinding.ast;for(;"validate"!==n.name&&void 0!==n;)n=n.expression;const o=n.args;for(let n=0,a=o.length;n<a;n++){const a=o[n];switch(n){case 0:s=this.T((0,r.qM)(a,t,this,this.h));break;case 1:i=this.I((0,r.qM)(a,t,this,this.u));break;case 2:e=this.P((0,r.qM)(a,t,this,this.V));break;default:throw et(4201,n+1,(0,r.qM)(a,t,this,null))}}return new Ct(this.I(i),this.T(s),e)}validateBinding(){this.t||(this.t=!0,(0,r.jd)(()=>(this.t=!1,this.controller.validateBinding(this.propertyBinding))))}R(t){const e=t.trigger??this.trigger,s=t.controller??this.controller,i=t.rules;if(this.trigger!==e){let t=this.triggerEvent;null!==t&&this.target.removeEventListener(t,this),this.validatedOnce=!1,this.isDirty=!1,this.trigger=e,this.isChangeTrigger=e===gt.change||e===gt.changeOrBlur||e===gt.changeOrFocusout,t=this.triggerEvent=this.A(this.trigger),null!==t&&this.target.addEventListener(t,this)}return(this.controller!==s||void 0!==i)&&(this.controller?.removeSubscriber(this),this.controller?.unregisterBinding(this.propertyBinding),this.controller=s,s.registerBinding(this.propertyBinding,this.M(i)),s.addSubscriber(this),!0)}T(t){if(null==t)t=this.defaultTrigger;else if(!Object.values(gt).includes(t))throw et(4202,t);return t}I(t){if(null==t)t=this.scopedController;else if(!(t instanceof lt))throw et(4203,t);return t}P(t){if(Array.isArray(t)&&t.every(t=>t instanceof I))return t}B(){const t=this.propertyBinding.target;if(t instanceof this.p.Node)return t;{const e=t?.$controller;if(void 0===e)throw et(4204);return e.host}}A(t){let e=null;switch(t){case gt.blur:case gt.changeOrBlur:e="blur";break;case gt.focusout:case gt.changeOrFocusout:e="focusout"}return e}M(t){return this.bindingInfo=new rt(this.i,this.target,this.scope,t)}}(0,r.xM)($t,null),(0,r.jC)($t);class kt extends a.pm{constructor(t,e,s){super(e,s),this.vs=t}handleChange(t,e){super.handleChange(t,e),this.vs.C()}}class Ct{constructor(t,e,s){this.controller=t,this.trigger=e,this.rules=s}}class Tt{constructor(t,e,s,i){this.key=t,this.binding=e,this.oL=s,this.l=i}handleChange(t,e){this.binding[this.key](t,e)}}function xt(t){return{optionsProvider:t,register(e){const s={...Q(),ValidationControllerFactoryType:ct,DefaultTrigger:gt.focusout,UseSubscriberCustomAttribute:!0,SubscriberCustomElementTemplate:"\n<slot></slot>\n<slot name='secondary'>\n  <span repeat.for=\"error of errors\">\n    ${error.result.message}\n  </span>\n</slot>\n"};t(s),e.registerFactory(ht,new s.ValidationControllerFactoryType),e.register(J.customize(t=>{for(const e of Object.keys(t))e in s&&(t[e]=s[e])}),i.cH.instance(vt,s.DefaultTrigger),yt),s.UseSubscriberCustomAttribute&&e.register(pt);const n=s.SubscriberCustomElementTemplate;return n&&e.register(a.K9.define({...dt,template:n},ft)),e},customize:e=>xt(e??t)}}(0,r.xM)(Tt,null),(0,r.jC)(Tt);const At=xt(i.lQ)},964:(t,e,s)=>{s.d(e,{OD:()=>l,Pq:()=>c});const i="pending",n="running",r="completed",o="canceled",a=new Map,h=t=>()=>{throw C(`AUR1005:${t}`)};class l{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??h(s)}),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??h("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new c(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=a.get(t);return void 0===s&&a.set(t,s=new l(t,e)),s}static set(t,e){a.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class c{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(y)&&this.h.every(y)&&this.u.every(y)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.M=0,this.P=0,this.U=()=>{this.R||(this.R=!0,this.M=this.q(),this.$request())},this.q=t.performanceNow,this.I=new p(t.console)}flush(t=this.q()){if(this.R=!1,this.P=t,void 0===this.$){let e,s;if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));for(;this.i.length>0;)if((s=this.i.shift()).run(),s.status===n){if(!0===s.suspend)return this.$=s,void this.U();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));if((this.i.length>0||this.u.length>0||this.t>0)&&this.U(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.U()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=w()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,suspend:r}={...g,...e};if(i){if(s>0)throw $();if(n)throw k()}0===this.i.length&&this.U();const o=this.q(),a=new f(this.I,this,o,o+s,i,n,r,t);return i?this.i[this.i.length]=a:0===s?this.h[this.h.length]=a:this.u[this.u.length]=a,a}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw C(`Task #${t.id} could not be found`);this.u.splice(e,1)}}_(t){t.reset(this.q()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}C(t){if(!0===t.suspend){if(this.$!==t)throw C(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class u extends Error{constructor(t){super("Task was canceled."),this.task=t}}let d=0;class f{get result(){const t=this.N;if(void 0===t)switch(this.j){case i:{const t=this.N=w();return this.F=t.resolve,this.O=t.reject,t}case n:throw C("Trying to await task from within task will cause a deadlock.");case r:return this.N=Promise.resolve();case o:return this.N=Promise.reject(new u(this))}return t}get status(){return this.j}constructor(t,e,s,n,r,o,a,h){this.taskQueue=e,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=h,this.id=++d,this.F=void 0,this.O=void 0,this.N=void 0,this.j=i,this.I=t}run(t=this.taskQueue.platform.performanceNow()){if(this.j!==i)throw C(`Cannot run task in ${this.j} state`);const{persistent:e,taskQueue:s,callback:a,F:h,O:l,createdTime:c}=this;let u;this.j=n;try{u=a(t-c),u instanceof Promise?u.then(t=>{this.persistent?s._(this):(this.j=e?o:r,this.dispose()),s.C(this),void 0!==h&&h(t)}).catch(t=>{if(this.persistent||this.dispose(),s.C(this),void 0===l)throw t;l(t)}):(this.persistent?s._(this):(this.j=e?o:r,this.dispose()),void 0!==h&&h(u))}catch(t){if(this.persistent||this.dispose(),void 0===l)throw t;l(t)}}cancel(){if(this.j===i){const t=this.taskQueue,e=this.O;return t.remove(this),t.isEmpty&&t.cancel(),this.j=o,this.dispose(),void 0!==e&&e(new u(this)),!0}return!(this.j!==n||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.j=i,this.F=void 0,this.O=void 0,this.N=void 0}dispose(){this.callback=void 0,this.F=void 0,this.O=void 0,this.N=void 0}}class p{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof c){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.persistent,h=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${a} status=${e.j} suspend=${h}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const g={delay:0,preempt:!1,persistent:!1,suspend:!1};let m,v;const b=(t,e)=>{m=t,v=e},w=()=>{const t=new Promise(b);return t.resolve=m,t.reject=v,t},y=t=>t.persistent,$=()=>C("AUR1006"),k=()=>C("AUR1007"),C=t=>new Error(t)},997:(t,e,s)=>{s.d(e,{I6:()=>Pt,K9:()=>Di,KI:()=>Ki,Nw:()=>re,T0:()=>Gt,_t:()=>q,aI:()=>it,dU:()=>Qt,pm:()=>zt,r_:()=>$t,w3:()=>Tt,yr:()=>$r});var i=s(38),n=s(721),r=s(66),o=s(141),a=s(57),h=s(339);"function"==typeof SuppressedError&&SuppressedError;const{default:l,oneTime:c,toView:u,fromView:d,twoWay:f}=n.Zm,p=r.O.get,g=r.O.has,m=r.O.define,{annotation:v}=i.Zs,b=v.keyFor,w=Object,y=String,$=w.prototype,k=$.hasOwnProperty,C=w.freeze,T=w.assign,x=w.getOwnPropertyNames,A=w.keys,R=(0,i.BL)(),M=(t,e,s)=>{if(!0===R[e])return!0;if(!(0,i.Kg)(e))return!1;const n=e.slice(0,5);return R[e]="aria-"===n||"data-"===n||s.isStandardSvgAttribute(t,e)},S=t=>{throw t},I=Reflect.defineProperty,E=(t,e,s)=>(I(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),B=(t,e,s)=>t.addSignalListener(e,s),O=(t,e,s)=>t.removeSignalListener(e,s),P="IsProperty",L="pending",j="running",N=o.EG.Observer,D=o.EG.Node,F=o.EG.Layout,V=(t,...e)=>{const s=y(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(y)}`)};function q(t,e){let s;function n(t,e){let n;switch(e.kind){case"getter":case"field":{const t=e.name;if("string"!=typeof t)throw V(227);n=t;break}case"class":if(null==s)throw V(228);if("string"==typeof s)n=s;else{const t=s.name;if(!t)throw V(229);if("string"!=typeof t)throw V(227);n=t}}const r=null==s||"string"==typeof s?{name:n}:s;(e.metadata[K]??=(0,i.BL)())[n]=W.create(n,r)}return arguments.length>1?(s={},void n(0,e)):(0,i.Kg)(t)?(s=t,n):(s=void 0===t?{}:t,n)}const K=b("bindables"),_=C({name:K,keyFrom:t=>`${K}:${t}`,from(...t){const e={},s=Array.isArray;function n(t,s){e[t]=s instanceof W?s:W.create(t,!0===s?{}:s)}return t.forEach(function(t){s(t)?t.forEach(t=>(0,i.Kg)(t)?function(t){e[t]=W.create(t)}(t):n(t.name,t)):t instanceof W?e[t.name]=t:void 0!==t&&A(t).forEach(e=>n(e,t[e]))}),e},getAll(t){const e=[],s=(0,i.eA)(t);let n,r=s.length;for(;--r>=0;){n=s[r];const t=p(K,n);null!=t&&e.push(...Object.values(t))}return e},i(t,e){let s=p(K,e);null==s&&m(s=(0,i.BL)(),e,K),s[t.name]=t}});class W{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){const s=e.mode??u;return new W(e.attribute??(0,i.kW)(t),e.callback??`${t}Changed`,(0,i.Kg)(s)?n.Zm[s]??l:s,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return i.lQ;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):H.for(e)??i.lQ;break}}return s===i.lQ?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const H={key:b("coercer"),define(t,e){m(t[e].bind(t),t,H.key)},for:t=>p(H.key,t)},z=i.DI.createInterface,U=i.cH.singleton,G=i.cH.aliasTo,Q=i.cH.instance;i.cH.callback,i.cH.transient;const Y=(t,e,s)=>t.registerResolver(e,s),J=(t,e,s,i="__au_static_resource__")=>{let n=p(i,t);return null==n&&t.$au?.type===e&&(n=s(t.$au,t),m(n,t,i)),n};class X{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return(0,i.Kg)(t)?(s=t,n={name:s}):(s=t.name,n=t),new X(e,(0,i.c4)(et(e,"name"),s),(0,i.TR)(et(e,"aliases"),n.aliases,e.aliases),it.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?st(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:U(s,s),G(s,i),...n.map(t=>G(s,st(t))))}}const Z="binding-behavior",tt=(0,i.r$)(Z),et=(t,e)=>p(b(e),t),st=t=>`${tt}:${t}`,it=C({name:tt,keyFrom:st,isType:t=>(0,i.Tn)(t)&&(g(tt,t)||t.$au?.type===Z),define(t,e){const s=X.create(t,e),n=s.Type;return m(s,n,tt,i.n_),n},getDefinition(t){const e=p(tt,t)??J(t,Z,X.create);if(void 0===e)throw V(151,t);return e},find(t,e){const s=t.find(Z,e);return null==s?null:p(tt,s)??J(s,Z,X.create)??null},get:(t,e)=>t.get((0,i.Zc)(st(e)))}),nt=new Map,rt=t=>({type:Z,name:t});class ot{bind(t,e){nt.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=nt.get(e),nt.delete(e)}}class at extends ot{get mode(){return c}}at.$au=rt("oneTime");class ht extends ot{get mode(){return u}}ht.$au=rt("toView");class lt extends ot{get mode(){return d}}lt.$au=rt("fromView");class ct extends ot{get mode(){return f}}ct.$au=rt("twoWay");const ut=new WeakMap;class dt{constructor(){this.p=(0,i.hd)(i.r_)}bind(t,e,s,n){const r={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:(0,i.Kg)(n)?[n]:n??i.tR},o=e.limit?.(r);null==o||ut.set(e,o)}unbind(t,e){ut.get(e)?.dispose(),ut.delete(e)}}dt.$au={type:Z,name:"debounce"};const ft=z("ISignaler",t=>t.singleton(pt));class pt{constructor(){this.signals=(0,i.BL)()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class gt{constructor(){this.h=new Map,this.u=(0,i.hd)(ft)}bind(t,e,...s){if(!("handleChange"in e))throw V(817);if(0===s.length)throw V(818);let i;for(i of(this.h.set(e,s),s))B(this.u,i,e)}unbind(t,e){const s=this.h.get(e);let i;for(i of(this.h.delete(e),s))O(this.u,i,e)}}gt.$au={type:Z,name:"signal"};const mt=new WeakMap;class vt{constructor(){({performanceNow:this.C,taskQueue:this.B}=(0,i.hd)(i.r_))}bind(t,e,s,n){const r={type:"throttle",delay:s??200,now:this.C,queue:this.B,signals:(0,i.Kg)(n)?[n]:n??i.tR},o=e.limit?.(r);null==o||mt.set(e,o)}unbind(t,e){mt.get(e)?.dispose(),mt.delete(e)}}vt.$au={type:Z,name:"throttle"};const bt=z("IAppTask");class wt{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(Q(bt,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function yt(t){return function(e,s){return(0,i.Tn)(s)?new wt(t,e,s):new wt(t,null,e)}}C({creating:yt("creating"),hydrating:yt("hydrating"),hydrated:yt("hydrated"),activating:yt("activating"),activated:yt("activated"),deactivating:yt("deactivating"),deactivated:yt("deactivated")});const $t=i.r_;class kt{}const Ct=(()=>{const t=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(e,s){return t.get(e)?.[s]??null}set(s,i,n){const r=t.get(s)??(t.set(s,new kt),t.get(s));if(i in r)throw new Error(`Node already associated with a controller, remove the ref "${i}" first before associating with another controller`);return e||(s.$au??=r),r[i]=n}}})(),Tt=z("INode"),xt=(()=>{const t=new WeakMap;return C({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??i.tR})})();class At{get type(){return"custom-attribute"}constructor(t,e,s,i,n,r,o,a,h,l,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=l,this.containerStrategy=c}static create(t,e){let s,r;(0,i.Kg)(t)?(s=t,r={name:s}):(s=t.name,r=t);const o=(0,i.c4)(It(e,"defaultBindingMode"),r.defaultBindingMode,e.defaultBindingMode,u);for(const t of Object.values(_.from(r.bindables)))_.i(t,e);return new At(e,(0,i.c4)(It(e,"name"),s),(0,i.TR)(It(e,"aliases"),r.aliases,e.aliases),St(s),(0,i.Kg)(o)?n.Zm[o]??l:o,(0,i.c4)(It(e,"isTemplateController"),r.isTemplateController,e.isTemplateController,!1),_.from(..._.getAll(e),It(e,"bindables"),e.bindables,r.bindables),(0,i.c4)(It(e,"noMultiBindings"),r.noMultiBindings,e.noMultiBindings,!1),(0,i.TR)(xt.getDefinitions(e),e.watches),(0,i.TR)(It(e,"dependencies"),r.dependencies,e.dependencies),(0,i.c4)(It(e,"containerStrategy"),r.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,n="string"==typeof e?St(e):this.key,r=this.aliases;t.has(n,!1)?At.warnDuplicate&&t.get(i.gF).warn(V(154,this.name)):t.register(t.has(s,!1)?null:U(s,s),G(s,n),...r.map(t=>G(s,St(t))))}toString(){return`au:ca:${this.name}`}}At.warnDuplicate=!0;const Rt="custom-attribute",Mt=(0,i.r$)(Rt),St=t=>`${Mt}:${t}`,It=(t,e)=>p(b(e),t),Et=(t,e)=>Ct.get(t,St(e))??void 0,Bt=(t,e)=>{const s=At.create(t,e),n=s.Type;return m(s,n,Mt,i.n_),n},Ot=t=>{const e=p(Mt,t)??J(t,Rt,At.create);if(void 0===e)throw V(759,t);return e},Pt=C({name:Mt,keyFrom:St,isType:t=>(0,i.Tn)(t)&&(g(Mt,t)||t.$au?.type===Rt),for:Et,closest:(t,e)=>{let s="",n="";if((0,i.Kg)(e))s=St(e),n=e;else{const t=Ot(e);s=t.key,n=t.name}let r=t;for(;null!==r;){const t=Ct.get(r,s);if(t?.is(n))return t;r=vi(r)}return null},define:Bt,getDefinition:Ot,annotate(t,e,s){m(s,t,b(e))},getAnnotation:It,find(t,e){const s=t.find(Rt,e);return null===s?null:p(Mt,s)??J(s,Rt,At.create)??null}}),Lt=z("ILifecycleHooks");class jt{constructor(t,e){this.definition=t,this.instance=e}}class Nt{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==$;){for(const t of x(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Nt(e,s)}}const Dt=(()=>{const t=new WeakMap,e=new WeakMap;return C({define(t,s){const i=Nt.create(t,s),n=i.Type;return e.set(n,i),{register(t){U(Lt,n).register(t)}}},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Ft);const n=s.root,r=n===s?s.getAll(Lt):s.has(Lt,!1)?n.getAll(Lt).concat(s.getAll(Lt)):n.getAll(Lt);let o,a,h,l,c;for(o of r)for(l of(a=e.get(o.constructor),h=new jt(a,o),a.propertyNames))c=i[l],void 0===c?i[l]=[h]:c.push(h)}return i}})})();class Ft{}class Vt{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return(0,i.Kg)(t)?(s=t,n={name:s}):(s=t.name,n=t),new Vt(e,(0,i.c4)(_t(e,"name"),s),(0,i.TR)(_t(e,"aliases"),n.aliases,e.aliases),Ht.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Wt(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:U(s,s),G(s,i),...n.map(t=>G(s,Wt(t))))}}const qt="value-converter",Kt=(0,i.r$)(qt),_t=(t,e)=>p(b(e),t),Wt=t=>`${Kt}:${t}`,Ht=C({name:Kt,keyFrom:Wt,isType:t=>(0,i.Tn)(t)&&(g(Kt,t)||t.$au?.type===qt),define(t,e){const s=Vt.create(t,e),n=s.Type;return m(s,n,Kt,i.n_),n},getDefinition(t){const e=p(Kt,t)??J(t,qt,Vt.create);if(void 0===e)throw V(152,t);return e},annotate(t,e,s){m(s,t,b(e))},getAnnotation:_t,find(t,e){const s=t.find(qt,e);return null==s?null:p(Kt,s)??J(s,qt,Vt.create)??null},get:(t,e)=>t.get((0,i.Zc)(Wt(e)))});class zt{constructor(t,e){this.v=void 0,this.b=t,this.A=e}flush(){this.b.isBound&&this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==(0,o.qM)(s.ast,s.s,s,null)&&(this.v=t,this.A.add(this))}}const Ut=(()=>{function t(t){this.s=t}return e=>{E(e.prototype,"useScope",t)}})(),Gt=(()=>{class t{}const e=new WeakMap,s=new WeakMap,i=new WeakMap;function n(t){return this.l.get(t)}function r(e,i){let n=s.get(e);return null==n&&s.set(e,n=new t),n[i]??=it.get(e.l,i)}function o(t,e,s){const n=r(this,t);if(null==n)throw V(101,t);let o=i.get(this);if(null==o&&i.set(this,o={}),o[t])throw V(102,t);n.bind?.(e,this,...s)}function a(t,e){const s=r(this,t),n=i.get(this);s?.unbind?.(e,this),null!=n&&(n[t]=!1)}function h(s,i){let n=e.get(s);return null==n&&e.set(s,n=new t),n[i]??=Ht.get(s.l,i)}function l(t){const e=h(this,t);if(null==e)throw V(103,t);const s=e.signals;if(null!=s){const t=this.l.get(ft),e=s.length;let i=0;for(;i<e;++i)t.addSignalListener(s[i],this)}}function c(t){const e=h(this,t);if(void 0===e?.signals)return;const s=this.l.get(ft);let i=0;for(;i<e.signals.length;++i)s.removeSignalListener(e.signals[i],this)}function u(t,e,s,i){const n=h(this,t);if(null==n)throw V(103,t);const r=!0===n.withContext;let o=null;switch(r&&(o={source:this.l.get(Js).controller.viewModel,binding:this}),e){case"toView":return"toView"in n?r?n.toView(s,o,...i):n.toView(s,...i):s;case"fromView":return"fromView"in n?r?n.fromView?.(s,o,...i):n.fromView?.(s,...i):s}}return t=>{const e=t.prototype;E(e,"get",n),E(e,"bindBehavior",o),E(e,"unbindBehavior",a),E(e,"bindConverter",l),E(e,"unbindConverter",c),E(e,"useConverter",u)}})(),Qt=z("IFlushQueue",t=>t.singleton(Yt));class Yt{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(Jt)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}const Jt=function(t,e,s){s.delete(t),t.flush()},Xt=(()=>{const t=new WeakSet;return(e,s)=>{E(e.prototype,"limit",function(e){if(t.has(this))throw V(9996);t.add(this);const i=s(this,e),n=e.signals,r=n.length>0?this.get(ft):null,a=this[i],h=(...t)=>a.call(this,...t),l="debounce"===e.type?((t,e,s)=>{let i,n,r,a=!1;const h=()=>e(r),l=e=>{r=e,s.isBound?(n=i,i=(0,o.jd)(h,{delay:t.delay}),n?.cancel()):h()},c=l.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return l.flush=()=>{a=i?.status===L,c(),a&&h()},l})(e,h,this):((t,e,s)=>{let i,n,r,a=0,h=0,l=!1;const c=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(h=c()-a,n=i,h>t.delay?(a=c(),u()):i=(0,o.jd)(()=>{a=c(),u()},{delay:t.delay-h}),n?.cancel()):u()},f=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{l=i?.status===L,f(),l&&u()},d})(e,h,this),c=r?{handleChange:l.flush}:null;return this[i]=l,r&&n.forEach(t=>B(r,t,c)),{dispose:()=>{r&&n.forEach(t=>O(r,t,c)),t.delete(this),l.dispose(),delete this[i]}}})}})(),Zt=((t=new WeakSet)=>e=>function(){t.has(this)||(t.add(this),e.call(this))})();class te{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=r,this.targetProperty=o,this.mode=a,this.strict=h,this.isBound=!1,this.s=void 0,this.L=!1,this.v=void 0,this.boundFn=!1,this.M=!1,this.l=e,this.ast=i,this.P=t,this.target=n,this.oL=s,(this.M=o.indexOf(" ")>-1)&&!te.q.has(o)&&te.q.set(o,o.split(" "))}updateTarget(t){const e=this.target,s=this.targetAttribute,n=this.targetProperty;switch(s){case"class":if(this.M){const s=!!t;for(const t of te.q.get(n))e.classList.toggle(t,s)}else e.classList.toggle(n,!!t);break;case"style":{let s="",r=y(t);(0,i.Kg)(r)&&r.includes("!important")&&(s="important",r=r.replace("!important","")),e.style.setProperty(n,r,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,y(t))}}handleChange(){this.isBound&&(this.L||(this.L=!0,(0,o.jL)(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);this.obs.clear(),t!==this.v&&(this.v=t,this.updateTarget(t))})))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this),this.mode&(u|c)&&this.updateTarget(this.v=(0,o.qM)(this.ast,t,this,(this.mode&u)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.obs.clearAll())}}te.mix=Zt(()=>{Ut(te),Xt(te,()=>"updateTarget"),(0,o.xM)(te,null),Gt(te)}),te.q=new Map;class ee{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.L=!1,this.P=t,this.oL=s,this.I=s.getAccessor(n,r);const h=i.expressions,l=this.partBindings=Array(h.length),c=h.length;let u=0;for(;c>u;++u)l[u]=new se(h[u],n,r,e,s,a,this)}_(){if(this.isBound)if(this.P.state!==Ws&&(this.I.type&F)>0){if(this.L)return;this.L=!0,(0,o.jL)(()=>{this.L=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast,s=this.target,i=this.targetProperty,n=e.parts,r=t.length;let o="",a=0;if(1===r)o=n[0]+t[0].V()+n[1];else for(o=n[0];r>a;++a)o+=t[a].V()+n[a+1];this.I.setValue(o,s,i)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind()}useAccessor(t){this.I=t}}class se{constructor(t,e,s,i,n,r,o){this.ast=t,this.target=e,this.targetProperty=s,this.strict=r,this.owner=o,this.mode=u,this.isBound=!1,this.v="",this.boundFn=!1,this.D=!1,this.l=i,this.oL=n}updateTarget(){this.owner._()}handleChange(){this.isBound&&(this.D=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this.D=!0,this.updateTarget())}V(){if(!this.D)return this.v;this.obs.version++;const t=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);return this.obs.clear(),this.v=t,(0,i.cy)(t)&&this.observeCollection(t),this.D=!1,this.v}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this),this.v=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null),(0,i.cy)(this.v)&&this.observeCollection(this.v),this.D=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.v=void 0,this.D=!1,(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}se.mix=Zt(()=>{Ut(se),Xt(se,()=>"updateTarget"),(0,o.xM)(se,null),Gt(se)});class ie{constructor(t,e,s,i,n,r,o){this.p=i,this.ast=n,this.target=r,this.strict=o,this.isBound=!1,this.mode=u,this.L=!1,this.v="",this.F=!1,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.F&&(s.parentNode?.removeChild(s),this.F=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.F=!0),e.textContent=y(t??"")}handleChange(){this.isBound&&(this.L||(this.L=!0,(0,o.jL)(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);this.obs.clear(),t!==this.v&&this.updateTarget(t)})))}handleCollectionChange(){this.isBound&&(this.L||(this.L=!0,(0,o.jL)(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=this.v=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);this.obs.clear(),(0,i.cy)(t)&&this.observeCollection(t),this.updateTarget(t)})))}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this);const e=this.v=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);(0,i.cy)(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,(0,o.HC)(this.ast,this.s,this),this.F&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll())}}ie.mix=Zt(()=>{Ut(ie),Xt(ie,()=>"updateTarget"),(0,o.xM)(ie,null),Gt(ie)});class ne{constructor(t,e,s,i,n,r){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.strict=r,this.H=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=(0,o.qM)(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.H?t.bindingContext:t.overrideContext,(0,o.mi)(this.ast,t,this),this.v=(0,o.qM)(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}ne.mix=Zt(()=>{Ut(ne),Xt(ne,()=>"updateTarget"),(0,o.xM)(ne,null),Gt(ne)});class re{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.I=void 0,this.L=!1,this.O=null,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){this.I.setValue(t,this.target,this.targetProperty)}updateSource(t){(0,o.Um)(this.ast,this.s,this,null,t)}handleChange(){if(this.isBound)if(this.P.state!==Ws&&(this.I.type&F)>0){if(this.L)return;this.L=!0,(0,o.jL)(()=>{this.L=!1,this.isBound&&this.$()})}else this.$()}$(){this.obs.version++;const t=(0,o.qM)(this.ast,this.s,this,(this.mode&u)>0?this:null);this.obs.clear(),this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.I;i||(i=s&d?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.I=i);const n=(s&u)>0;s&(u|c)&&this.updateTarget((0,o.qM)(this.ast,this.s,this,n?this:null)),s&d&&(i.subscribe(this.O??=new zt(this,this.l.get(Qt))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.O&&(this.I.unsubscribe(this.O),this.O=null),(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}useTargetObserver(t){this.I?.unsubscribe(this),(this.I=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.O)throw V(9995);this.O=t}}re.mix=Zt(()=>{Ut(re),Xt(re,t=>t.mode&d?"updateSource":"updateTarget"),(0,o.xM)(re,null),Gt(re)});class oe{constructor(t,e,s,i,n){this.oL=e,this.ast=s,this.target=i,this.strict=n,this.isBound=!1,this.s=void 0,this.l=t}updateSource(){this.isBound?(this.obs.version++,(0,o.Um)(this.ast,this.s,this,this,this.target),this.obs.clear()):(0,o.Um)(this.ast,this.s,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),(0,o.qM)(this.ast,this.s,this,null)===this.target&&this.updateSource(),(0,o.HC)(this.ast,this.s,this),this.s=void 0)}}oe.mix=Zt(()=>{(0,o.xM)(oe,null),Xt(oe,()=>"updateSource"),Ut(oe),Gt(oe)});class ae{constructor(t,e=!1,s){this.prevent=t,this.capture=e,this.onError=s}}class he{constructor(t,e,s,i,n,r,o){this.ast=e,this.target=s,this.targetEvent=i,this.strict=o,this.isBound=!1,this.self=!1,this.boundFn=!0,this.N=null,this.l=t,this.W=n,this.N=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=(0,o.qM)(this.ast,this.s,this,null);delete e.$event,(0,i.Tn)(s)&&(s=s(t)),!0!==s&&this.W.prevent&&t.preventDefault()}handleEvent(t){if((!this.self||this.target===t.composedPath()[0])&&!1!==this.N?.(t))try{this.callSource(t)}catch(e){this.W.onError(t,e)}}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,(0,o.mi)(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.W),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.W))}}he.mix=Zt(function(){Ut(he),Xt(he,()=>"callSource"),Gt(he)});const le=z("IEventModifier"),ce=z("IKeyMapping",t=>t.instance({meta:C(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t},{})}}));class ue{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.j=(0,i.hd)(ce),this.U=["left","middle","right"]}static register(t){t.register(U(le,ue))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.U.indexOf(s))return!1;continue}if(this.j.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class de{constructor(){this.j=(0,i.hd)(ce),this.type=["keydown","keyup"]}static register(t){t.register(U(le,de))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.j.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.j.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class fe{constructor(){this.type=["$ALL"]}static register(t){t.register(U(le,fe))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e)switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const pe=z("IEventModifierHandler",t=>t.instance({getHandler:()=>null}));class ge{constructor(){this.G=(0,i.hd)((0,i.Q7)(le)).reduce((t,e)=>(((0,i.cy)(e.type)?e.type:[e.type]).forEach(s=>t[s]=e),t),{})}static register(t){t.register(U(pe,ge))}getHandler(t,e){return(0,i.Kg)(e)?(this.G[t]??this.G.$ALL)?.getHandler(e)??null:null}}const me={register(t){t.register(ge,ue,de,fe)}},ve=z("IViewFactory");class be{constructor(t,e){this.isCaching=!1,this.X=null,this.K=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=be.maxCacheSize:(0,i.Kg)(t)&&(t=parseInt(t,10)),-1!==this.K&&e||(this.K=t)),this.K>0?this.X=[]:this.X=null,this.isCaching=this.K>0}canReturnToCache(t){return null!=this.X&&this.X.length<this.K}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.X.push(t),!0)}create(t){const e=this.X;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=As.$view(this,t),s)}}be.maxCacheSize=65535;const we=(()=>{const t=(t,e)=>t.document.createComment(e);return e=>{const s=t(e,"au-end");return s.$start=t(e,"au-start"),s}})(),ye=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},$e=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),ke=t=>1===t.nodeType,Ce="default",Te=z("IAuSlotsInfo");class xe{constructor(t){this.projectedSlots=t}}const Ae=z("IAuSlotWatcher");class Re{static create(t,e,s,r,o,a,h,l){const c=[],u=r.renderers,d=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw V(9999);return i},f=t=>{const r=d(t),p=new Re(r),g=o.compileSpread(r.controller.definition,r.instruction?.captures??i.tR,r.controller.container,e,s);let m;for(m of g)switch(m.type){case n.lp.spreadTransferedBinding:f(t+1);break;case n.lp.spreadElementProp:u[m.instruction.type].render(p,Pi(e),m.instruction,a,h,l);break;default:u[m.type].render(p,e,m,a,h,l)}c.push(p)};return f(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.et=[],this.locator=(this.$controller=(this.it=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.it.controller.scope.parent??void 0;if(null==e)throw V(9999);this.et.forEach(t=>t.bind(e))}unbind(){this.et.forEach(t=>t.unbind()),this.isBound=!1}addBinding(t){this.et.push(t)}addChild(t){if(t.vmKind!==qs)throw V(9998);this.$controller.addChild(t)}}class Me{constructor(t,e,s,i,n,r,o){this.target=e,this.targetKeys=s,this.ast=i,this.strict=o,this.isBound=!1,this.s=void 0,this.boundFn=!1,this.st={},this.nt=new WeakMap,this.P=t,this.oL=n,this.l=r}updateTarget(){this.obs.version++;const t=(0,o.qM)(this.ast,this.s,this,this);this.obs.clear(),this.rt(t,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.isBound=!0,this.s=t,(0,o.mi)(this.ast,t,this);const e=(0,o.qM)(this.ast,t,this,this);this.rt(e,!1)}unbind(){if(!this.isBound)return;let t;for(t in this.isBound=!1,(0,o.HC)(this.ast,this.s,this),this.s=void 0,this.st)this.st[t].unbind()}rt(t,e){let s,r;if(!(0,i.Gv)(t)){for(s in this.st)this.st[s]?.unbind();return}let a=this.nt.get(t);for(s of(null==a&&this.nt.set(t,a=o.HG.fromParent(this.s,t)),this.targetKeys))r=this.st[s],s in t?(null==r&&(r=this.st[s]=new re(this.P,this.l,this.oL,Me.ot[s]??=new h.DC(s,0),this.target,s,n.Zm.toView,this.strict)),r.bind(a)):e&&r?.unbind()}}Me.mix=Zt(()=>{Ut(Me),Xt(Me,()=>"updateTarget"),(0,o.xM)(Me,null),Gt(Me)}),Me.ot={};const Se=(t,e,s,i)=>{t.addEventListener(e,s,i)},Ie=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Ee=t=>{let e;const s=t.prototype;E(s,"subscribe",function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Se(this.lt,e,this);this.ht=!0,this.ct?.()}}),E(s,"unsubscribe",function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)Ie(this.lt,e,this);this.ht=!1,this.ut?.()}}),E(s,"useConfig",function(t){if(this.cf=t,this.ht){for(e of this.cf.events)Ie(this.lt,e,this);for(e of this.cf.events)Se(this.lt,e,this)}})},Be=t=>{E(t.prototype,"subscribe",i.lQ),E(t.prototype,"unsubscribe",i.lQ)};class Oe{get doNotCache(){return!0}constructor(t,e={}){this.obj=t,this.mapping=e,this.type=D|F,this.v="",this.ft={},this.dt=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.gt())}gt(){const t=this.ft,e=++this.dt,s=this.obj.classList,i=Pe(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],r=this.mapping[r]||r,0!==r.length&&(t[r]=this.dt,s.add(r));if(1!==e)for(r in t)r=this.mapping[r]||r,t[r]!==e&&s.remove(r)}}function Pe(t){if((0,i.Kg)(t))return Le(t);if("object"!=typeof t)return i.tR;if((0,i.cy)(t)){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Pe(t[i]));return s}return i.tR}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Le(s)):e.push(s));return e}function Le(t){const e=t.match(/\S+/g);return null===e?i.tR:e}Be(Oe);const je=t=>({$isResolver:!0,resolve:(e,s)=>s.get(Js).controller.container.get((0,i.ZV)(t))}),Ne=z("IRenderer");function De(t,e){return(e?.metadata??(t[Symbol.metadata]??=Object.create(null)))[i.Ri]={register(e){U(Ne,t).register(e)}},t}function Fe(t,e,s){return(0,i.Kg)(e)?t.parse(e,s):e}function Ve(t){return null!=t.viewModel?t.viewModel:t}const qe=De(class{constructor(){this.target=n.lp.setProperty}render(t,e,s){const i=Ve(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}},null),Ke=De(class{constructor(){this.r=(0,i.hd)(ms),this.target=n.lp.hydrateElement}render(t,e,s,r,o,a){let h,l,c;const u=s.res,d=s.projections,f=t.container;if("string"==typeof u){if(h=Di.find(f,u),null==h)throw V(752,s,t)}else h=u;const p=s.containerless||h.containerless?bi(e):null,g=function(t,e,s,r,o,a){const h=e.container.createChild();return $i(h,s,t),Y(h,Ys,new i.JF(os,e)),Y(h,n.OA,new i.JF(as,r)),Y(h,pi,null==o?fs:new ds(o)),Y(h,ve,ps),Y(h,Te,null==a?gs:new i.JF(ls,a)),h}(r,t,e,s,p,null==d?void 0:new xe(A(d)));l=g.invoke(h.Type),c=As.$el(g,l,e,s,h,p);const m=this.r.renderers,v=s.props,b=v.length;let w,y=0;for(;b>y;)w=v[y],m[w.type].render(t,c,w,r,o,a),++y;t.addChild(c)}},null),_e=De(class{constructor(){this.r=(0,i.hd)(ms),this.target=n.lp.hydrateAttribute}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Pt.find(a,s.res),null==o)throw V(753,s,t)}else o=s.res;const h=us(i,o,t,e,s,void 0,void 0),l=As.$attr(h.ctn,h.vm,e,o);Ct.set(e,o.key,l);const c=this.r.renderers,u=s.props,d=u.length;let f,p=0;for(;d>p;)f=u[p],c[f.type].render(t,l,f,i,n,r),++p;t.addChild(l)}},null),We=De(class{constructor(){this.r=(0,i.hd)(ms),this.target=n.lp.hydrateTemplateController}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Pt.find(a,s.res),null==o)throw V(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),l=bi(e),c=us(i,o,t,e,s,h,l),u=As.$attr(c.ctn,c.vm,e,o);Ct.set(l,o.key,u),c.vm.link?.(t,u,e,s);const d=this.r.renderers,f=s.props,p=f.length;let g,m=0;for(;p>m;)g=f[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}},null),He=De(class{constructor(){this.target=n.lp.hydrateLetElement,ne.mix()}render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,l=o.length;let c,u,d=0;for(;l>d;)c=o[d],u=Fe(n,c.from,P),t.addBinding(new ne(h,r,u,c.to,a,t.strict??!1)),++d}},null),ze=De(class{constructor(){this.target=n.lp.refBinding,oe.mix()}render(t,e,s,i,n,r){t.addBinding(new oe(t.container,r,Fe(n,s.from,P),function(t,e){if("element"===e)return t;switch(e){case"controller":return Pi(t);case"view":throw V(750);case"component":return Pi(t).viewModel;default:{const s=Et(t,e);if(void 0!==s)return s.viewModel;const i=Pi(t,{name:e});if(void 0===i)throw V(751,e);return i.viewModel}}}(e,s.to),t.strict??!1))}},null),Ue=De(class{constructor(){this.target=n.lp.interpolation,se.mix()}render(t,e,s,i,n,r){const o=t.container,a=new ee(t,o,r,Fe(n,s.from,"Interpolation"),Ve(e),s.to,u,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(je(gi));a.useAccessor(new Oe(a.target,t))}t.addBinding(a)}},null),Ge=De(class{constructor(){this.target=n.lp.propertyBinding,re.mix()}render(t,e,s,i,n,r){const o=t.container,a=new re(t,o,r,Fe(n,s.from,P),Ve(e),s.to,s.mode,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(je(gi));a.useTargetObserver(new Oe(a.target,t))}t.addBinding(a)}},null),Qe=De(class{constructor(){this.target=n.lp.iteratorBinding,re.mix()}render(t,e,s,i,n,r){t.addBinding(new re(t,t.container,r,Fe(n,s.forOf,"IsIterator"),Ve(e),s.to,u,t.strict??!1))}},null),Ye=De(class{constructor(){this.target=n.lp.textBinding,ie.mix()}render(t,e,s,i,n,r){t.addBinding(new ie(t,t.container,r,i,Fe(n,s.from,P),e,t.strict??!1))}},null),Je=z("IListenerBindingOptions",t=>t.singleton(class{constructor(){this.p=(0,i.hd)($t),this.prevent=!1,this.onError=(t,e)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:t,error:e}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw e}}})),Xe=De(class{constructor(){this.target=n.lp.listenerBinding,this.vt=(0,i.hd)(pe),this.xt=(0,i.hd)(Je),he.mix()}render(t,e,s,i,n){t.addBinding(new he(t.container,Fe(n,s.from,"IsFunction"),e,s.to,new ae(this.xt.prevent,s.capture,this.xt.onError),this.vt.getHandler(s.to,s.modifier),t.strict??!1))}},null),Ze=De(class{constructor(){this.target=n.lp.setAttribute}render(t,e,s){e.setAttribute(s.to,s.value)}},null),ts=De(class{constructor(){this.target=n.lp.setClassAttribute}render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}},null),es=De(class{constructor(){this.target=n.lp.setStyleAttribute}render(t,e,s){e.style.cssText+=s.value}},null),ss=De(class{constructor(){this.target=n.lp.stylePropertyBinding,re.mix()}render(t,e,s,i,n,r){t.addBinding(new re(t,t.container,r,Fe(n,s.from,P),e.style,s.to,u,t.strict??!1))}},null),is=De(class{constructor(){this.target=n.lp.attributeBinding,te.mix()}render(t,e,s,i,n,r){const o=t.container,a=o.has(gi,!1)?o.get(gi):null;t.addBinding(new te(t,o,r,Fe(n,s.from,P),e,s.attr,null==a?s.to:s.to.split(/\s/g).map(t=>a[t]??t).join(" "),u,t.strict??!1))}},null),ns=De(class{constructor(){this.yt=(0,i.hd)(n.B3),this.r=(0,i.hd)(ms),this.target=n.lp.spreadTransferedBinding}render(t,e,s,i,n,r){Re.create(t.container.get(Js),e,void 0,this.r,this.yt,i,n,r).forEach(e=>t.addBinding(e))}},null),rs=De(class{constructor(){this.target=n.lp.spreadValueBinding,Me.mix()}render(t,e,s,i,n,r){const o=s.target;if("$bindables"!==o)throw V(820,o);t.addBinding(new Me(t,e.viewModel,A(e.definition.bindables),n.parse(s.from,P),r,t.container,t.strict??!1))}},null),os="IController",as="IInstruction",hs="IRenderLocation",ls="ISlotsInfo";class cs{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw V(755);if(!(0,i.Kg)(t.name)||0===t.name.length)throw V(756);return t}}function us(t,e,s,r,o,a,h,l){const c=s instanceof As?s:s.$controller,u=c.container.createChild();return $i(u,r,t),Y(u,Ys,new i.JF(os,c)),Y(u,n.OA,new i.JF(as,o)),Y(u,pi,null==h?fs:new i.JF(hs,h)),Y(u,ve,null==a?ps:new cs(a)),Y(u,Te,gs),{vm:u.invoke(e.Type),ctn:u}}class ds{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const fs=new ds(null),ps=new cs(null),gs=new i.JF(ls,new xe(i.tR)),ms=z("IRendering",t=>t.singleton(vs));class vs{get renderers(){return this.wt??=this.bt.getAll(Ne,!1).reduce((t,e)=>(t[e.target]??=e,t),(0,i.BL)())}constructor(){this.kt=new WeakMap,this.Ct=new WeakMap;const t=this.bt=(0,i.hd)(i.p7).root,e=this.p=t.get($t);this.ep=t.get(h.JW),this.oL=t.get(o.WM),this.Bt=e.document.createElement("au-m"),this.St=new yi(e,e.document.createDocumentFragment())}compile(t,e){const s=e.get(n.B3),i=this.kt;let r=i.get(t);return null==r&&i.set(t,r=Ci.create(t.needsCompile?s.compile(t,e):t)),r}getViewFactory(t,e){return new be(e,Ci.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new yi(this.p,this.At(t.template));let e,s=!1;const n=this.Ct,r=this.p,o=r.document;if(n.has(t))e=n.get(t);else{const a=t.template;let h;null==a?e=null:a instanceof r.Node?"TEMPLATE"===a.nodeName?(e=a.content,s=!0):(e=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(h=o.createElement("template"),(0,i.Kg)(a)&&(h.innerHTML=a),e=h.content,s=!0),this.At(e),n.set(t,e)}return null==e?this.St:new yi(this.p,s?o.importNode(e,!0):o.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,l,c=0,u=0,d=n.length;if(o!==d)throw V(757,o,d);if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u;if(o>0)for(;o>c;){for(a=n[c],l=e[c],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,l,h,this.p,this.ep,this.oL),++u;++c}}At(t){if(null==t)return null;const e=this.p.document.createTreeWalker(t,128);let s;for(;null!=(s=e.nextNode());)"au*"===s.nodeValue&&s.parentNode.replaceChild(e.currentNode=this.Bt.cloneNode(),s);return t}}const bs=z("IShadowDOMStyles"),ws=z("IShadowDOMGlobalStyles",t=>t.instance({applyTo:i.lQ})),{enter:ys,exit:$s}=o.O3,{wrap:ks,unwrap:Cs}=o.Wh;class Ts{get value(){return this.v}constructor(t,e,s,i,n="async"){this.obj=t,this.$get=s,this.isBound=!1,this.L=!1,this.Rt=0,this.v=void 0,this.cb=i,this.oL=e,this.Tt=n}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,(0,o.jL)(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.obj,e=this.v;if(++this.Rt>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();(0,i.t7)(s,e)||this.cb.call(t,s,e,t),this.L||(this.Rt=0)}compute(){this.obs.version++;try{return ys(this),this.v=Cs(this.$get.call(void 0,ks(this.obj),this))}finally{this.obs.clear(),$s(this)}}}(0,o.xM)(Ts,null);class xs{get value(){return this.v}constructor(t,e,s,i,n,r="async"){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.L=!1,this.boundFn=!1,this.obj=t.bindingContext,this.Lt=i,this.cb=n,this.Tt=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,(0,o.jL)(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.Lt,e=this.obj,s=this.v;this.obs.version++;const n=(0,o.qM)(t,this.scope,this,this);this.obs.clear(),(0,i.t7)(n,s)||(this.v=n,this.cb.call(e,n,s,e))}bind(){this.isBound||(this.obs.version++,this.v=(0,o.qM)(this.Lt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}(0,o.xM)(xs,null),Gt(xs);class As{get lifecycleHooks(){return this.Mt}get isActive(){return(this.state&(Ws|Hs))>0&&0===(this.state&zs)}get name(){if(null===this.parent)switch(this.vmKind){case qs:return`[${this.definition.name}]`;case Vs:return this.definition.name;case Ks:return this.viewFactory.name}switch(this.vmKind){case qs:return`${this.parent.name}>[${this.definition.name}]`;case Vs:return`${this.parent.name}>${this.definition.name}`;case Ks:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.Dt}set viewModel(t){this.Dt=t,this.Pt=null==t||this.vmKind===Ks?Ds.none:new Ds(t)}get strict(){return this.definition?.strict}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.qt=!1,this.mountTarget=Ms,this.shadowRoot=null,this.nodes=null,this.location=null,this.Mt=null,this.state=_s,this.It=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._t=0,this.Vt=0,this.Ft=0,this.Dt=n,this.Pt=e===Ks?Ds.none:new Ds(n),this.location=o,this.r=t.root.get(ms)}static getCached(t){return Rs.get(t)}static getCachedOrThrow(t){const e=As.getCached(t);if(void 0===e)throw V(500,t);return e}static $el(t,e,s,n,r=void 0,o=null){if(Rs.has(e))return Rs.get(e);r=r??ji(e.constructor),Y(t,r.Type,new i.JF(r.key,e,r.Type));const a=new As(t,Vs,r,null,e,s,o),h=t.get((0,i.lq)(Js));return r.dependencies.length>0&&t.register(...r.dependencies),Y(t,Js,new i.JF("IHydrationContext",new Xs(a,n,h))),Rs.set(e,a),null!=n&&!1===n.hydrate||a.hE(n),a}static $attr(t,e,s,n){if(Rs.has(e))return Rs.get(e);n=n??Ot(e.constructor),Y(t,n.Type,new i.JF(n.key,e,n.Type));const r=new As(t,qs,n,null,e,s,null);return n.dependencies.length>0&&t.register(...n.dependencies),Rs.set(e,r),r.Ht(),r}static $view(t,e=void 0){const s=new As(t.container,Ks,null,t,null,null,null);return s.parent=e??null,s.Ot(),s}hE(t){const e=this.container,s=this.Dt,n=this.definition;this.scope=o.HG.create(s,null,!0),n.watches.length>0&&Ns(this,e,n,s),Ps(this,n,s),this.Mt=Dt.resolve(e),e.register(n.Type),null!==n.injectable&&Y(e,n.injectable,new i.JF("definition.injectable",s)),null!=t&&!1===t.hydrate||(this.hS(),this.hC())}hS(){null!=this.Mt.hydrating&&this.Mt.hydrating.forEach(ei,this),this.Pt.$t&&this.Dt.hydrating(this);const t=this.definition,e=this.Nt=this.r.compile(t,this.container),s=e.shadowOptions,i=e.hasSlots,n=e.containerless,r=this.host;let o=this.location;if(n&&null==o&&(o=this.location=bi(r)),di(r,Ei,this),di(r,t.key,this),null!==s||i){if(null!=o)throw V(501);di(this.shadowRoot=r.attachShadow(s??Fs),Ei,this),di(this.shadowRoot,t.key,this),this.mountTarget=Is}else null!=o?(r!==o&&(di(o,Ei,this),di(o,t.key,this)),this.mountTarget=Es):this.mountTarget=Ss;this.Dt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Mt.hydrated&&this.Mt.hydrated.forEach(si,this),this.Pt.Wt&&this.Dt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Nt,this.host),void 0!==this.Mt.created&&this.Mt.created.forEach(ti,this),this.Pt.jt&&this.Dt.created(this)}Ht(){const t=this.definition,e=this.Dt;t.watches.length>0&&Ns(this,this.container,t,e),Ps(this,t,e),e.$controller=this,this.Mt=Dt.resolve(this.container),void 0!==this.Mt.created&&this.Mt.created.forEach(ti,this),this.Pt.jt&&this.Dt.created(this)}Ot(){this.Nt=this.r.compile(this.viewFactory.def,this.container),this.r.render(this,(this.nodes=this.r.createNodes(this.Nt)).findTargets(),this.Nt,void 0)}activate(t,e,s){switch(this.state){case _s:case Us:if(null!==e&&!e.isActive)return;this.state=Ws;break;case Hs:return;case Qs:throw V(502,this.name);default:throw V(503,this.name,function(t){const e=[];return(t&Ws)===Ws&&e.push("activating"),(t&Hs)===Hs&&e.push("activated"),(t&zs)===zs&&e.push("deactivating"),(t&Us)===Us&&e.push("deactivated"),(t&Gs)===Gs&&e.push("released"),(t&Qs)===Qs&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Vs:this.scope.parent=s??null;break;case qs:this.scope=s??null;break;case Ks:if(null==s)throw V(504,this.name);this.hasLockedScope||(this.scope=s)}let n;return this.$initiator=t,this.zt(),this.vmKind!==Ks&&null!=this.Mt.binding&&(n=(0,i.jY)(...this.Mt.binding.map(ii,this))),this.Pt.Ut&&(n=(0,i.jY)(n,this.Dt.binding(this.$initiator,this.parent))),(0,i.yL)(n)?(this.Gt(),n.then(()=>{this.qt=!0,this.state!==Ws?this.Xt():this.bind()}).catch(t=>{this.Kt(t)}),this.$promise):(this.qt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Ks&&null!=this.Mt.bound&&(t=(0,i.jY)(...this.Mt.bound.map(ni,this))),this.Pt.Qt&&(t=(0,i.jY)(t,this.Dt.bound(this.$initiator,this.parent))),(0,i.yL)(t))return this.Gt(),void t.then(()=>{this.isBound=!0,this.state!==Ws?this.Xt():this.Yt()}).catch(t=>{this.Kt(t)});this.isBound=!0,this.Yt()}Zt(...t){switch(this.mountTarget){case Ss:this.host.append(...t);break;case Is:this.shadowRoot.append(...t);break;case Es:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Yt(){switch(this.mountTarget){case Ss:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case Is:{const t=this.container;(t.has(bs,!1)?t.get(bs):t.get(ws)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Es:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Ks&&null!=this.Mt.attaching&&(t=(0,i.jY)(...this.Mt.attaching.map(ri,this))),this.Pt.Jt&&(t=(0,i.jY)(t,this.Dt.attaching(this.$initiator,this.parent))),(0,i.yL)(t)&&(this.Gt(),this.zt(),t.then(()=>{this.Xt()}).catch(t=>{this.Kt(t)})),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Xt()}deactivate(t,e){let s;switch(this.state&~Gs){case Hs:this.state=zs;break;case Ws:this.state=zs,s=this.$promise?.catch(i.lQ);break;case _s:case Us:case Qs:case Us|Qs:return;default:throw V(505,this.name,this.state)}this.$initiator=t,t===this&&this.te();let n,r=0;if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this);return(0,i.ui)(s,()=>{if(this.isBound&&(this.vmKind!==Ks&&null!=this.Mt.detaching&&(n=(0,i.jY)(...this.Mt.detaching.map(ai,this))),this.Pt.ee&&(n=(0,i.jY)(n,this.Dt.detaching(this.$initiator,this.parent)))),(0,i.yL)(n)&&(this.Gt(),t.te(),n.then(()=>{t.ie()}).catch(e=>{t.Kt(e)})),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.ie(),this.$promise})}removeNodes(){switch(this.vmKind){case Vs:case Ks:this.nodes.remove(),this.nodes.unlink()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case qs:this.scope=null;break;case Ks:this.hasLockedScope||(this.scope=null),(this.state&Gs)!==Gs||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Vs:this.scope.parent=null}this.state=Us,this.$initiator=null,this.se()}Gt(){void 0===this.$promise&&(this.$promise=new Promise((t,e)=>{this.$resolve=t,this.$reject=e}),this.$initiator!==this&&this.parent.Gt())}se(){void 0!==this.$promise&&(li=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,li(),li=void 0)}Kt(t){void 0!==this.$promise&&(ci=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,ci(t),ci=void 0),this.$initiator!==this&&this.parent.Kt(t)}zt(){++this._t,this.$initiator!==this&&this.parent.zt()}Xt(){if(this.state!==Ws)return--this._t,this.se(),void(this.$initiator!==this&&this.parent.Xt());if(0===--this._t){if(this.vmKind!==Ks&&null!=this.Mt.attached&&(ui=(0,i.jY)(...this.Mt.attached.map(oi,this))),this.Pt.ne&&(ui=(0,i.jY)(ui,this.Dt.attached(this.$initiator))),(0,i.yL)(ui))return this.Gt(),ui.then(()=>{this.state=Hs,this.se(),this.$initiator!==this&&this.parent.Xt()}).catch(t=>{this.Kt(t)}),void(ui=void 0);ui=void 0,this.state=Hs,this.se()}this.$initiator!==this&&this.parent.Xt()}te(){++this.Vt}ie(){if(0===--this.Vt){this.re(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.qt&&(e.vmKind!==Ks&&null!=e.Mt.unbinding&&(t=(0,i.jY)(...e.Mt.unbinding.map(hi,e))),e.Pt.oe&&(e.debug&&e.logger.trace("unbinding()"),t=(0,i.jY)(t,e.viewModel.unbinding(e.$initiator,e.parent)))),(0,i.yL)(t)&&(this.Gt(),this.re(),t.then(()=>{this.le()}).catch(t=>{this.Kt(t)})),t=void 0,e=e.next;this.le()}}re(){++this.Ft}le(){if(0===--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.qt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.qt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case qs:case Vs:return this.definition.name===t;case Ks:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Vs&&(di(t,Ei,this),di(t,this.definition.key,this)),this.host=t,this.mountTarget=Ss,this}setShadowRoot(t){return this.vmKind===Vs&&(di(t,Ei,this),di(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=Is,this}setLocation(t){return this.vmKind===Vs&&(di(t,Ei,this),di(t,this.definition.key,this)),this.location=t,this.mountTarget=Es,this}release(){this.state|=Gs}dispose(){(this.state&Qs)!==Qs&&(this.state|=Qs,this.Pt.he&&this.Dt.dispose(),null!==this.children&&(this.children.forEach(Zs),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Dt&&(Rs.delete(this.Dt),this.Dt=null),this.Dt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Pt.ae&&!0===this.Dt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const Rs=new WeakMap,Ms=0,Ss=1,Is=2,Es=3,Bs=C({none:Ms,host:Ss,shadowRoot:Is,location:Es}),Os=(0,i.HN)(o.az);function Ps(t,e,s){const n=e.bindables,r=x(n),a=r.length;if(0===a)return;const h=t.container.get(o.WM),l="propertiesChanged"in s,c=t.vmKind===Ks?void 0:t.container.get(Os),u=l?(()=>{let e={},i=!1,n=0;const r=()=>{i||(i=!0,(0,o.jL)(()=>{i=!1;const o=e;e={},n=0,t.isBound&&(s.propertiesChanged?.(o),n>0&&r())}))};return(t,s,i)=>{e[t]={newValue:s,oldValue:i},n++,r()}})():i.lQ;for(let e=0;e<a;++e){const o=r[e],a=n[o],d=a.callback,f=h.getObserver(s,o);if(a.set!==i.lQ&&!0!==f.useCoercer?.(a.set,c))throw V(507,o);if(null!=s[d]||null!=s.propertyChanged||l){const e=(e,i)=>{t.isBound&&(s[d]?.(e,i),s.propertyChanged?.(o,e,i),u(o,e,i))};if(!0!==f.useCallback?.(e))throw V(508,o)}}}const Ls=new Map,js=t=>{let e=Ls.get(t);return null==e&&(e=new h.DC(t,0),Ls.set(t,e)),e};function Ns(t,e,s,n){const r=e.get(o.WM),a=e.get(h.JW),l=s.watches,c=t.vmKind===Vs?t.scope:o.HG.create(n,null,!0),u=l.length;let d,f,p,g,m=0;for(;u>m;++m){if(({expression:d,callback:f,flush:g}=l[m]),f=(0,i.Tn)(f)?f:Reflect.get(n,f),!(0,i.Tn)(f))throw V(506,f);(0,i.Tn)(d)?t.addBinding(new Ts(n,r,d,f,g)):(p=(0,i.Kg)(d)?a.parse(d,P):js(d),t.addBinding(new xs(c,e,r,p,f,g)))}}class Ds{constructor(t){this.ce="define"in t,this.$t="hydrating"in t,this.Wt="hydrated"in t,this.jt="created"in t,this.Ut="binding"in t,this.Qt="bound"in t,this.Jt="attaching"in t,this.ne="attached"in t,this.ee="detaching"in t,this.oe="unbinding"in t,this.he="dispose"in t,this.ae="accept"in t}}Ds.none=new Ds({});const Fs={mode:"open"},Vs="customElement",qs="customAttribute",Ks="synthetic",_s=0,Ws=1,Hs=2,zs=4,Us=8,Gs=16,Qs=32,Ys=z("IController"),Js=z("IHydrationContext");class Xs{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function Zs(t){t.dispose()}function ti(t){t.instance.created(this.Dt,this)}function ei(t){t.instance.hydrating(this.Dt,this)}function si(t){t.instance.hydrated(this.Dt,this)}function ii(t){return t.instance.binding(this.Dt,this.$initiator,this.parent)}function ni(t){return t.instance.bound(this.Dt,this.$initiator,this.parent)}function ri(t){return t.instance.attaching(this.Dt,this.$initiator,this.parent)}function oi(t){return t.instance.attached(this.Dt,this.$initiator)}function ai(t){return t.instance.detaching(this.Dt,this.$initiator,this.parent)}function hi(t){return t.instance.unbinding(this.Dt,this.$initiator,this.parent)}let li,ci,ui;const di=Ct.set,fi=z("IEventTarget",t=>t.cachedCallback(t=>t.has(Fi,!0)?t.get(Fi).host:t.get($t).document)),pi=z("IRenderLocation"),gi=z("ICssClassMapping"),mi=new WeakMap;function vi(t){if(mi.has(t))return mi.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0===e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Pi(t,{optional:!0});if(null==e)return null;if(e.mountTarget===Bs.shadowRoot)return vi(e.host)}return t.parentNode}function bi(t){if(wi(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function wi(t){return"au-end"===t.textContent}class yi{get firstChild(){return this.ue}get lastChild(){return this.fe}constructor(t,e){this.platform=t,this.next=void 0,this.de=!1,this.me=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,l=this.childNodes=Array(o=h.length);for(r=0;o>r;)l[r]=h[r],++r;this.ue=e.firstChild,this.fe=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.me&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.de){let e,s=this.ue;const i=this.fe;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.de=!0,e||t.appendChild(this.f)}remove(){if(this.de){this.de=!1;const t=this.f,e=this.fe;let s,i=this.ue;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,e.insertBefore(this.f,t)}unlink(){this.me=!1,this.next=void 0,this.ref=void 0}link(t){this.me=!0,wi(t)?this.ref=t:(this.next=t,this.ge())}ge(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const $i=(t,e,s=t.get($t))=>(Y(t,s.HTMLElement,Y(t,s.Element,Y(t,Tt,new i.JF("ElementResolver",e)))),t),ki=new WeakMap;class Ci{get type(){return"custom-element"}constructor(t,e,s,i,n,r,o,a,h,l,c,u,d,f,p,g,m,v,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.capture=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=h,this.needsCompile=l,this.surrogates=c,this.bindables=u,this.containerless=d,this.shadowOptions=f,this.hasSlots=p,this.enhance=g,this.watches=m,this.strict=v,this.processContent=b}static create(t,e=null){if(null===e){const s=t;if((0,i.Kg)(s))throw V(761,t);const n=(0,i.M6)("name",s,Oi);e=(0,i.Tn)(s.Type)?s.Type:Ni((0,i.fL)(n));for(const t of Object.values(_.from(s.bindables)))_.i(t,e);return new Ci(e,n,(0,i.TR)(s.aliases),(0,i.M6)("key",s,()=>Bi(n)),(0,i.nf)("capture",s,e,Ri),(0,i.nf)("template",s,e,xi),(0,i.TR)(s.instructions),(0,i.TR)(Li(e,"dependencies"),s.dependencies),(0,i.M6)("injectable",s,xi),(0,i.M6)("needsCompile",s,Mi),(0,i.TR)(s.surrogates),_.from(Li(e,"bindables"),s.bindables),(0,i.nf)("containerless",s,e,Ri),(0,i.M6)("shadowOptions",s,xi),(0,i.M6)("hasSlots",s,Ri),(0,i.M6)("enhance",s,Ri),(0,i.M6)("watches",s,Si),(0,i.M6)("strict",s,Ai),(0,i.fv)("processContent",e,xi))}if((0,i.Kg)(t))return new Ci(e,t,(0,i.TR)(Li(e,"aliases"),e.aliases),Bi(t),(0,i.fv)("capture",e,Ri),(0,i.fv)("template",e,xi),(0,i.TR)(Li(e,"instructions"),e.instructions),(0,i.TR)(Li(e,"dependencies"),e.dependencies),(0,i.fv)("injectable",e,xi),(0,i.fv)("needsCompile",e,Mi),(0,i.TR)(Li(e,"surrogates"),e.surrogates),_.from(..._.getAll(e),Li(e,"bindables"),e.bindables),(0,i.fv)("containerless",e,Ri),(0,i.fv)("shadowOptions",e,xi),(0,i.fv)("hasSlots",e,Ri),(0,i.fv)("enhance",e,Ri),(0,i.TR)(xt.getDefinitions(e),e.watches),(0,i.fv)("strict",e,Ai),(0,i.fv)("processContent",e,xi));const s=(0,i.M6)("name",t,Oi);for(const s of Object.values(_.from(t.bindables)))_.i(s,e);return new Ci(e,s,(0,i.TR)(Li(e,"aliases"),t.aliases,e.aliases),Bi(s),(0,i.nf)("capture",t,e,Ri),(0,i.nf)("template",t,e,xi),(0,i.TR)(Li(e,"instructions"),t.instructions,e.instructions),(0,i.TR)(Li(e,"dependencies"),t.dependencies,e.dependencies),(0,i.nf)("injectable",t,e,xi),(0,i.nf)("needsCompile",t,e,Mi),(0,i.TR)(Li(e,"surrogates"),t.surrogates,e.surrogates),_.from(..._.getAll(e),Li(e,"bindables"),e.bindables,t.bindables),(0,i.nf)("containerless",t,e,Ri),(0,i.nf)("shadowOptions",t,e,xi),(0,i.nf)("hasSlots",t,e,Ri),(0,i.nf)("enhance",t,e,Ri),(0,i.TR)(t.watches,xt.getDefinitions(e),e.watches),(0,i.nf)("strict",t,e,Ai),(0,i.nf)("processContent",t,e,xi))}static getOrCreate(t){if(t instanceof Ci)return t;if(ki.has(t))return ki.get(t);const e=Ci.create(t);return ki.set(t,e),m(e,e.Type,Ei),e}register(t,e){const s=this.Type,i="string"==typeof e?Bi(e):this.key,n=this.aliases;t.has(i,!1)?console.warn(V(153,this.name)):t.register(t.has(s,!1)?null:U(s,s),G(s,i),...n.map(t=>G(s,Bi(t))))}toString(){return`au:ce:${this.name}`}}const Ti={name:void 0,searchParents:!1,optional:!1},xi=()=>null,Ai=()=>{},Ri=()=>!1,Mi=()=>!0,Si=()=>i.tR,Ii="custom-element",Ei=(0,i.r$)(Ii),Bi=t=>`${Ei}:${t}`,Oi=(t=>()=>"unnamed-"+ ++t)(0),Pi=(t,e=Ti)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Ct.get(t,Ei);if(null===s){if(!0===e.optional)return null;throw V(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Ct.get(t,Ei);if(null===s)throw V(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Ct.get(s,Ei);if(null!==t&&(i=!0,t.is(e.name)))return t;s=vi(s)}if(i)return;throw V(764,t)}let s=t;for(;null!==s;){const t=Ct.get(s,Ei);if(null!==t)return t;s=vi(s)}throw V(765,t)},Li=(t,e)=>p(b(e),t),ji=t=>{const e=p(Ei,t)??J(t,Ii,Ci.create);if(null==e)throw V(760,t);return e},Ni=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,I(n,"name",t),i!==e&&T(n.prototype,i),n}}(),Di=C({name:Ei,keyFrom:Bi,isType:t=>(0,i.Tn)(t)&&(g(Ei,t)||t.$au?.type===Ii),for:Pi,define:(t,e)=>{const s=Ci.create(t,e),n=s.Type;return m(s,n,Ei,i.n_),n},getDefinition:ji,annotate:(t,e,s)=>{m(s,t,b(e))},getAnnotation:Li,generateName:Oi,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:Ni,find(t,e){const s=t.find(Ii,e);return null==s?null:p(Ei,s)??J(s,Ii,Ci.create)??null}}),Fi=z("IAppRoot");class Vi{get controller(){return this.P}constructor(t,e,s,n=!1){this.config=t,this.container=e,this.pe=void 0,this.ve=n;const r=this.host=t.host;s.prepare(this),Y(e,fi,new i.JF("IEventTarget",r)),$i(e,r,this.platform=this.xe(e,r)),this.pe=(0,i.ui)(this.ye("creating"),()=>{0!=!t.allowActionlessForm&&r.addEventListener("submit",t=>{const e=t.target,s=!e.getAttribute("action");"FORM"===e.tagName&&s&&t.preventDefault()},!1);const s=n?e:e.createChild(),o=t.component;let a;(0,i.Tn)(o)?(a=s.invoke(o),Q(o,a)):a=t.component;const h={hydrate:!1,projections:null},l=n?Ci.create({name:Oi(),template:this.host,enhance:!0,strict:t.strictBinding}):void 0,c=this.P=As.$el(s,a,r,h,l);return c.hE(h),(0,i.ui)(this.ye("hydrating"),()=>(c.hS(),(0,i.ui)(this.ye("hydrated"),()=>{c.hC(),this.pe=void 0})))})}activate(){return(0,i.ui)(this.pe,()=>(0,i.ui)(this.ye("activating"),()=>(0,i.ui)(this.P.activate(this.P,null,void 0),()=>this.ye("activated"))))}deactivate(){return(0,i.ui)(this.ye("deactivating"),()=>(0,i.ui)(this.P.deactivate(this.P,null),()=>this.ye("deactivated")))}ye(t){const e=this.container,s=this.ve&&!e.has(bt,!1)?[]:e.getAll(bt);return(0,i.jY)(...s.reduce((e,s)=>(s.slot===t&&e.push(s.run()),e),[]))}xe(t,e){let s;if(t.has($t,!1))s=t.get($t);else{if(null===e.ownerDocument.defaultView)throw V(769);s=new a.s(e.ownerDocument.defaultView),t.register(Q($t,s))}return s}dispose(){this.P?.dispose()}}const qi=z("IAurelia");class Ki{get isRunning(){return this.ir}get isStarting(){return this.we}get isStopping(){return this.be}get root(){if(null==this.ke){if(null==this.next)throw V(767);return this.next}return this.ke}constructor(t=i.DI.createContainer()){if(this.container=t,this.ir=!1,this.we=!1,this.be=!1,this.ke=void 0,this.next=void 0,this.Ce=void 0,this.Be=void 0,t.has(qi,!0)||t.has(Ki,!0))throw V(768);Y(t,qi,new i.JF("IAurelia",this)),Y(t,Ki,new i.JF("Aurelia",this)),Y(t,Fi,this.Se=new i.JF("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Vi(t,this.container,this.Se),this}enhance(t){const e=t.container??this.container.createChild(),s=Y(e,Fi,new i.JF("IAppRoot")),n=new Vi({host:t.host,component:t.component},e,s,!0);return(0,i.ui)(n.activate(),()=>n)}async waitForIdle(){const t=this.root.platform;await t.domQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw V(770);return(0,i.yL)(this.Ce)?this.Ce:this.Ce=(0,i.ui)(this.stop(),()=>(Ct.hideProp||Reflect.set(t.host,"$aurelia",this),this.Se.prepare(this.ke=t),this.we=!0,(0,i.ui)(t.activate(),()=>{this.ir=!0,this.we=!1,this.Ce=void 0,this.Ae(t,"au-started",t.host)})))}stop(t=!1){if((0,i.yL)(this.Be))return this.Be;if(!0===this.ir){const e=this.ke;return this.ir=!1,this.be=!0,this.Be=(0,i.ui)(e.deactivate(),()=>(0,i.ui)((0,o.aX)(),()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.ke=void 0,this.Se.dispose(),this.be=!1,this.Be=void 0,this.Ae(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.be)throw V(771);this.container.dispose()}Ae(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const _i=z("ISVGAnalyzer",t=>t.singleton(Wi));class Wi{isStandardSvgAttribute(t,e){return!1}}class Hi{constructor(){this.fns=[],this.Le=(0,i.BL)(),this.Me=(0,i.BL)(),this.svg=(0,i.hd)(_i),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,n,r;for(n in t)for(r in e=t[n],s=this.Le[n]??=(0,i.BL)(),e){if(void 0!==s[r])throw zi(r,n);s[r]=e[r]}}useGlobalMapping(t){const e=this.Me;for(const s in t){if(void 0!==e[s])throw zi(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some(s=>s(t,e))}map(t,e){return this.Le[t.nodeName]?.[e]??this.Me[e]??(M(t,e,this.svg)?e:null)}}function zi(t,e){return V(719,t,e)}Hi.register=(0,i.E8)(n.Ii);const Ui={register(t){t.register(n.Mg,Hi,Qi)}};class Gi{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}class Qi{constructor(){this.De=new WeakMap,this.Pe=new WeakMap}el(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new Yi),e in s.qe?s.qe[e]:s.qe[e]=Di.find(t,e)}attr(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new Yi),e in s.Ie?s.Ie[e]:s.Ie[e]=Pt.find(t,e)}bindables(t){let e=this.Pe.get(t);if(null==e){const s=t.bindables,n=(0,i.BL)();let r,o,a,h,c=!1;for(o in s){if(r=s[o],h=r.attribute,!0===r.primary){if(c)throw V(714,t);c=!0,a=r}else c||null!=a||(a=r);n[h]=W.create(o,r)}null==r&&"custom-attribute"===t.type&&(a=n.value=W.create("value",{mode:t.defaultBindingMode??l})),this.Pe.set(t,e=new Gi(n,s,a??null))}return e}}Qi.register=(0,i.E8)(n.Y_);class Yi{constructor(){this.qe=(0,i.BL)(),this.Ie=(0,i.BL)()}}const Ji=(0,i.BL)();class Xi{static forNs(t){return Ji[t]??=new Xi(t)}constructor(t){this.ns=t,this.type=D|F}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}Be(Xi);class Zi{constructor(){this.type=D|F}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Be(Zi);const tn=new Zi;class en{static _e(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=k.call(i,"model")?i.model:i.value),++n;return e}static Ve(t,e){return t===e}constructor(t,e,s,i){this.type=D|N|F,this.v=void 0,this.ov=void 0,this.Fe=!1,this.He=void 0,this.Oe=void 0,this.iO=!1,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.lt.multiple?en._e(this.lt.options):this.lt.value}setValue(t){this.ov=this.v,this.v=t,this.Fe=t!==this.ov,this.$e(t instanceof Array?t:null),this.gt()}gt(){this.Fe&&(this.Fe=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.lt,s=(0,i.cy)(t),n=e.matcher??en.Ve,r=e.options;let o=r.length;for(;o-- >0;){const e=r[o],i=k.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex(t=>!!n(i,t)):!!n(i,t)}}syncValue(){const t=this.lt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||en.Ve,a=[];for(;n<s;)r=e[n],r.selected&&a.push(k.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex(t=>!!o(h,t))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex(t=>!!o(h,t))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=k.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}ct(){(this.Oe=$e(this.lt,this.Ne.bind(this))).observe(this.lt,{childList:!0,subtree:!0,characterData:!0}),this.$e(this.v instanceof Array?this.v:null),this.iO=!0}ut(){this.Oe.disconnect(),this.He?.unsubscribe(this),this.Oe=this.He=void 0,this.iO=!1}$e(t){if(this.He?.unsubscribe(this),this.He=void 0,null!=t){if(!this.lt.multiple)throw V(654);(this.He=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Tt()}Ne(t){this.syncOptions(),this.syncValue()&&this.Tt()}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Ee(en),(0,o.rq)(en,null);class sn{constructor(t){this.obj=t,this.type=D|F,this.v="",this.ov="",this.styles={},this.version=0,this.Fe=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.Fe=t!==this.ov,this.gt()}We(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}je(t){let e,s;const n=[];for(s in t)if(e=t[s],null!=e)if((0,i.Kg)(e)){if(s.startsWith("--")){n.push([s,e]);continue}n.push([(0,i.kW)(s),e])}else n.push(...this.ze(e));return n}Ue(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.ze(t[i]));return s}return i.tR}ze(t){return(0,i.Kg)(t)?this.We(t):t instanceof Array?this.Ue(t):t instanceof Object?this.je(t):i.tR}gt(){if(this.Fe){this.Fe=!1;const t=this.v,e=this.styles,s=this.ze(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const l=s.length;for(;h<l;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)k.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&(0,i.Tn)(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Be(sn);class nn{constructor(t,e,s){this.type=D|N|F,this.v="",this.ov="",this.Fe=!1,this.ht=!1,this.lt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){(0,i.t7)(t,this.v)||(this.ov=this.v,this.v=t,this.Fe=!0,this.cf.readonly||this.gt())}gt(){this.Fe&&(this.Fe=!1,this.lt[this.k]=this.v??this.cf.default,this.Tt())}handleEvent(){this.ov=this.v,this.v=this.lt[this.k],this.ov!==this.v&&(this.Fe=!1,this.Tt())}ct(){this.v=this.ov=this.lt[this.k]}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Ee(nn),(0,o.rq)(nn,null);const rn=(()=>{const t="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";return T((0,i.BL)(),{"xlink:actuate":["actuate",t],"xlink:arcrole":["arcrole",t],"xlink:href":["href",t],"xlink:role":["role",t],"xlink:show":["show",t],"xlink:title":["title",t],"xlink:type":["type",t],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",s],"xmlns:xlink":["xlink",s]})})(),on=new o.td;on.type=D|F;class an{constructor(){this.allowDirtyCheck=!0,this.Ge=(0,i.BL)(),this.Xe=(0,i.BL)(),this.Ke=(0,i.BL)(),this.Qe=(0,i.BL)(),this.Ye=(0,i.hd)(i.Nt),this.p=(0,i.hd)($t),this.Ze=(0,i.hd)(o.bu),this.svg=(0,i.hd)(_i);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:cn,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:en,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const n=this.Ge;let r;if((0,i.Kg)(t))r=n[t]??=(0,i.BL)(),null==r[e]?r[e]=s:hn(t,e);else for(const s in t){r=n[s]??=(0,i.BL)();const o=t[s];for(e in o)null==r[e]?r[e]=o[e]:hn(s,e)}}useConfigGlobal(t,e){const s=this.Xe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:hn("*",e);else null==s[t]?s[t]=e:hn("*",t)}getAccessor(t,e,s){if(e in this.Qe||e in(this.Ke[t.tagName]??i.vB))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return tn;default:{const s=rn[e];return void 0!==s?Xi.forNs(s[1]):M(t,e,this.svg)?tn:on}}}overrideAccessor(t,e){let s;if((0,i.Kg)(t))s=this.Ke[t]??=(0,i.BL)(),s[e]=!0;else for(const e in t)for(const n of t[e])s=this.Ke[e]??=(0,i.BL)(),s[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Qe[e]=!0}getNodeObserverConfig(t,e){return this.Ge[t.tagName]?.[e]??this.Xe[e]}getNodeObserver(t,e,s){const i=this.Ge[t.tagName]?.[e]??this.Xe[e];let n;return null!=i?(n=new(i.type??nn)(t,e,i,s,this.Ye),n.doNotCache||((0,o.hH)(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Oe(t);case"css":case"style":return new sn(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=rn[e];if(void 0!==n)return Xi.forNs(n[1]);if(M(t,e,this.svg))return tn;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Ze.createProperty(t,e);throw V(652,e)}return new o.Kg(t,e)}}function hn(t,e){throw V(653,t,e)}function ln(t,e){return t===e}an.register=(0,i.E8)(o.y0);class cn{constructor(t,e,s,i){this.type=D|N|F,this.v=void 0,this.ov=void 0,this.Je=void 0,this.ti=void 0,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ei(),this.ii(),this.Tt())}handleCollectionChange(){this.ii()}handleChange(t,e){this.ii()}ii(){const t=this.v,e=this.lt,s=k.call(e,"model")?e.model:e.value,n="radio"===e.type,r=void 0!==e.matcher?e.matcher:ln;if(n)e.checked=!!r(t,s);else if(!0===t)e.checked=!0;else{let n=!1;if((0,i.cy)(t))n=-1!==t.findIndex(t=>!!r(t,s));else if(t instanceof Set){for(const e of t)if(r(e,s)){n=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],i=e[1];if(r(t,s)&&!0===i){n=!0;break}}e.checked=n}}handleEvent(){let t=this.ov=this.v;const e=this.lt,s=k.call(e,"model")?e.model:e.value,n=e.checked,r=void 0!==e.matcher?e.matcher:ln;if("checkbox"===e.type){if((0,i.cy)(t)){const e=t.findIndex(t=>!!r(t,s));return void(n&&-1===e?t.push(s):n||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let i=e;for(const e of t)if(!0===r(e,s)){i=e;break}return void(n&&i===e?t.add(s):n||i===e||t.delete(i))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===r(t,s)){e=t;break}}return void t.set(e,n)}t=n}else{if(!n)return;t=s}this.v=t,this.Tt()}ct(){this.ei()}ut(){this.v=this.ov=void 0,this.Je?.unsubscribe(this),this.ti?.unsubscribe(this),this.Je=this.ti=void 0}Tt(){un=this.ov,this.ov=this.v,this.subs.notify(this.v,un),un=void 0}ei(){const t=this.lt;(this.ti??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.Je?.unsubscribe(this),this.Je=void 0,"checkbox"===t.type&&(this.Je=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let un;Ee(cn),(0,o.rq)(cn,null);class dn{bind(t,e){if(!(e instanceof re))throw V(9994,e);e.useTargetObserver(tn)}}dn.$au={type:Z,name:"attr"};class fn{bind(t,e){if(!("handleEvent"in e))throw V(801);e.self=!0}unbind(t,e){e.self=!1}}fn.$au={type:Z,name:"self"};class pn{constructor(){this.oL=(0,i.hd)(o.WM),this.si=(0,i.hd)(o.y0)}bind(t,e,...s){if(!(this.si instanceof an))throw V(9993);if(0===s.length)throw V(802);if(!(e instanceof re&&e.mode&d))throw V(803);const i=this.si.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw V(9992,e);const n=this.si.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}pn.$au={type:Z,name:"updateTrigger"};class gn{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ni=!1,this.ri=0,this.oi=(0,i.hd)(ve),this.l=(0,i.hd)(pi)}attaching(t,e){return this.li(this.value)}detaching(t,e){return this.ni=!0,(0,i.ui)(this.pending,()=>{this.ni=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)})}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.li(t):void 0}li(t){const e=this.view,s=this.$controller,n=this.ri++,r=()=>!this.ni&&this.ri===n+1;let o;return(0,i.ui)(this.pending,()=>this.pending=(0,i.ui)(e?.deactivate(e,s),()=>{if(r()&&(o=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.oi.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=o))return o.setLocation(this.l),(0,i.ui)(o.activate(o,s,s.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}gn.$au={type:Rt,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class mn{constructor(){this.f=(0,i.hd)(ve)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof gn)r.elseFactory=this.f;else{if(!(r.viewModel instanceof gn))throw V(810);r.viewModel.elseFactory=this.f}}}function vn(t){t.dispose()}mn.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const bn=["BindingBehavior","ValueConverter"];class wn{constructor(){this.views=[],this.key=null,this.hi=[],this.ai=[],this.ci=[],this.ui=new Map,this.fi=void 0,this.di=!1,this.mi=!1,this.gi=null,this.pi=void 0,this.xi=!1,this.l=(0,i.hd)(pi),this.yi=(0,i.hd)(Ys),this.f=(0,i.hd)(ve),this.wi=(0,i.hd)(xn);const t=(0,i.hd)(n.OA).props[0].props[0];if(void 0!==t){const{to:e,value:s,command:n}=t;if("key"!==e)throw V(776,e);if(null===n)this.key=s;else{if("bind"!==n)throw V(775,n);this.key=(0,i.hd)(h.JW).parse(s,P)}}}binding(t,e){const s=this.yi.bindings,i=s.length;let n,r,a=0;for(;i>a;++a)if(n=s[a],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.bi=n;let t=r.iterable;for(;null!=t&&bn.includes(t.$kind);)t=t.expression,this.di=!0;this.gi=t;break}this.ki();const h=r.declaration;(this.xi="ArrayDestructuring"===h.$kind||"ObjectDestructuring"===h.$kind)||(this.local=(0,o.qM)(h,this.$controller.scope,n,null))}attaching(t,e){return this.Ci(),this.Bi(void 0),this.Si(t,this.pi??i.tR)}detaching(t,e){return this.ki(),this.Ai(t)}unbinding(t,e){this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.ki(),this.Ci(),this.Bi(void 0),this.Ri(void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.di){if(this.mi)return;return this.mi=!0,this.items=(0,o.qM)(this.forOf.iterable,s.scope,this.bi,null),void(this.mi=!1)}this.Ci(),this.Bi(null===this.key?e:void 0),this.Ri(e)}}Ri(t){const e=this.views;this.hi=e.slice();const s=e.length,n=this.key,r=null!==n,a=this.ci,h=this.ai;if(r||void 0===t){const e=this.local,i=this.pi.length,l=this.forOf.declaration,c=this.bi,u=this.xi;t=(0,o.Bn)(i);let d=0;if(0===s)for(;d<i;++d)t[d]=-2;else if(0===i)for(d=0;d<s;++d)t.deletedIndices.push(d),t.deletedItems.push(Ln(u,l,a[d],c,e));else if(r){const r=Array(s);for(d=0;d<s;++d)r[d]=jn(u,n,l,a[d],c,e);const o=Array(s);for(d=0;d<i;++d)o[d]=jn(u,n,l,h[d],c,e);for(d=0;d<i;++d)r.includes(o[d])?t[d]=r.indexOf(o[d]):t[d]=-2;for(d=0;d<s;++d)o.includes(r[d])||(t.deletedIndices.push(d),t.deletedItems.push(Ln(u,l,a[d],c,e)))}else{for(d=0;d<i;++d)a.includes(h[d])?t[d]=a.indexOf(h[d]):t[d]=-2;for(d=0;d<s;++d)h.includes(a[d])||(t.deletedIndices.push(d),t.deletedItems.push(Ln(u,l,a[d],c,e)))}}if(t.deletedIndices.length>0){const e=(0,i.ui)(this.Ti(t),()=>this.Ei(t));(0,i.yL)(e)&&e.catch(S)}else this.Ei(t)}ki(){const t=this.$controller.scope;let e,s=this.Li,n=this.di;n&&(s=this.Li=(0,o.qM)(this.gi,t,this.bi,null)??null,n=this.di=!(0,i.t7)(this.items,s));const r=this.fi;if(this.$controller.isActive){const t=n?s:this.items;e=this.fi=this.wi.resolve(t).getObserver?.(t),r!==e&&(r?.unsubscribe(this),e?.subscribe(this))}else r?.unsubscribe(this),this.fi=void 0}Bi(t){const e=this.ai;this.ci=e.slice();const s=this.pi,i=s.length,n=this.ai=Array(s.length),r=this.ui,a=new Map,h=this.$controller.scope,l=this.bi,c=this.forOf,u=this.local,d=this.xi;if(void 0===t){const t=this.key;if(null!==t){const e=Array(i);if("string"==typeof t)for(let n=0;n<i;++n)e[n]=s[n][t];else for(let n=0;n<i;++n){const i=Dn(s[n],c,h,l,u,d);Pn(d,c.declaration,i,l,u,s[n]),e[n]=(0,o.qM)(t,i,l,null)}for(let t=0;t<i;++t)n[t]=Nn(r,a,e[t],s[t],c,h,l,u,d)}else for(let t=0;t<i;++t)n[t]=Nn(r,a,s[t],s[t],c,h,l,u,d)}else{const r=e.length;for(let o=0;o<i;++o){const i=t[o];n[o]=i>=0&&i<r?e[i]:Dn(s[o],c,h,l,u,d),Pn(d,c.declaration,n[o],l,u,s[o])}}r.clear(),this.ui=a}Ci(){const t=this.items;if((0,i.cy)(t))return void(this.pi=t.slice(0));const e=[];this.wi.resolve(t).iterate(t,(t,s)=>{e[s]=t}),this.pi=e}Si(t,e){let s,n,r,o;const{$controller:a,f:h,l,ai:c}=this,u=e.length,d=this.views=Array(u);for(let e=0;e<u;++e)r=d[e]=h.create().setLocation(l),r.nodes.unlink(),o=c[e],Tn(o.overrideContext,e,u),n=r.activate(t??r,a,o),(0,i.yL)(n)&&(s??=[]).push(n);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}Ai(t){let e,s,n,r=0;const{views:o,$controller:a}=this,h=o.length;for(;h>r;++r)n=o[r],n.release(),s=n.deactivate(t??n,a),(0,i.yL)(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ti(t){let e,s,n;const{$controller:r,views:o}=this,a=t.deletedIndices.slice().sort(Fn),h=a.length;let l=0;for(;h>l;++l)n=o[a[l]],n.release(),s=n.deactivate(n,r),(0,i.yL)(s)&&(e??(e=[])).push(s);for(l=0;h>l;++l)o.splice(a[l]-l,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ei(t){let e,s,n,r=0;const{$controller:o,f:a,l:h,views:l,ai:c,hi:u}=this,d=t.length;for(;d>r;++r)-2===t[r]&&(n=a.create(),l.splice(r,0,n));if(l.length!==d)throw V(814,[l.length,d]);let f=0;for(r=0;r<t.length;++r)-2!==(f=t[r])&&(l[r]=u[f]);const p=function(t){const e=t.length;e>yn&&(yn=e,$n=new Int32Array(e),kn=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,l=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=$n[s],n=t[o],-2!==n&&n<i){kn[r]=o,$n[++s]=r;continue}for(a=0,h=s;a<h;)l=a+h>>1,n=t[$n[l]],-2!==n&&n<i?a=l+1:h=l;n=t[$n[a]],(i<n||-2===n)&&(a>0&&(kn[r]=$n[a-1]),$n[a]=r)}r=++s;const c=new Int32Array(r);for(i=$n[s-1];s-- >0;)c[s]=i,i=kn[i];for(;r-- >0;)$n[r]=0;return c}(t);let g,m=p.length-1;for(r=d-1;r>=0;--r)n=l[r],g=l[r+1],-2===t[r]?(n.nodes.link(g?.nodes??h),n.setLocation(h),Tn(c[r].overrideContext,r,d),s=n.activate(n,o,c[r]),(0,i.yL)(s)&&(e??(e=[])).push(s)):m<0||r!==p[m]?(n.nodes.link(g?.nodes??h),Tn(n.scope.overrideContext,r,d),n.nodes.insertBefore(n.location)):(Tn(n.scope.overrideContext,r,d),--m);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}dispose(){this.views.forEach(vn),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}wn.$au={type:Rt,name:"repeat",isTemplateController:!0,bindables:["items"]};let yn=16,$n=new Int32Array(yn),kn=new Int32Array(yn);class Cn{get $odd(){return!this.$even}get $even(){return this.$index%2==0}get $first(){return 0===this.$index}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(t=0,e=1){this.$index=t,this.$length=e}}const Tn=(t,e,s)=>{t.$index=e,t.$length=s},xn=z("IRepeatableHandlerResolver",t=>t.singleton(An));class An{constructor(){this.Mi=(0,i.hd)((0,i.Q7)(Rn))}resolve(t){if(Mn.handles(t))return Mn;if(Sn.handles(t))return Sn;if(In.handles(t))return In;if(En.handles(t))return En;if(Bn.handles(t))return Bn;const e=this.Mi.find(e=>e.handles(t));return void 0!==e?e:On}}const Rn=z("IRepeatableHandler"),Mn={handles:i.cy,getObserver:o.Nw,iterate(t,e){const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)}},Sn={handles:i.vM,getObserver:o.Nw,iterate(t,e){let s,i=0;for(s of t.keys())e(s,i++,t)}},In={handles:i.jh,getObserver:o.Nw,iterate(t,e){let s,i=0;for(s of t.entries())e(s,i++,t)}},En={handles:i.Et,iterate(t,e){let s=0;for(;s<t;++s)e(s,s,t)}},Bn={handles:t=>null==t,iterate(){}},On={handles:t=>!1,iterate(t,e){throw V(777,t)}},Pn=(t,e,s,i,n,r)=>{t?(0,o.Um)(e,s,i,null,r):s.bindingContext[n]=r},Ln=(t,e,s,i,n)=>t?(0,o.qM)(e,s,i,null):s.bindingContext[n],jn=(t,e,s,i,n,r)=>"string"==typeof e?Ln(t,s,i,n,r)[e]:(0,o.qM)(e,i,n,null),Nn=(t,e,s,i,n,r,a,h,l)=>{let c=t.get(s);if(void 0===c?c=Dn(i,n,r,a,h,l):c instanceof o.HG?t.delete(s):1===c.length?(c=c[0],t.delete(s)):c=c.shift(),e.has(s)){const t=e.get(s);t instanceof o.HG?e.set(s,[t,c]):t.push(c)}else e.set(s,c);return Pn(l,n.declaration,c,a,h,i),c},Dn=(t,e,s,i,n,r)=>{if(r){const n=o.HG.fromParent(s,new o.ZU,new Cn);(0,o.Um)(e.declaration,n,i,null,t)}return o.HG.fromParent(s,new o.ZU(n,t),new Cn)},Fn=(t,e)=>t-e;class Vn{constructor(){this.view=(0,i.hd)(ve).create().setLocation((0,i.hd)(pi))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,a=0;if(s.isActive&&null!=i)for(n=o.HG.fromParent(s.scope,void 0===t?{}:t),a=i.length;a>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=o.HG.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Vn.$au={type:Rt,name:"with",isTemplateController:!0,bindables:["value"]};class qn{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=(0,i.hd)(ve),this.l=(0,i.hd)(pi)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue(()=>s.activate(t,i,i.scope)),this.queue(()=>this.swap(t,this.value)),this.promise}detaching(t,e){return this.queue(()=>this.view.deactivate(t,this.$controller)),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(t){this.queue(()=>this.Di(t))}Di(t){const e=t.isMatch(this.value),s=this.activeCases,n=s.length;if(!e)return n>0&&s[0].id===t.id?this.Pi(null):void 0;if(n>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&o;t++){const s=e[t];r.push(s),o=s.fallThrough}}else r.push(t);return(0,i.ui)(this.Pi(null,r),()=>(this.activeCases=r,this.qi(null)))}swap(t,e){const s=[];let n=!1;for(const t of this.cases)if((n||t.isMatch(e))&&(s.push(t),n=t.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),(0,i.ui)(this.activeCases.length>0?this.Pi(t,s):void 0,()=>{if(this.activeCases=s,0!==s.length)return this.qi(t)})}qi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,n=s.length;if(0===n)return;const r=e.scope;return 1===n?s[0].activate(t,r):(0,i.jY)(...s.map(e=>e.activate(t,r)))}Pi(t,e=[]){const s=this.activeCases,n=s.length;if(0!==n){if(1===n){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return(0,i.ui)((0,i.jY)(...s.reduce((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s),[])),()=>{s.length=0})}}queue(t){const e=this.promise;let s;s=this.promise=(0,i.ui)((0,i.ui)(e,t),()=>{this.promise===s&&(this.promise=void 0)})}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some(e=>e.accept(t))||void 0}}qn.$au={type:Rt,name:"switch",isTemplateController:!0,bindables:["value"]};let Kn=0;const _n=["value",{name:"fallThrough",mode:c,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];class Wn{constructor(){this.id=++Kn,this.fallThrough=!1,this.view=void 0,this.f=(0,i.hd)(ve),this.Ye=(0,i.hd)(o.WM),this.l=(0,i.hd)(pi),this.Ii=(0,i.hd)(i.gF).scopeTo(`Case-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof qn))throw V(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ii.debug("isMatch()");const e=this.value;return(0,i.cy)(e)?(void 0===this.fi&&(this.fi=this._i(e)),e.includes(t)):e===t}valueChanged(t,e){(0,i.cy)(t)?(this.fi?.unsubscribe(this),this.fi=this._i(t)):void 0!==this.fi&&this.fi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.fi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}_i(t){const e=this.Ye.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}Bt({name:"case",bindables:_n,isTemplateController:!0},Wn);class Hn extends Wn{linkToSwitch(t){if(void 0!==t.defaultCase)throw V(816);t.defaultCase=this}}Bt({name:"default-case",bindables:_n,isTemplateController:!0},Hn);class zn{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=(0,i.hd)(ve),this.l=(0,i.hd)(pi),this.p=(0,i.hd)($t),this.logger=(0,i.hd)(i.gF).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,n=this.$controller;return(0,i.ui)(s.activate(t,n,this.viewScope=o.HG.fromParent(n.scope,{})),()=>this.swap(t))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!(0,i.yL)(e))return;const s=this.fulfilled,n=this.rejected,r=this.pending,a=this.viewScope;let h;const l=()=>{(0,i.jY)(h=(this.preSettledTask=(0,o.jd)(()=>(0,i.jY)(s?.deactivate(t),n?.deactivate(t),r?.activate(t,a)))).result.catch(t=>{throw t}),e.then(l=>{if(this.value!==e)return;const c=()=>{this.postSettlePromise=(this.postSettledTask=(0,o.jd)(()=>(0,i.jY)(r?.deactivate(t),n?.deactivate(t),s?.activate(t,a,l)))).result};this.preSettledTask.status===j?h.then(c):(this.preSettledTask.cancel(),c())},l=>{if(this.value!==e)return;const c=()=>{this.postSettlePromise=(this.postSettledTask=(0,o.jd)(()=>(0,i.jY)(r?.deactivate(t),s?.deactivate(t),n?.activate(t,a,l)))).result};this.preSettledTask.status===j?h.then(c):(this.preSettledTask.cancel(),c())}))};this.postSettledTask?.status===j?this.postSettlePromise.then(l):(this.postSettledTask?.cancel(),l())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}zn.$au={type:Rt,name:"promise",isTemplateController:!0,bindables:["value"]};class Un{constructor(){this.view=void 0,this.f=(0,i.hd)(ve),this.l=(0,i.hd)(pi)}link(t,e,s,i){Yn(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}Un.$au={type:Rt,name:"pending",isTemplateController:!0,bindables:{value:{mode:u}}};class Gn{constructor(){this.view=void 0,this.f=(0,i.hd)(ve),this.l=(0,i.hd)(pi)}link(t,e,s,i){Yn(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}Gn.$au={type:Rt,name:"then",isTemplateController:!0,bindables:{value:{mode:d}}};class Qn{constructor(){this.view=void 0,this.f=(0,i.hd)(ve),this.l=(0,i.hd)(pi)}link(t,e,s,i){Yn(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function Yn(t){const e=t.parent,s=e?.viewModel;if(s instanceof zn)return s;throw V(813)}Qn.$au={type:Rt,name:"catch",isTemplateController:!0,bindables:{value:{mode:d}}};class Jn{"promise.resolve"(t,e){return new n.XP(t,e,"promise","bind")}}Jn[Symbol.metadata]={[i.Ri]:n.Fv.create([{pattern:"promise.resolve",symbols:""}],Jn)};class Xn{then(t,e){return new n.XP(t,e,"then","from-view")}}Xn[Symbol.metadata]={[i.Ri]:n.Fv.create([{pattern:"then",symbols:""}],Xn)};class Zn{catch(t,e){return new n.XP(t,e,"catch","from-view")}}Zn[Symbol.metadata]={[i.Ri]:n.Fv.create([{pattern:"catch",symbols:""}],Zn)};class tr{constructor(){this.Vi=!1,this.qe=(0,i.hd)(Tt),this.p=(0,i.hd)($t)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Fi():this.Vi=!0}attached(){this.Vi&&(this.Vi=!1,this.Fi()),this.qe.addEventListener("focus",this),this.qe.addEventListener("blur",this)}detaching(){const t=this.qe;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Hi||(this.value=!1)}Fi(){const t=this.qe,e=this.Hi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Hi(){return this.qe===this.p.document.activeElement}}tr.$au={type:Rt,name:"focus",bindables:{value:{mode:f}}};class er{constructor(){this.position="beforeend",this.strict=!1;const t=(0,i.hd)(ve),e=(0,i.hd)(pi),s=(0,i.hd)($t);this.p=s,this.Oi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.$i=we(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)mi.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)mi.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Oi=this.Ni();return this.Wi(e,this.position),this.ji(t,e)}detaching(t){return this.zi(t,this.Oi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Ni();if(this.Oi===e)return;this.Oi=e;const s=(0,i.ui)(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));(0,i.yL)(s)&&s.catch(S)}positionChanged(){const{$controller:t,Oi:e}=this;if(!t.isActive)return;const s=(0,i.ui)(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));(0,i.yL)(s)&&s.catch(S)}ji(t,e){const{activating:s,callbackContext:n,view:r}=this;return(0,i.ui)(s?.call(n,e,r),()=>this.Ui(t,e))}Ui(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.ui)(n.activate(t??n,s,s.scope),()=>this.Gi(e)):(n.nodes.insertBefore(this.$i),this.Gi(e))}Gi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}zi(t,e){const{deactivating:s,callbackContext:n,view:r}=this;return(0,i.ui)(s?.call(n,e,r),()=>this.Xi(t,e))}Xi(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.ui)(n.deactivate(t,s),()=>this.Ki(e)):(n.nodes.remove(),this.Ki(e))}Ki(t){const{deactivated:e,callbackContext:s,view:n}=this;return(0,i.ui)(e?.call(s,t,n),()=>this.Qi())}Ni(){const t=this.p,e=t.document;let s=this.target,n=this.renderContext;if(""===s){if(this.strict)throw V(811);return e.body}if((0,i.Kg)(s)){let r=e;(0,i.Kg)(n)&&(n=e.querySelector(n)),n instanceof t.Node&&(r=n),s=r.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw V(812);return e.body}return s}Qi(){this.$i.remove(),this.$i.$start.remove()}Wi(t,e){const s=this.$i,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":ye(t,null,r);break;case"afterbegin":ye(t,t.firstChild,r);break;case"beforebegin":ye(n,t,r);break;case"afterend":ye(n,t.nextSibling,r);break;default:throw V(779,e)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let sr;er.$au={type:Rt,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class ir{constructor(){this.Yi=null,this.Zi=null,this.ne=!1,this.expose=null,this.slotchange=null,this.Ji=new Set,this.fi=null;const t=(0,i.hd)(Js),e=(0,i.hd)(pi),s=(0,i.hd)(n.OA),r=(0,i.hd)(ms),o=this.name=s.data.name,a=s.projections?.[Ce],h=t.instruction?.projections?.[o],l=t.controller.container;let c,u;null==h?(u=l.createChild({inheritParentResources:!0}),c=r.getViewFactory(a??(sr??=Ci.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this.ts=!1):(u=l.createChild(),u.useResources(t.parent.controller.container),Y(u,Js,new i.JF(void 0,t.parent)),c=r.getViewFactory(h,u),this.ts=!0,this.es=l.getAll(Ae,!1)?.filter(t=>"*"===t.slotName||t.slotName===o)??i.tR),this.ss=(this.es??=i.tR).length>0,this.rs=t,this.view=c.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Ji.add(t)}unsubscribe(t){this.Ji.delete(t)}binding(t,e){for(this.Yi=e.scope;"synthetic"===e.vmKind&&e.parent?.viewModel instanceof ir;)e=e.parent.parent;const s=e.scope.bindingContext;let i;this.ts&&(i=this.rs.controller.scope.parent,(this.Zi=o.HG.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??s)}attaching(t,e){return(0,i.ui)(this.view.activate(t,this.$controller,this.ts?this.Zi:this.Yi),()=>{(this.ss||(0,i.Tn)(this.slotchange))&&(this.es.forEach(t=>t.watch(this)),this.ei(),this.ls(),this.ne=!0)})}detaching(t,e){return this.ne=!1,this.cs(),this.es.forEach(t=>t.unwatch(this)),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.ts&&null!=this.Zi&&(this.Zi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ei(){if(null!=this.fi)return;const t=this.l,e=t.parentElement;null!=e&&(this.fi=$e(e,e=>{rr(t,e)&&this.ls()})).observe(e,{childList:!0})}cs(){this.fi?.disconnect(),this.fi=null}ls(){const t=this.nodes,e=new Set(this.Ji);let s;for(s of(this.ne&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}ir.$au={type:Ii,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??Ce;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,ke(i)&&i.hasAttribute("au-slot")&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const nr=(t,e)=>t.compareDocumentPosition(e),rr=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===nr(t.$start,e)&&2===nr(t,e))return!0;if(i.length>0&&null!=n&&4===nr(t.$start,n)&&2===nr(t,n))return!0}};class or{constructor(){this.scopeBehavior="auto",this.us=void 0,this.tag=null,this.c=(0,i.hd)(i.p7),this.parent=(0,i.hd)(Ys),this.ds=(0,i.hd)(Tt),this.l=(0,i.hd)(pi),this.p=(0,i.hd)($t),this.r=(0,i.hd)(ms),this.gs=(0,i.hd)(n.OA),this.ps=(0,i.hd)((0,i.do)(hr,null)),this.yt=(0,i.hd)(n.B3),this.it=(0,i.hd)(Js),this.ep=(0,i.hd)(h.JW),this.oL=(0,i.hd)(o.WM),this.ne=!1}get composing(){return this.xs}get composition(){return this.us}attaching(t,e){return this.ne=!0,this.xs=(0,i.ui)(this.queue(new lr(this.template,this.component,this.model,void 0),t),t=>{this.ps.ys(t)&&(this.xs=void 0)})}detaching(t){this.ne=!1;const e=this.us,s=this.xs;return this.ps.invalidate(),this.us=this.xs=void 0,(0,i.ui)(s,()=>e?.deactivate(t))}propertyChanged(t){this.ne&&"composing"!==t&&"composition"!==t&&("model"!==t||null==this.us?"tag"===t&&this.us?.controller.vmKind===Vs||(this.xs=(0,i.ui)(this.xs,()=>(0,i.ui)(this.queue(new lr(this.template,this.component,this.model,t),void 0),t=>{this.ps.ys(t)&&(this.xs=void 0)}))):this.us.update(this.model))}queue(t,e){const s=this.ps,n=this.us;return(0,i.ui)(s.create(t),t=>s.ys(t)?(0,i.ui)(this.compose(t),r=>s.ys(t)?(0,i.ui)(r.activate(e),()=>s.ys(t)?(this.us=r,(0,i.ui)(n?.deactivate(e),()=>t)):(0,i.ui)(r.controller.deactivate(r.controller,this.$controller),()=>(r.controller.dispose(),t))):(r.controller.dispose(),t)):t)}compose(t){const{ws:e,bs:s,ks:n}=t.change,{c:r,$controller:a,l:h,gs:l}=this,c=this.Cs(this.it.controller.container,s),u=r.createChild(),d=this.p.document.createElement(null==c?this.tag??"div":c.name);let f;h.parentNode.insertBefore(d,h),f=null==c?null==this.tag?bi(d):null:c.containerless?bi(d):null;const p=()=>{if(d.remove(),null!=f){let t=f.$start.nextSibling,e=null;for(;null!==t&&t!==f;)e=t.nextSibling,t.remove(),t=e;f.$start?.remove(),f.remove()}},g=this.Bs(u,"string"==typeof s?c.Type:s,d,f),m=()=>{const s=l.captures??i.tR;if(null!==c){const e=c.capture,[n,r]=s.reduce((t,s)=>(t[!(s.target in c.bindables)&&(!0===e||(0,i.Tn)(e)&&e(s.target))?0:1].push(s),t),[[],[]]),o=As.$el(u,g,d,{projections:l.projections,captures:n},c,f);return this.Ss(d,c,r).forEach(t=>o.addBinding(t)),new dr(o,t=>o.activate(t??o,a,a.scope.parent),t=>(0,i.ui)(o.deactivate(t??o,a),p),t=>g.activate?.(t),t)}{const n=Ci.create({name:Di.generateName(),template:e}),r=this.r.getViewFactory(n,u),h=As.$view(r,a),l="auto"===this.scopeBehavior?o.HG.fromParent(this.parent.scope,g):o.HG.create(g);return h.setHost(d),null==f?this.Ss(d,n,s).forEach(t=>h.addBinding(t)):h.setLocation(f),new dr(h,t=>h.activate(t??h,a,l),t=>(0,i.ui)(h.deactivate(t??h,a),p),t=>g.activate?.(t),t)}};return"activate"in g?(0,i.ui)(g.activate(n),()=>m()):m()}Bs(t,e,s,n){if(null==e)return new ar;if("object"==typeof e)return e;const r=this.p;$i(t,s,r),Y(t,pi,new i.JF("IRenderLocation",n));const o=t.invoke(e);return Y(t,e,new i.JF("au-compose.component",o)),o}Cs(t,e){if("string"==typeof e){const s=Di.find(t,e);if(null==s)throw V(806,e);return s}const s=(0,i.Tn)(e)?e:e?.constructor;return Di.isType(s,void 0)?Di.getDefinition(s,null):null}Ss(t,e,s){const i=new Xs(this.$controller,{projections:null,captures:s},this.it.parent);return Re.create(i,t,e,this.r,this.yt,this.p,this.ep,this.oL)}}or.$au={type:Ii,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw V(805,t)}},{name:"composing",mode:d},{name:"composition",mode:d},"tag"]};class ar{}class hr{constructor(){this.id=0}ys(t){return t.id===this.id}create(t){return(0,i.ui)(t.load(),t=>new ur(++this.id,t))}invalidate(){this.id++}}class lr{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}load(){return(0,i.yL)(this.ws)||(0,i.yL)(this.bs)?Promise.all([this.ws,this.bs]).then(([t,e])=>new cr(t,e,this.ks,this.As)):new cr(this.ws,this.bs,this.ks,this.As)}}class cr{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}}class ur{constructor(t,e){this.id=t,this.change=e}}class dr{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw V(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw V(808);default:this.state=-1}}}const fr=z("ISanitizer",t=>t.singleton(class{sanitize(){throw V(99,"sanitize")}}));class pr{constructor(){this.Rs=(0,i.hd)(fr)}toView(t){return null==t?null:this.Rs.sanitize(t)}}pr.$au={type:qt,name:"sanitize"};class gr{constructor(){this.el=(0,i.hd)(Tt),this.p=(0,i.hd)($t),this.Ts=!1,this.L=!1,this.$val="",this.$prio="",this.update=()=>{this.L=!1,Boolean(this.value)!==this.Es&&(this.Es===this.Ls?(this.Es=!this.Ls,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Es=this.Ls,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=(0,i.hd)(n.OA);this.Es=this.Ls="hide"!==t.alias}binding(){this.Ts=!0,this.update()}detaching(){this.Ts=!1,this.L=!1}valueChanged(){this.Ts&&!this.L&&(this.L=!0,(0,o.jL)(this.update))}}gr.$au={type:Rt,name:"show",bindables:["value"],aliases:["hide"]};const mr=[Ui,o.UA,an],vr=[n.IZ,n.xW,n.bp,me],br=(n.lw,n._G,[n.Ou,n.OK,n.MI,n.vk,n.GB,n.m9,n.W_,n.Rw,n.p5,n.HF,n.Wu,n.ao,n.XF]),wr=[dt,at,ht,lt,gt,vt,ct,pr,gn,mn,wn,Vn,qn,Wn,Hn,zn,Un,Gn,Qn,Jn,Xn,Zn,dn,fn,pn,or,er,tr,gr,ir],yr=[Ge,Qe,ze,Ue,qe,Ke,_e,We,He,Xe,is,Ze,ts,es,ss,Ye,ns,rs],$r=kr(i.lQ);function kr(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(Q(o.az,s.coercingOptions),h.eC,...mr,...wr,...vr,...br,...yr)},customize:e=>kr(e??t)}}}}]);